{"version":3,"sources":["webpack://deriv-com/./node_modules/@livechat/data-utils/dist/data-utils.es.js","webpack://deriv-com/./node_modules/@livechat/deferred/dist/deferred.esm.js","webpack://deriv-com/./node_modules/redux/es/redux.js","webpack://deriv-com/./node_modules/@livechat/side-effects-middleware/es/index.js","webpack://deriv-com/./node_modules/memory-web-storage/es/index.js","webpack://deriv-com/./node_modules/@livechat/isomorphic-storage/dist/isomorphic-storage.es.js","webpack://deriv-com/./node_modules/@livechat/promise-try/dist/promise-try.es.js","webpack://deriv-com/./node_modules/@livechat/url-utils/dist/url-utils.esm.js","webpack://deriv-com/./node_modules/@livechat/mitt/dist/livechat-mitt.es.js","webpack://deriv-com/./node_modules/@livechat/sockjs-manager/dist/sockjs-manager.esm.js","webpack://deriv-com/./node_modules/@livechat/platform-client/dist/platform-client.esm.js","webpack://deriv-com/./node_modules/@livechat/file-upload/dist/file-upload.es.js","webpack://deriv-com/./node_modules/@livechat/dom-utils/dist/dom-utils.es.js","webpack://deriv-com/./node_modules/@livechat/customer-auth/dist/customer-auth.esm.js","webpack://deriv-com/./node_modules/@livechat/customer-sdk/dist/customer-sdk.esm.js","webpack://deriv-com/./node_modules/backo2/index.js","webpack://deriv-com/./node_modules/gatsby/dist/internal-plugins/bundle-optimisations/polyfills/fetch.js","webpack://deriv-com/./node_modules/inherits/inherits_browser.js","webpack://deriv-com/./node_modules/json3/lib/json3.js","webpack://deriv-com/./node_modules/querystringify/index.js","webpack://deriv-com/./node_modules/requires-port/index.js","webpack://deriv-com/./node_modules/sockjs-client/lib/entry.js","webpack://deriv-com/./node_modules/sockjs-client/lib/event/close.js","webpack://deriv-com/./node_modules/sockjs-client/lib/event/emitter.js","webpack://deriv-com/./node_modules/sockjs-client/lib/event/event.js","webpack://deriv-com/./node_modules/sockjs-client/lib/event/eventtarget.js","webpack://deriv-com/./node_modules/sockjs-client/lib/event/trans-message.js","webpack://deriv-com/./node_modules/sockjs-client/lib/facade.js","webpack://deriv-com/./node_modules/sockjs-client/lib/iframe-bootstrap.js","webpack://deriv-com/./node_modules/sockjs-client/lib/info-ajax.js","webpack://deriv-com/./node_modules/sockjs-client/lib/info-iframe-receiver.js","webpack://deriv-com/./node_modules/sockjs-client/lib/info-iframe.js","webpack://deriv-com/./node_modules/sockjs-client/lib/info-receiver.js","webpack://deriv-com/./node_modules/sockjs-client/lib/location.js","webpack://deriv-com/./node_modules/sockjs-client/lib/main.js","webpack://deriv-com/./node_modules/sockjs-client/lib/shims.js","webpack://deriv-com/./node_modules/sockjs-client/lib/transport-list.js","webpack://deriv-com/./node_modules/sockjs-client/lib/transport/browser/abstract-xhr.js","webpack://deriv-com/./node_modules/sockjs-client/lib/transport/browser/eventsource.js","webpack://deriv-com/./node_modules/sockjs-client/lib/transport/browser/websocket.js","webpack://deriv-com/./node_modules/sockjs-client/lib/transport/eventsource.js","webpack://deriv-com/./node_modules/sockjs-client/lib/transport/htmlfile.js","webpack://deriv-com/./node_modules/sockjs-client/lib/transport/iframe.js","webpack://deriv-com/./node_modules/sockjs-client/lib/transport/jsonp-polling.js","webpack://deriv-com/./node_modules/sockjs-client/lib/transport/lib/ajax-based.js","webpack://deriv-com/./node_modules/sockjs-client/lib/transport/lib/buffered-sender.js","webpack://deriv-com/./node_modules/sockjs-client/lib/transport/lib/iframe-wrap.js","webpack://deriv-com/./node_modules/sockjs-client/lib/transport/lib/polling.js","webpack://deriv-com/./node_modules/sockjs-client/lib/transport/lib/sender-receiver.js","webpack://deriv-com/./node_modules/sockjs-client/lib/transport/receiver/eventsource.js","webpack://deriv-com/./node_modules/sockjs-client/lib/transport/receiver/htmlfile.js","webpack://deriv-com/./node_modules/sockjs-client/lib/transport/receiver/jsonp.js","webpack://deriv-com/./node_modules/sockjs-client/lib/transport/receiver/xhr.js","webpack://deriv-com/./node_modules/sockjs-client/lib/transport/sender/jsonp.js","webpack://deriv-com/./node_modules/sockjs-client/lib/transport/sender/xdr.js","webpack://deriv-com/./node_modules/sockjs-client/lib/transport/sender/xhr-cors.js","webpack://deriv-com/./node_modules/sockjs-client/lib/transport/sender/xhr-fake.js","webpack://deriv-com/./node_modules/sockjs-client/lib/transport/sender/xhr-local.js","webpack://deriv-com/./node_modules/sockjs-client/lib/transport/websocket.js","webpack://deriv-com/./node_modules/sockjs-client/lib/transport/xdr-polling.js","webpack://deriv-com/./node_modules/sockjs-client/lib/transport/xdr-streaming.js","webpack://deriv-com/./node_modules/sockjs-client/lib/transport/xhr-polling.js","webpack://deriv-com/./node_modules/sockjs-client/lib/transport/xhr-streaming.js","webpack://deriv-com/./node_modules/sockjs-client/lib/utils/browser-crypto.js","webpack://deriv-com/./node_modules/sockjs-client/lib/utils/browser.js","webpack://deriv-com/./node_modules/sockjs-client/lib/utils/escape.js","webpack://deriv-com/./node_modules/sockjs-client/lib/utils/event.js","webpack://deriv-com/./node_modules/sockjs-client/lib/utils/iframe.js","webpack://deriv-com/./node_modules/sockjs-client/lib/utils/log.js","webpack://deriv-com/./node_modules/sockjs-client/lib/utils/object.js","webpack://deriv-com/./node_modules/sockjs-client/lib/utils/random.js","webpack://deriv-com/./node_modules/sockjs-client/lib/utils/transport.js","webpack://deriv-com/./node_modules/sockjs-client/lib/utils/url.js","webpack://deriv-com/./node_modules/sockjs-client/lib/version.js","webpack://deriv-com/./node_modules/symbol-observable/es/index.js","webpack://deriv-com/./node_modules/symbol-observable/es/ponyfill.js","webpack://deriv-com/./node_modules/url-parse/index.js","webpack://deriv-com/./node_modules/core-js/internals/string-trim-forced.js","webpack://deriv-com/./node_modules/core-js/internals/string-trim.js","webpack://deriv-com/./node_modules/core-js/internals/whitespaces.js","webpack://deriv-com/./node_modules/core-js/modules/es.string.trim-start.js"],"names":["hasOwnProperty","prop","obj","call","flatMap","iteratee","arr","_ref","concat","apply","map","isArray","Array","isObject","mapValues","mapper","Object","keys","reduce","acc","key","identity","value","generateRandomId","Math","random","toString","substring","generateUniqueId","id","get","propPath","arrPath","split","pathPartIndex","result","length","isEmpty","collection","noop","numericSortBy","propOrMapper","element","sort","elementA","elementB","pickOwn","props","toPairs","stringCompare","strA","strB","uniqBy","seen","filter","indexOf","push","def","promise","Promise","resolve","reject","randomString","join","ActionTypes","INIT","REPLACE","PROBE_UNKNOWN_ACTION","isPlainObject","proto","getPrototypeOf","createStore","reducer","preloadedState","enhancer","_ref2","arguments","Error","undefined","currentReducer","currentState","currentListeners","nextListeners","isDispatching","ensureCanMutateNextListeners","slice","getState","subscribe","listener","isSubscribed","index","splice","dispatch","action","type","listeners","i","replaceReducer","nextReducer","observable","outerSubscribe","observer","TypeError","observeState","next","unsubscribe","this","_defineProperty","defineProperty","enumerable","configurable","writable","ownKeys","object","enumerableOnly","getOwnPropertySymbols","sym","getOwnPropertyDescriptor","_objectSpread2","target","source","forEach","getOwnPropertyDescriptors","defineProperties","_len","funcs","_key","arg","a","b","testKey","memoryStorage","getItem","setItem","_value","String","err","removeItem","clear","storage","window","testStorageSupport","localStorage","data","fn","buildQueryString","pair","encodeURIComponent","originRegexp","intersperseWithTabOrNewline","str","replace","RegExp","assign","prototype","mitt","eventsMap","create","instance","off","handler","once","on","onceHandler","maybeSecondArg","url","_temp","reconnectTimer","query","_ref$transports","transports","finalUrl","emitter","backoff","_ref$min","min","_ref$max","max","_ref$jitter","jitter","attempts","duration","ms","pow","rand","deviation","floor","reset","backo","state","socket","openListener","emit","closeListener","reconnect","messageListener","heartbeatListener","close","removeEventListener","connect","addEventListener","delay","clearTimeout","setTimeout","managedSocket","_connect","destroy","disconnect","_reconnect","_x","send","getReadyState","pingTimer","timer","sink","_ref$query","_ref$rescheduleTimeou","rescheduleTimeout","_ref$emitter","manager","bh","connectionHero","cancel","check","deferred","code","_resolve","isSocketOpen","frame","JSON","stringify","reschedulePing","ping","cleanupPossiblyPendingTasks","message","parse","then","UPLOAD_FAILED","headers","_ref$method","method","onProgress","_ref$withCredentials","withCredentials","xhr","XMLHttpRequest","formData","upload","onprogress","event","loaded","total","onload","response","status","onerror","onabort","open","header","setRequestHeader","FormData","append","abort","document","documentElement","currentStyle","POST_MESSAGE_ORIGIN","CUSTOMER_AUTH_FOOTPRINT","ACCOUNTS_URL","buildSrc","config","redirectUri","env","uniqueGroups","licenseId","groupId","clientId","license_id","flow","response_type","client_id","redirect_uri","post_message_uri","buildParams","createError","buildIframe","domain","iframe","createElement","style","display","setAttribute","location","match","pathname","fetchToken","postMessageOrigin","getPostMessageOrigin","cleanup","node","parentNode","removeChild","timeoutId","origin","isTokenResponse","token","identity_exception","oauth_exception","accessToken","access_token","entityId","entity_id","expiresIn","expires_in","tokenType","token_type","creationDate","Date","now","parseTokenResponse","body","appendChild","validateConfig","cacheKey","pendingTokenRequest","cachedToken","retrievingToken","getFreshToken","getToken","isExpiredToken","hasToken","invalidate","_objectWithoutPropertiesLoose","excluded","sourceKeys","_toPropertyKey","input","hint","prim","Symbol","toPrimitive","res","Number","_toPrimitive","CHANGE_REGION","CHECK_GOALS","DESTROY","FAIL_ALL_REQUESTS","LOGIN_SUCCESS","PAUSE_CONNECTION","PREFETCH_TOKEN","PUSH_RECEIVED","PUSH_RESPONSE_RECEIVED","RECONNECT","REQUEST_FAILED","RESPONSE_RECEIVED","SEND_REQUEST","SET_CHAT_ACTIVE","SET_SELF_ID","SOCKET_CONNECTED","SOCKET_DISCONNECTED","SOCKET_RECOVERED","SOCKET_UNSTABLE","START_CONNECTION","UPDATE_CUSTOMER_PAGE","CONNECTION_LOST","IDENTITY_MISMATCH","MISDIRECTED_CONNECTION","MISSING_CHAT_THREAD","ACCEPT_GREETING","ACTIVATE_CHAT","CANCEL_GREETING","DEACTIVATE_CHAT","DELETE_CHAT_PROPERTIES","DELETE_EVENT_PROPERTIES","DELETE_THREAD_PROPERTIES","GET_CHAT","GET_CUSTOMER","GET_FORM","GET_PREDICTED_AGENT","GET_URL_INFO","LIST_CHATS","LIST_GROUP_STATUSES","LIST_THREADS","LOGIN","MARK_EVENTS_AS_SEEN","SEND_EVENT","SEND_RICH_MESSAGE_POSTBACK","SEND_SNEAK_PEEK","SET_CUSTOMER_SESSION_FIELDS","START_CHAT","UPDATE_CHAT_PROPERTIES","UPDATE_CUSTOMER","UPDATE_CUSTOMER_PAGE$1","UPDATE_EVENT_PROPERTIES","UPDATE_THREAD_PROPERTIES","CONNECTED","DESTROYED","DISCONNECTED","AGENT","CUSTOMER","getConnectionStatus","connection","getRequest","requests","getSelfId","users","self","isChatActive","chatId","chat","chats","active","isConnected","getApiOrigin","region","getEnvPart","getServerUrl","removeStoredRequest","setConnectionStatus","createReducer$1","_createReducer","initialState","reducersMap","_ref3","_ref4","_extends2","request","_ref5","_extends3","payload","previousStatus","page","console","warn","finalCreateStore","initialStateData","compose","sideEffectsMiddleware","handlers","store","add","_initialStateData$app","application","_initialStateData$gro","_initialStateData$pag","_initialStateData$reg","_initialStateData$ref","referrer","_initialStateData$uni","_initialStateData$mob","mobile","name","version","others","createInitialState","middlewares","_dispatch","middlewareAPI","chain","middleware","applyMiddleware","addSideEffectsHandler","error","CHAT_DEACTIVATED","CUSTOMER_DISCONNECTED","CUSTOMER_SIDE_STORAGE_UPDATED","INCOMING_CHAT","INCOMING_EVENT","INCOMING_MULTICAST","INCOMING_TYPING_INDICATOR","QUEUE_POSITION_UPDATED","THREAD_PROPERTIES_UPDATED","USER_ADDED_TO_CHAT","USER_REMOVED_FROM_CHAT","FILE","FILLED_FORM","MESSAGE","RICH_MESSAGE","SYSTEM_MESSAGE","createEventBase","base","customId","custom_id","properties","parseEvent","text","postback","thread_id","threadId","event_id","eventId","form_id","formId","fields","field","answer","_field$answer","group_id","systemMessage","system_message_type","systemMessageType","recipients","parseStartChatData","continuous","access","thread","groupIds","group_ids","events","parseThreadData","parseCustomerSessionFields","sessionFields","parseCustomerUpdate","update","session_fields","reason","prefetchToken","fresh","sendRequest","setChatActive","setSelfId","sendRequestAction","_deferred","getSideStorageKey","_store$getState","getSideStorage","catch","sideStorage","sendLoginFlowRequest","createLoginTask","auth","customerDataProvider","task","sentPage","destroy$$1","reconnect$$1","getTokenAndSideStorage","all","dispatchSelfId","selfId","sendLogin","customer","customer_side_storage","is_mobile","channelType","channel_type","customer_page","race","_store","onSuccess","onError","steps","cancelled","intermediateResult","step","shift","taskChain","loginResponse","toLowerCase","_FAIL_ALL_REQUESTS_ME","failAllRequests","getAllRequests","rejects","requestId","failRequest","requestAction","SUCCESS","freeze","success","parseCommonEventProps","parsed","authorId","author_id","createdAt","created_at","downsizeWithRatio","dimensions","biggerProp","smallerProp","bigger","smaller","height","width","ratio","ceil","parseFile","file","image","contentType","content_type","thumbnails","default","thumbnail_url","high","thumbnail2x_url","parseImage","parseFilledForm","filledForm","parseMessage","parseRichMessageElement","title","subtitle","buttons","serverButton","postbackId","postback_id","userIds","user_ids","role","button","_button","webview_height","webviewHeight","parseRichMessage","richMessage","template_id","template","elements","parseSystemMessage","text_vars","textVars","parseEvent$1","parseGreeting","greeting","addon","uniqueId","unique_id","displayedFirstTime","displayed_first_time","accepted","agent","avatar","jobTitle","job_title","isBot","is_bot","parseAccess","getEventsSeenUpToMap","user","events_seen_up_to","el","parseThread","Boolean","previousThreadId","previous_thread_id","nextThreadId","next_thread_id","queue","parseQueue","parseIncomingChat","parseChatUser","eventsSeenUpToMap","parseCustomerOptionalProps","customerProps","optionalProps","parseCustomerCommonProps","parseCustomer","statistics","chatsCount","chats_count","threadsCount","threads_count","visitsCount","visits_count","pageViewsCount","page_views_count","greetingsShownCount","greetings_shown_count","greetingsAcceptedCount","greetings_accepted_count","parseQueueUpdate","queueUpdate","position","waitTime","wait_time","queuedAt","queued_at","present","FAIL_ALL_REQUESTS_MESSAGES","updateStateIfNeeded","chatsSummary","emitUsers","rest","_rest","handlePush","_ref6","lc2","queue_pos","queue_waiting_time","saveSideStorage","content","groups","availability","handleMulticast","handleResponse","_ref7","_ref8","createSideEffectsHandler","_ref9","login","reinitialize","customer_fields","page_url","Authorization","checkGoals","_action$payload","_action$payload2","dynamicConfig","eventData","_ref10","_action$payload3","isDestroyed","_ref3$payload","request_id","sendRequest$1","initialize","parseChatPropertiesUpdatedPush","chat_id","parseChatTransferredPush","basePayload","transferredTo","transferred_to","agent_ids","agentIds","requesterId","requester_id","parseCustomerPageUpdatedPush","timestamp","parseCustomerUpdatedPush","parseEventPropertiesDeletedPush","parseEventPropertiesUpdatedPush","parseEventUpdatedPush","parseEventsMarkedAsSeenPush","userId","user_id","seenUpTo","seen_up_to","parseGreetingAcceptedPush","parseIncomingChatPush","parseIncomingEventPush","parseIncomingGreetingPush","parseIncomingRichMessagePostbackPush","parseIncomingTypingIndicatorPush","typingIndicator","typing_indicator","isTyping","is_typing","parseQueuePositionUpdatedPush","parseThreadPropertiesDeletedPush","parseThreadPropertiesUpdatedPush","parseUserAddedToChatPush","parseUserRemovedFromChatPush","parseFields","options","commentLabel","comment_label","parseGetFormResponse","enabled","form","withFakeIds","parseGetUrlInfoResponse","urlInfo","description","image_url","imageUrl","image_width","image_height","imageWidth","imageHeight","getAvailabilityBasedOnDynamicConfig","onlineGroups","online_groups_ids","customerGroups","customer_groups","monitoringGroupId","monitoring","parseListChatsResponse","chats_summary","lastThreadCreatedAt","last_thread_created_at","lastThreadId","last_thread_id","lastEventsPerType","last_event_per_type","_ref3$properties","chatSummary","lastEventPerType","refinedLastEventsPerType","lastEventSummariesArray","eventType","lastEventSummary","eventSummaryA","eventSummaryB","thread_created_at","lastEvent","order","totalChats","total_chats","summary","previousPageId","previous_page_id","nextPageId","next_page_id","parseListGroupStatusesResponse","groups_status","parseListThreadsResponse","threads","parseLoginResponse","__priv_dynamic_config","has_active_thread","hasUnreadEvents","has_unread_events","parsePush","handleResponse$1","_getRequest2","parsedResponse","parseResponse","socketListener","toUpperCase","handleResponseError","_getRequest3","parsedPush","handlePushResponse","handlePush$1","INCORRECT_REQUESTER_STRUCTURE","appendString","sendTicketForm","timeZone","customerId","_ref$groupId","ticketBody","licence_id","ticket_message","offline_message","visitor_id","requester","group","timezone","label","subject","_text","_value2","_text2","mail","_value3","_text3","_value4","_text4","_value5","answers","_text5","createTicketBody","ok","json","errHandler","errors","firstError","MEGABYTE","SIZE_LIMIT","formatBytes","bytes","precision","kilobytes","toFixed","megabytes","size","validateFile","uploadError","_uploadError$response","log","eventName","event_name","severity","sdkVersion","img","Image","src","makeGraylogRequest","LISTENER_IDENTITY","listenersMap","createDebuggedMethods","methods","prefix","methodNames","methodName","_console","args","info","createEnhancedListener","enhancedListenerId","enhancedListener","debug","_sdk","sdk","_on","_once","_off","_getChatHistory","getChatHistory","_console2","_len2","_key2","history","logLabel","_console3","_console4","_console5","init","_config$autoConnect","autoConnect","instanceConfig","client","proxy","_client","createSocketClient","sendRequestAction$$1","bind","startConnection","api","acceptGreeting","greetingId","greeting_id","activateChat","requestData","parseActivateChatData","cancelGreeting","cancelRate","params","_params$properties","listThreads","deleteThreadProperties","rating","deactivateChat","deleteChatProperties","deleteEventProperties","getChat","historyState","queuedTasks","minEventsCount","pageId","reverse","done","queuedTask","_next","createChatHistoryIterator","getCustomer","getForm","getPredictedAgent","getUrlInfo","_ref11","listChats","_ref12","_ref12$limit","limit","page_id","listGroupStatuses","_temp2","_ref14","_ref14$sortOrder","sortOrder","sort_order","min_events_count","markEventsAsSeen","_ref15","rateChat","_ref16","updateThreadProperties","sendEvent","_sendEvent","sendEvent$$1","attachToLastThread","attach_to_last_thread","sendRichMessagePostback","_ref17","setCustomerSessionFields","_ref18","setSneakPeek","_ref19","sneakPeekText","sneak_peek_text","startChat","updateChatProperties","_ref20","updateCustomer","updateCustomerPage","updateEventProperties","_ref21","_ref22","uploadFile","Backoff","opts","factor","module","exports","setMin","setMax","setJitter","g","fetch","ctor","superCtor","super_","constructor","TempCtor","isLoader","objectTypes","freeExports","nodeType","root","freeGlobal","runInContext","context","SyntaxError","nativeJSON","objectProto","getClass","isProperty","attempt","func","errorFunc","exception","isExtended","has","isSupported","serialized","stringifySupported","toJSON","parseSupported","getUTCFullYear","getUTCMonth","getUTCDate","getUTCHours","getUTCMinutes","getUTCSeconds","getUTCMilliseconds","functionClass","numberClass","stringClass","arrayClass","charIndexBuggy","_forOwn","callback","Properties","dontEnums","property","valueOf","isConstructor","isFunction","hasProperty","Escapes","92","34","8","12","10","13","9","toPaddedString","_serializeDate","getData","year","month","date","time","hours","minutes","seconds","milliseconds","Months","getDay","dateToJSON","nativeStringify","nativeToJSON","escapeChar","character","charCode","charCodeAt","escaped","reEscape","quote","lastIndex","test","serialize","whitespace","indentation","stack","className","results","pop","Index","Source","fromCharCode","Unescapes","47","98","116","110","102","114","lex","begin","isSigned","charAt","temp","hasMembers","walk","global","previousJSON","JSON3","isRestored","decode","decodeURIComponent","e","encode","pairs","isNaN","part","parser","exec","port","protocol","transportList","_sockjs_onload","inherits","Event","CloseEvent","initEvent","wasClean","EventTarget","EventEmitter","removeAllListeners","_listeners","fired","removeListener","l","ai","addListener","canBubble","cancelable","bubbles","timeStamp","stopPropagation","preventDefault","CAPTURING_PHASE","AT_TARGET","BUBBLING_PHASE","idx","dispatchEvent","t","TransportMessageEvent","iframeUtils","FacadeJS","transport","_transport","_transportMessage","_transportClose","postMessage","_send","_close","urlUtils","eventUtils","InfoIframeReceiver","loc","SockJS","availableTransports","parentOrigin","transportMap","at","facadeTransport","transportName","bootstrap_iframe","facade","currentWindowId","hash","attachEvent","parent","iframeMessage","ignored","windowId","p","transUrl","baseUrl","isOriginEqual","href","objectUtils","InfoAjax","AjaxObject","t0","xo","rtt","XHRLocalObject","InfoReceiverIframe","ir","utils","IframeTransport","InfoIframe","go","ifr","msg","d","XDR","XHRCors","XHRLocal","XHRFake","InfoReceiver","doXhr","_getReceiver","sameOrigin","sameScheme","addPath","timeoutRef","_cleanup","timeout","host","URL","escape","browser","protocols","readyState","CONNECTING","extensions","protocols_whitelist","_transportsWhitelist","_transportOptions","transportOptions","_timeout","sessionId","_generateSessionId","string","_server","server","numberString","parsedUrl","secure","isLoopbackAddr","hostname","sortedProtocols","o","getOrigin","_origin","set","_urlInfo","nullOrigin","hasDomain","isSchemeEqual","_ir","_receiveInfo","userSetCode","CLOSING","CLOSED","OPEN","_rto","countRTO","_transUrl","base_url","extend","enabledTransports","filterToEnabled","_transports","main","Transport","needBody","unshift","timeoutMs","roundTrips","_transportTimeoutId","_transportTimeout","transportUrl","transportObj","_open","forceFail","onmessage","onclose","ArrayPrototype","ObjectPrototype","FunctionPrototype","Function","StringPrototype","array_slice","_toString","val","isString","supportsDescriptors","forceAssign","toObject","toInteger","num","n","abs","Empty","that","binder","bound","boundLength","boundArgs","properlyBoxesNonStrict","properlyBoxesStrict","boxedString","splitString","fun","thisp","_","__","hasFirefox2IndexOfBug","sought","compliantExecNpcg","string_split","separator","separator2","lastLength","output","flags","ignoreCase","multiline","extended","sticky","lastLastIndex","string_substr","substr","hasNegativeSubstrBug","start","XHR","AbstractXHRObject","_start","x","addQuery","unloadRef","unloadAdd","ontimeout","noCredentials","supportsCORS","onreadystatechange","responseText","unloadDel","axo","cors","EventSource","Driver","WebSocket","MozWebSocket","AjaxBasedTransport","EventSourceReceiver","XHRCorsObject","EventSourceDriver","EventSourceTransport","HtmlfileReceiver","HtmlFileTransport","iframeUrl","iframeObj","createIframe","r","onmessageCallback","_message","detachEvent","cdata","post","iframeEnabled","SenderReceiver","JsonpReceiver","jsonpSender","JsonPTransport","urlSuffix","Receiver","opt","ajaxUrl","createAjaxSender","BufferedSender","sender","sendBuffer","sendStop","sendSchedule","sendScheduleWait","tref","IframeWrapTransport","iframeInfo","Polling","receiveUrl","_scheduleReceiver","poll","pollIsClosing","senderFunc","pollUrl","es","decodeURI","polluteGlobalNamespace","WPrefix","htmlfileEnabled","constructFunc","createHtmlfile","stop","urlWithId","_callback","_createScript","_abort","scriptErrorTimeout","aborting","script2","script","onclick","_scriptError","errorTimer","loadedOkay","charset","htmlFor","async","isOpera","head","getElementsByTagName","insertBefore","firstChild","XhrReceiver","bufferPosition","_chunkHandler","buf","area","enctype","acceptCharset","submit","completed","XDRObject","xdr","XDomainRequest","_error","XhrDriver","to","WebsocketDriver","WebSocketTransport","ignore","ws","XdrStreamingTransport","XdrPollingTransport","cookie_needed","XhrPollingTransport","XhrStreamingTransport","crypto","getRandomValues","randomBytes","Uint8Array","navigator","userAgent","isKonqueror","extraLookup","extraEscapable","quoted","escapable","unrolled","c","unrollLookup","onUnload","afterUnload","isChromePackagedApp","chrome","app","runtime","ref","triggerUnloadCallbacks","errorCallback","unattach","contentWindow","doc","CollectGarbage","write","parentWindow","logObject","level","levelExists","_randomStringChars","ret","number","transportsWhitelist","trans","websocket","path","qs","q","addr","required","slashes","protocolre","left","trimLeft","rules","address","NaN","lolcation","finaldestination","Url","unescape","extractProtocol","relative","extracted","instruction","instructions","last","up","username","password","char","ins","fails","whitespaces","METHOD_NAME","requireObjectCoercible","ltrim","rtrim","createMethod","TYPE","$this","end","trim","$","$trimStart","FORCED","forcedStringTrimMethod","trimStart","forced"],"mappings":"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","file":"3720-8d25492e4917fc9f2b1c.js","sourcesContent":["function add(first, second) {\n  return first + second;\n}\n\nvar _ref = {},\n    hasOwnProperty = _ref.hasOwnProperty;\n\nfunction hasOwn(prop, obj) {\n  return hasOwnProperty.call(obj, prop);\n}\n\nfunction assign() {\n  // eslint-disable-next-line no-func-assign\n  assign = Object.assign || function (target) {\n    for (var _len = arguments.length, sources = new Array(_len > 1 ? _len - 1 : 0), _key = 1; _key < _len; _key++) {\n      sources[_key - 1] = arguments[_key];\n    }\n\n    sources.forEach(function (source) {\n      // false positive\n      // eslint-disable-next-line no-unused-vars\n      for (var key in source) {\n        if (hasOwn(key, source)) {\n          target[key] = source[key];\n        }\n      }\n    });\n    return target;\n  };\n\n  return assign.apply(void 0, arguments);\n}\n\nvar capitalizeFirstLetter = function capitalizeFirstLetter(text) {\n  return text.charAt(0).toUpperCase() + text.slice(1);\n};\n\nfunction flatMap(iteratee, arr) {\n  var _ref;\n\n  return (_ref = []).concat.apply(_ref, arr.map(iteratee));\n}\n\nfunction chain(fn, listOrFn) {\n  if (typeof listOrFn === 'function') {\n    return function (list) {\n      return fn(listOrFn(list))(list);\n    };\n  }\n\n  return flatMap(fn, listOrFn);\n}\n\nvar isArray = Array.isArray;\n\nfunction isObject(obj) {\n  return typeof obj === 'object' && obj !== null && !isArray(obj);\n}\n\nfunction mapValues(mapper, obj) {\n  return Object.keys(obj).reduce(function (acc, key) {\n    acc[key] = mapper(obj[key]);\n    return acc;\n  }, {});\n}\n\nfunction cloneDeep(value) {\n  if (isArray(value)) {\n    return value.map(cloneDeep);\n  }\n\n  if (isObject(value)) {\n    return mapValues(cloneDeep, value);\n  }\n\n  return value;\n} // slightly simplified version of https://github.com/sindresorhus/camelcase/blob/a526ef0399f9a1310eaacafa0ae4a69da4a2f1ad/index.js\n// TODO: possibly could be rewritten using short-ish regexp\n\n\nvar preserveCamelCase = function preserveCamelCase(input) {\n  var text = input;\n  var isLastCharLower = false;\n  var isLastCharUpper = false;\n  var isLastLastCharUpper = false;\n\n  for (var index = 0; index < text.length; index++) {\n    var _char = text[index];\n\n    if (isLastCharLower && /[a-zA-Z]/.test(_char) && _char.toUpperCase() === _char) {\n      text = text.slice(0, index) + '-' + text.slice(index);\n      isLastCharLower = false;\n      isLastLastCharUpper = isLastCharUpper;\n      isLastCharUpper = true;\n      index++;\n    } else if (isLastCharUpper && isLastLastCharUpper && /[a-zA-Z]/.test(_char) && _char.toLowerCase() === _char) {\n      text = text.slice(0, index - 1) + '-' + text.slice(index - 1);\n      isLastLastCharUpper = isLastCharUpper;\n      isLastCharUpper = false;\n      isLastCharLower = true;\n    } else {\n      isLastCharLower = _char.toLowerCase() === _char;\n      isLastLastCharUpper = isLastCharUpper;\n      isLastCharUpper = _char.toUpperCase() === _char;\n    }\n  }\n\n  return text;\n};\n\nfunction camelCase(input) {\n  var text = input.trim();\n\n  if (text.length === 0) {\n    return '';\n  }\n\n  if (text.length === 1) {\n    return text.toLowerCase();\n  }\n\n  if (/^[a-z\\d]+$/.test(text)) {\n    return text;\n  }\n\n  var hasUpperCase = text !== text.toLowerCase();\n\n  if (hasUpperCase) {\n    text = preserveCamelCase(text);\n  }\n\n  text = text.replace(/^[_.\\- ]+/, '').toLowerCase().replace(/[_.\\- ]+(\\w|$)/g, function (match, p1) {\n    return p1.toUpperCase();\n  });\n  return text;\n}\n\nfunction compact(collection) {\n  return isArray(collection) ? collection.filter(function (value) {\n    return value !== null && value !== undefined;\n  }) : Object.keys(collection).reduce(function (result, key) {\n    var value = collection[key];\n\n    if (value !== null && value !== undefined) {\n      result[key] = value;\n    }\n\n    return result;\n  }, {});\n}\n\nfunction compose() {\n  for (var _len = arguments.length, funcs = new Array(_len), _key = 0; _key < _len; _key++) {\n    funcs[_key] = arguments[_key];\n  }\n\n  return funcs.reduce(function (composed, next) {\n    return function () {\n      return composed(next.apply(void 0, arguments));\n    };\n  });\n}\n\nfunction debounce(ms, fn) {\n  // actual return type of setTimeout differs per platform (browser vs node)\n  var timeoutId;\n  return function () {\n    clearTimeout(timeoutId);\n\n    for (var _len = arguments.length, args = new Array(_len), _key = 0; _key < _len; _key++) {\n      args[_key] = arguments[_key];\n    }\n\n    timeoutId = setTimeout.apply(void 0, [fn, ms].concat(args));\n  };\n}\n\nfunction deepMerge(target) {\n  for (var _len = arguments.length, sources = new Array(_len > 1 ? _len - 1 : 0), _key = 1; _key < _len; _key++) {\n    sources[_key - 1] = arguments[_key];\n  }\n\n  if (!sources.length) return target;\n  var source = sources.shift();\n\n  if (isObject(target) && isObject(source)) {\n    // false negative\n    // eslint-disable-next-line no-unused-vars\n    for (var key in source) {\n      if (isObject(source[key])) {\n        var _Object$assign;\n\n        if (!target[key]) Object.assign(target, (_Object$assign = {}, _Object$assign[key] = {}, _Object$assign));\n        deepMerge(target[key], source[key]);\n      } else {\n        var _Object$assign2;\n\n        Object.assign(target, (_Object$assign2 = {}, _Object$assign2[key] = source[key], _Object$assign2));\n      }\n    }\n  }\n\n  return deepMerge.apply(void 0, [target].concat(sources));\n}\n\nfunction isNil(value) {\n  return value === null || value === undefined;\n}\n\nfunction defaultTo(defaultValue) {\n  return function (value) {\n    return isNil(value) ? defaultValue : value;\n  };\n}\n\nfunction drop(count, arr) {\n  return arr.slice(count);\n}\n\nfunction dropRight(count, arr) {\n  return arr.slice(0, -count);\n}\n\nfunction ensureArray(maybeArr) {\n  return isArray(maybeArr) ? maybeArr : [maybeArr];\n}\n\nfunction entries(obj) {\n  return Object.keys(obj).map(function (key) {\n    return [key, obj[key]];\n  });\n}\n\nfunction find(predicate, arr) {\n  for (var index = 0; index < arr.length; index++) {\n    var element = arr[index];\n\n    if (predicate(element)) {\n      return element;\n    }\n  }\n}\n\nfunction findIndex(predicate, arr) {\n  for (var index = 0; index < arr.length; index++) {\n    if (predicate(arr[index])) {\n      return index;\n    }\n  }\n\n  return -1;\n}\n\nfunction findKey(predicate, obj) {\n  return find(function (key) {\n    return predicate(obj[key]);\n  }, Object.keys(obj));\n}\n\nfunction findLast(predicate, arr) {\n  for (var index = arr.length - 1; index >= 0; index--) {\n    if (predicate(arr[index])) {\n      return arr[index];\n    }\n  }\n}\n\nfunction findLastIndexFrom(predicate, startIndex, arr) {\n  for (var index = startIndex; index >= 0; index--) {\n    if (predicate(arr[index])) {\n      return index;\n    }\n  }\n\n  return -1;\n}\n\nfunction findLastIndex(predicate, arr) {\n  return findLastIndexFrom(predicate, arr.length - 1, arr);\n}\n\nfunction filledArray(length, value) {\n  var arr = [];\n\n  while (length--) {\n    arr.push(value);\n  }\n\n  return arr;\n}\n\nfunction identity(value) {\n  return value;\n}\n\nfunction flatten(arr) {\n  return flatMap(identity, arr);\n}\n\nfunction forOwn(callback, obj) {\n  return Object.keys(obj).forEach(function (key) {\n    callback(obj[key], key);\n  });\n}\n\nfunction fromPairs(pairs) {\n  return pairs.reduce(function (obj, _ref) {\n    var key = _ref[0],\n        value = _ref[1];\n    obj[key] = value;\n    return obj;\n  }, {});\n}\n\nfunction generateRandomId() {\n  return Math.random().toString(36).substring(2);\n}\n\nfunction generateUniqueId(map) {\n  var id = generateRandomId();\n  return hasOwn(id, map) ? generateUniqueId(map) : id;\n} // based on https://github.com/developit/dlv/blob/d7ec976d12665f1c25dec2acf955dfc2e8757a9c/index.js\n\n\nfunction get(propPath, obj) {\n  var arrPath = typeof propPath === 'string' ? propPath.split('.') : propPath;\n  var pathPartIndex = 0;\n  var result = obj;\n\n  while (result && pathPartIndex < arrPath.length) {\n    result = result[arrPath[pathPartIndex++]];\n  }\n\n  return result;\n}\n\nfunction getOr(defaultValue, prop, obj) {\n  var propValue = get(prop, obj);\n  return propValue !== undefined && propValue !== null ? propValue : defaultValue;\n}\n\nfunction groupBy(mapper, collection) {\n  return Object.keys(collection).reduce(function (grouped, key) {\n    var element = collection[key];\n    var groupKey = mapper(element);\n    grouped[groupKey] = grouped[groupKey] || [];\n    grouped[groupKey].push(element);\n    return grouped;\n  }, {});\n}\n\nfunction groupKeys(mapper, obj) {\n  return Object.keys(obj).reduce(function (grouped, key) {\n    var groupKey = mapper(key);\n    grouped[groupKey] = grouped[groupKey] || {};\n    grouped[groupKey][key] = obj[key];\n    return grouped;\n  }, {});\n}\n\nfunction includes(value, arrOrStr) {\n  return arrOrStr.indexOf(value) !== -1;\n}\n\nfunction isEmpty(collection) {\n  return (isArray(collection) ? collection : Object.keys(collection)).length === 0;\n}\n\nfunction isFalsy(value) {\n  return !value;\n}\n\nfunction isTruthy(value) {\n  return !!value;\n}\n\nvar isPromise = function isPromise(promise) {\n  return !!promise && typeof promise.then === 'function';\n};\n\nfunction keyBy(prop, arr) {\n  return arr.reduce(function (acc, el) {\n    acc[el[prop]] = el;\n    return acc;\n  }, {});\n}\n\nfunction keys(obj) {\n  var keysArray = []; // eslint-disable-next-line @typescript-eslint/no-unused-vars\n\n  for (var property in obj) {\n    if (Object.prototype.hasOwnProperty.call(obj, property)) {\n      keysArray.push(property);\n    }\n  }\n\n  return keysArray;\n} // TODO: this  should return `T | undefined` to match native behavior\n\n\nfunction last(arr) {\n  return arr.length > 0 ? arr[arr.length - 1] : null;\n}\n\nfunction mapKeys(mapper, obj) {\n  return Object.keys(obj).reduce(function (acc, key) {\n    acc[mapper(key)] = obj[key];\n    return acc;\n  }, {});\n}\n\nfunction mapValuesIndexed(iteratee, obj) {\n  return Object.keys(obj).reduce(function (acc, key) {\n    acc[key] = iteratee(obj[key], key);\n    return acc;\n  }, {});\n}\n\nfunction merge(objA, objB) {\n  if (isEmpty(objB)) {\n    return objA;\n  }\n\n  var result = {};\n  forOwn(function (value, key) {\n    if (hasOwn(key, objB)) {\n      if (isObject(objA[key]) && isObject(objB[key])) {\n        result[key] = merge(objA[key], objB[key]);\n      } else if (isArray(objA[key]) && isArray(objB[key])) {\n        var length = Math.max(objA[key].length, objB[key].length);\n        result[key] = new Array(length);\n\n        for (var i = 0; i < length; i++) {\n          if (i in objB[key]) {\n            result[key][i] = objB[key][i];\n          } else if (i in objA[key]) {\n            result[key][i] = objA[key][i];\n          }\n        }\n      } else {\n        result[key] = objB[key];\n      }\n    } else {\n      result[key] = objA[key];\n    }\n  }, objA);\n  forOwn(function (value, key) {\n    if (!hasOwn(key, result)) {\n      result[key] = objB[key];\n    }\n  }, objB);\n  return result;\n}\n\nfunction mergeAll(objs) {\n  if (objs.length === 0) {\n    return {};\n  }\n\n  var first = objs[0],\n      rest = objs.slice(1);\n  return rest.reduce(function (merged, obj) {\n    return merge(merged, obj);\n  }, first);\n}\n\nfunction memoizeWith(keyResolver, func) {\n  var cache = {};\n  return function () {\n    var key = keyResolver.apply(void 0, arguments);\n\n    if (hasOwn(key, cache)) {\n      return cache[key];\n    }\n\n    var value = func.apply(void 0, arguments);\n    cache[key] = value;\n    return value;\n  };\n} // TODO: technically this should accept AnyFunction but it doesn't type check currently with that for some reason\n\n\nfunction memoize(func) {\n  return memoizeWith(identity, func);\n}\n\nfunction memoizeOne(fn) {\n  var called = false;\n  var memoized;\n  var cacheKey;\n  return function () {\n    if (called && (arguments.length <= 0 ? undefined : arguments[0]) === cacheKey) {\n      return memoized;\n    }\n\n    called = true;\n    cacheKey = arguments.length <= 0 ? undefined : arguments[0];\n    memoized = fn.apply(void 0, arguments);\n    return memoized;\n  };\n}\n\nfunction noop() {}\n\nfunction values(obj) {\n  return Object.keys(obj).map(function (key) {\n    return obj[key];\n  });\n}\n\nfunction numericSortBy(propOrMapper, collection) {\n  var mapper = typeof propOrMapper === 'function' ? propOrMapper : function (element) {\n    return get(propOrMapper, element);\n  };\n  return (isArray(collection) ? [].concat(collection) : values(collection)).sort(function (elementA, elementB) {\n    return mapper(elementA) - mapper(elementB);\n  });\n}\n\nfunction omitByIndexed(predicate, obj) {\n  return Object.keys(obj).reduce(function (acc, key) {\n    if (!predicate(obj[key], key)) {\n      acc[key] = obj[key];\n    }\n\n    return acc;\n  }, {});\n}\n\nfunction omit(keys, obj) {\n  return omitByIndexed(function (_, key) {\n    return keys.indexOf(key) !== -1;\n  }, obj);\n}\n\nfunction omitBy(predicate, obj) {\n  return Object.keys(obj).reduce(function (acc, key) {\n    if (!predicate(obj[key])) {\n      acc[key] = obj[key];\n    }\n\n    return acc;\n  }, {});\n}\n\nfunction once(fn) {\n  var called = false;\n  var result;\n  return function () {\n    if (called) {\n      return result;\n    }\n\n    called = true;\n    return result = fn.apply(void 0, arguments);\n  };\n}\n\nfunction over(fns) {\n  return function () {\n    for (var _len = arguments.length, args = new Array(_len), _key = 0; _key < _len; _key++) {\n      args[_key] = arguments[_key];\n    }\n\n    return fns.map(function (fn) {\n      return fn.apply(void 0, args);\n    });\n  };\n}\n\nfunction takeLast(count, arr) {\n  return arr.slice(-count);\n}\n\nfunction overArgs(fn, transformers) {\n  return function () {\n    for (var _len = arguments.length, args = new Array(_len), _key = 0; _key < _len; _key++) {\n      args[_key] = arguments[_key];\n    }\n\n    var transformed = transformers.map(function (transform, index) {\n      return transform(args[index]);\n    });\n    return args.length > transformed.length ? fn.apply(void 0, transformed.concat(takeLast(args.length - transformed.length, args))) : fn.apply(void 0, transformed);\n  };\n}\n\nfunction pair(a, b) {\n  return [a, b];\n}\n\nfunction partitionObject(predicate, obj) {\n  return Object.keys(obj).reduce(function (acc, key) {\n    acc[predicate(obj[key]) ? 0 : 1][key] = obj[key];\n    return acc;\n  }, [{}, {}]);\n}\n\nfunction pick(props, obj) {\n  return props.reduce(function (acc, prop) {\n    acc[prop] = obj[prop];\n    return acc;\n  }, {});\n}\n\nfunction pickBy(predicate, obj) {\n  return Object.keys(obj).reduce(function (acc, key) {\n    if (predicate(obj[key])) {\n      acc[key] = obj[key];\n    }\n\n    return acc;\n  }, {});\n}\n\nfunction pickByIndexed(predicate, obj) {\n  return Object.keys(obj).reduce(function (acc, key) {\n    if (predicate(obj[key], key)) {\n      acc[key] = obj[key];\n    }\n\n    return acc;\n  }, {});\n}\n\nfunction pickOwn(props, obj) {\n  return props.reduce(function (acc, prop) {\n    if (hasOwn(prop, obj)) {\n      acc[prop] = obj[prop];\n    }\n\n    return acc;\n  }, {});\n}\n\nfunction randomInt(min, max) {\n  return min + Math.floor(Math.random() * (max - min + 1));\n}\n\nfunction range(max) {\n  var arr = [];\n  var counter = 0;\n\n  while (counter <= max) {\n    arr.push(counter++);\n  }\n\n  return arr;\n}\n\nfunction reject(predicate, arr) {\n  return arr.filter(function (element) {\n    return !predicate(element);\n  });\n}\n\nfunction removeAt(index, arr) {\n  var copy = [].concat(arr);\n  copy.splice(index, 1);\n  return copy;\n}\n\nfunction _extends() {\n  _extends = Object.assign || function (target) {\n    for (var i = 1; i < arguments.length; i++) {\n      var source = arguments[i];\n\n      for (var key in source) {\n        if (Object.prototype.hasOwnProperty.call(source, key)) {\n          target[key] = source[key];\n        }\n      }\n    }\n\n    return target;\n  };\n\n  return _extends.apply(this, arguments);\n}\n\nfunction set(_keys, val, obj) {\n  var _extends2;\n\n  var keys = _keys.split ? _keys.split('.') : _keys;\n  var index = keys[0];\n  var finalVal = val;\n\n  if (keys.length > 1) {\n    // eslint-disable-next-line eqeqeq\n    var nextObj = obj != null && hasOwn(index, obj) ? obj[index] : {};\n    finalVal = set(keys.slice(1), val, nextObj);\n  }\n\n  return _extends({}, obj, (_extends2 = {}, _extends2[index] = finalVal, _extends2));\n} // https://github.com/reactjs/react-redux/blob/5d792a283554cff3d2f54fad1be1f79cbcab33fe/src/utils/shallowEqual.js\n\n\nfunction is(first, second) {\n  if (first === second) {\n    return first !== 0 || second !== 0 || 1 / first === 1 / second;\n  } // eslint-disable-next-line no-self-compare\n\n\n  return first !== first && second !== second;\n}\n\nfunction shallowEqual(objA, objB) {\n  if (is(objA, objB)) return true;\n\n  if (typeof objA !== 'object' || objA === null || typeof objB !== 'object' || objB === null) {\n    return false;\n  }\n\n  var keysA = Object.keys(objA);\n  var keysB = Object.keys(objB);\n  if (keysA.length !== keysB.length) return false;\n\n  for (var index = 0; index < keysA.length; index++) {\n    if (!hasOwn(keysA[index], objB) || !is(objA[keysA[index]], objB[keysA[index]])) {\n      return false;\n    }\n  }\n\n  return true;\n}\n\nfunction sign(value) {\n  if (typeof value !== 'number' || isNaN(value)) {\n    return NaN;\n  }\n\n  if (value === 0) {\n    return 0;\n  } // eslint-disable-next-line no-compare-neg-zero\n\n\n  if (value === -0) {\n    return -0;\n  }\n\n  return value > 0 ? 1 : -1;\n}\n\nfunction shuffle(arr) {\n  var copy = arr.slice();\n  var lastIndex = arr.length - 1;\n\n  for (var i = 0; i < arr.length; i++) {\n    var randomIndex = randomInt(i, lastIndex);\n    var randomValue = copy[randomIndex];\n    copy[randomIndex] = copy[i];\n    copy[i] = randomValue;\n  }\n\n  return copy;\n}\n\nfunction sliceDiff(slice, obj) {\n  var picked = pickByIndexed(function (value, key) {\n    return value !== obj[key];\n  }, slice);\n  return isEmpty(picked) ? null : picked;\n} // TODO: this could be written a lot better\n\n\nfunction snakeCase(str) {\n  var snakeCased = str.replace(/[A-Z]|([-_ ]+)/g, function (match) {\n    var code = match.charCodeAt(0);\n    var upperCased = code > 64 && code < 91;\n    return upperCased ? \"_\" + match.toLowerCase() : '_';\n  });\n  return snakeCased[0] === '_' ? snakeCased.substr(1) : snakeCased;\n}\n\nfunction someAreTruthy(arr) {\n  return arr.some(identity);\n}\n\nfunction splitAt(splitPoint, arrOrStr) {\n  return [arrOrStr.slice(0, splitPoint), arrOrStr.slice(splitPoint, arrOrStr.length)];\n}\n\nfunction splitRightWhenAccum(fn, acc, arr) {\n  var result = false;\n\n  for (var index = arr.length; index > 0; index--) {\n    var _fn = fn(arr[index - 1], acc);\n\n    result = _fn[0];\n    acc = _fn[1];\n\n    if (result) {\n      return splitAt(index - 1, arr);\n    }\n  }\n\n  return [[], arr];\n}\n\nfunction spread(fn) {\n  return function (args) {\n    return fn.apply(void 0, args);\n  };\n}\n\nfunction sum(numbers) {\n  return numbers.reduce(add, 0);\n}\n\nfunction take(count, arr) {\n  return arr.slice(0, count);\n}\n\nfunction takeRightWhileFrom(predicate, startIndex, arr) {\n  var endIndex = findLastIndexFrom(function (element) {\n    return !predicate(element);\n  }, startIndex, arr);\n  return endIndex === startIndex ? [] : arr.slice(endIndex + 1, startIndex + 1);\n}\n\nfunction takeRightWhile(predicate, arr) {\n  return takeRightWhileFrom(predicate, arr.length - 1, arr);\n}\n\nfunction throttle(ms, fn) {\n  var lastCall = Date.now() - 2 * ms;\n  var trailingId;\n\n  var invoke = function invoke() {\n    lastCall = Date.now();\n    fn.apply(void 0, arguments);\n  };\n\n  return function () {\n    var now = Date.now();\n\n    for (var _len = arguments.length, args = new Array(_len), _key = 0; _key < _len; _key++) {\n      args[_key] = arguments[_key];\n    }\n\n    if (now - lastCall >= ms) {\n      invoke.apply(void 0, args);\n      return;\n    }\n\n    clearTimeout(trailingId);\n    trailingId = setTimeout.apply(void 0, [invoke, lastCall - now + ms].concat(args));\n  };\n}\n\nfunction toArray(arrayLike) {\n  return Array.prototype.slice.call(arrayLike);\n}\n\nvar toFixedNumber = function toFixedNumber(num, digits) {\n  return Number(num.toFixed(digits));\n};\n\nvar toPairs = function toPairs(obj) {\n  return Object.keys(obj).map(function (key) {\n    return [key, obj[key]];\n  });\n};\n\nfunction trailingThrottle(ms, fn) {\n  var lastCall = Date.now() - 2 * ms;\n  var trailingId;\n\n  var invoke = function invoke() {\n    lastCall = Date.now();\n    return fn.apply(void 0, arguments);\n  };\n\n  return function () {\n    var now = Date.now();\n\n    if (now - lastCall >= ms) {\n      lastCall = Date.now();\n    }\n\n    clearTimeout(trailingId);\n\n    for (var _len = arguments.length, args = new Array(_len), _key = 0; _key < _len; _key++) {\n      args[_key] = arguments[_key];\n    }\n\n    trailingId = setTimeout.apply(void 0, [invoke, lastCall - now + ms].concat(args));\n  };\n}\n\nfunction leadingThrottle(ms, fn) {\n  var lastCall = 0;\n  return function () {\n    var now = Date.now();\n\n    if (now - lastCall >= ms) {\n      lastCall = Date.now();\n      fn.apply(void 0, arguments);\n    }\n  };\n}\n\nvar stringCompare = function stringCompare(strA, strB) {\n  if (strA === strB) {\n    return 0;\n  }\n\n  return strA < strB ? -1 : 1;\n};\n\nvar leadingWhiteSpace = /^\\s+/;\n\nfunction trimStart(str) {\n  return str.replace(leadingWhiteSpace, '');\n}\n\nvar trailingWhiteSpace = /\\s+$/;\n\nfunction trimEnd(str) {\n  return str.replace(trailingWhiteSpace, '');\n}\n\nfunction repeat(count, text) {\n  return Array(count + 1).join(text);\n}\n\nfunction uniqBy(iteratee, arr) {\n  // with polyfills this could be just: return Array.from(new Set(arr.map(iteratee)))\n  var seen = [];\n  return arr.filter(function (element) {\n    var key = iteratee(element);\n\n    if (seen.indexOf(key) === -1) {\n      seen.push(key);\n      return true;\n    }\n\n    return false;\n  });\n}\n\nfunction uniq(arr) {\n  return uniqBy(identity, arr);\n}\n\nfunction update(index, newElement, arr) {\n  return [].concat(arr.slice(0, index), [newElement], arr.slice(index + 1, arr.length));\n}\n\nfunction without(removed, arr) {\n  return arr.filter(function (element) {\n    return removed.indexOf(element) === -1;\n  });\n}\n\nfunction zipWith(zipper, arrayA, arrayB) {\n  return arrayA.map(function (elementA, index) {\n    return zipper(elementA, arrayB[index]);\n  });\n}\n\nfunction zip(arrayA, arrayB) {\n  return zipWith(pair, arrayA, arrayB);\n}\n\nexport { add, assign, camelCase, capitalizeFirstLetter, chain, cloneDeep, compact, compose, debounce, deepMerge, defaultTo, drop, dropRight, ensureArray, entries, filledArray, find, findIndex, findKey, findLast, findLastIndex, findLastIndexFrom, flatMap, flatten, forOwn, fromPairs, generateRandomId, generateUniqueId, get, getOr, groupBy, groupKeys, hasOwn, identity, includes, isArray, isEmpty, isFalsy, isNil, isObject, isPromise, isTruthy, keyBy, keys, last, leadingThrottle, mapKeys, mapValues, mapValuesIndexed, memoize, memoizeOne, memoizeWith, merge, mergeAll, noop, numericSortBy, omit, omitBy, omitByIndexed, once, over, overArgs, pair, partitionObject, pick, pickBy, pickByIndexed, pickOwn, randomInt, range, reject, removeAt, repeat, set, shallowEqual, shuffle, sign, sliceDiff, snakeCase, someAreTruthy, splitAt, splitRightWhenAccum, spread, stringCompare, sum, take, takeLast, takeRightWhile, takeRightWhileFrom, throttle, toArray, toFixedNumber, toPairs, trailingThrottle, trimEnd, trimStart, uniq, uniqBy, update, values, without, zip, zipWith };","function deferred() {\n  var def = {};\n  def.promise = new Promise(function (resolve, reject) {\n    def.resolve = resolve;\n    def.reject = reject;\n  });\n  return def;\n}\n\nexport default deferred;","import $$observable from 'symbol-observable';\n/**\n * These are private action types reserved by Redux.\n * For any unknown actions, you must return the current state.\n * If the current state is undefined, you must return the initial state.\n * Do not reference these action types directly in your code.\n */\n\nvar randomString = function randomString() {\n  return Math.random().toString(36).substring(7).split('').join('.');\n};\n\nvar ActionTypes = {\n  INIT: \"@@redux/INIT\" + randomString(),\n  REPLACE: \"@@redux/REPLACE\" + randomString(),\n  PROBE_UNKNOWN_ACTION: function PROBE_UNKNOWN_ACTION() {\n    return \"@@redux/PROBE_UNKNOWN_ACTION\" + randomString();\n  }\n};\n/**\n * @param {any} obj The object to inspect.\n * @returns {boolean} True if the argument appears to be a plain object.\n */\n\nfunction isPlainObject(obj) {\n  if (typeof obj !== 'object' || obj === null) return false;\n  var proto = obj;\n\n  while (Object.getPrototypeOf(proto) !== null) {\n    proto = Object.getPrototypeOf(proto);\n  }\n\n  return Object.getPrototypeOf(obj) === proto;\n}\n/**\n * Creates a Redux store that holds the state tree.\n * The only way to change the data in the store is to call `dispatch()` on it.\n *\n * There should only be a single store in your app. To specify how different\n * parts of the state tree respond to actions, you may combine several reducers\n * into a single reducer function by using `combineReducers`.\n *\n * @param {Function} reducer A function that returns the next state tree, given\n * the current state tree and the action to handle.\n *\n * @param {any} [preloadedState] The initial state. You may optionally specify it\n * to hydrate the state from the server in universal apps, or to restore a\n * previously serialized user session.\n * If you use `combineReducers` to produce the root reducer function, this must be\n * an object with the same shape as `combineReducers` keys.\n *\n * @param {Function} [enhancer] The store enhancer. You may optionally specify it\n * to enhance the store with third-party capabilities such as middleware,\n * time travel, persistence, etc. The only store enhancer that ships with Redux\n * is `applyMiddleware()`.\n *\n * @returns {Store} A Redux store that lets you read the state, dispatch actions\n * and subscribe to changes.\n */\n\n\nfunction createStore(reducer, preloadedState, enhancer) {\n  var _ref2;\n\n  if (typeof preloadedState === 'function' && typeof enhancer === 'function' || typeof enhancer === 'function' && typeof arguments[3] === 'function') {\n    throw new Error('It looks like you are passing several store enhancers to ' + 'createStore(). This is not supported. Instead, compose them ' + 'together to a single function.');\n  }\n\n  if (typeof preloadedState === 'function' && typeof enhancer === 'undefined') {\n    enhancer = preloadedState;\n    preloadedState = undefined;\n  }\n\n  if (typeof enhancer !== 'undefined') {\n    if (typeof enhancer !== 'function') {\n      throw new Error('Expected the enhancer to be a function.');\n    }\n\n    return enhancer(createStore)(reducer, preloadedState);\n  }\n\n  if (typeof reducer !== 'function') {\n    throw new Error('Expected the reducer to be a function.');\n  }\n\n  var currentReducer = reducer;\n  var currentState = preloadedState;\n  var currentListeners = [];\n  var nextListeners = currentListeners;\n  var isDispatching = false;\n  /**\n   * This makes a shallow copy of currentListeners so we can use\n   * nextListeners as a temporary list while dispatching.\n   *\n   * This prevents any bugs around consumers calling\n   * subscribe/unsubscribe in the middle of a dispatch.\n   */\n\n  function ensureCanMutateNextListeners() {\n    if (nextListeners === currentListeners) {\n      nextListeners = currentListeners.slice();\n    }\n  }\n  /**\n   * Reads the state tree managed by the store.\n   *\n   * @returns {any} The current state tree of your application.\n   */\n\n\n  function getState() {\n    if (isDispatching) {\n      throw new Error('You may not call store.getState() while the reducer is executing. ' + 'The reducer has already received the state as an argument. ' + 'Pass it down from the top reducer instead of reading it from the store.');\n    }\n\n    return currentState;\n  }\n  /**\n   * Adds a change listener. It will be called any time an action is dispatched,\n   * and some part of the state tree may potentially have changed. You may then\n   * call `getState()` to read the current state tree inside the callback.\n   *\n   * You may call `dispatch()` from a change listener, with the following\n   * caveats:\n   *\n   * 1. The subscriptions are snapshotted just before every `dispatch()` call.\n   * If you subscribe or unsubscribe while the listeners are being invoked, this\n   * will not have any effect on the `dispatch()` that is currently in progress.\n   * However, the next `dispatch()` call, whether nested or not, will use a more\n   * recent snapshot of the subscription list.\n   *\n   * 2. The listener should not expect to see all state changes, as the state\n   * might have been updated multiple times during a nested `dispatch()` before\n   * the listener is called. It is, however, guaranteed that all subscribers\n   * registered before the `dispatch()` started will be called with the latest\n   * state by the time it exits.\n   *\n   * @param {Function} listener A callback to be invoked on every dispatch.\n   * @returns {Function} A function to remove this change listener.\n   */\n\n\n  function subscribe(listener) {\n    if (typeof listener !== 'function') {\n      throw new Error('Expected the listener to be a function.');\n    }\n\n    if (isDispatching) {\n      throw new Error('You may not call store.subscribe() while the reducer is executing. ' + 'If you would like to be notified after the store has been updated, subscribe from a ' + 'component and invoke store.getState() in the callback to access the latest state. ' + 'See https://redux.js.org/api-reference/store#subscribelistener for more details.');\n    }\n\n    var isSubscribed = true;\n    ensureCanMutateNextListeners();\n    nextListeners.push(listener);\n    return function unsubscribe() {\n      if (!isSubscribed) {\n        return;\n      }\n\n      if (isDispatching) {\n        throw new Error('You may not unsubscribe from a store listener while the reducer is executing. ' + 'See https://redux.js.org/api-reference/store#subscribelistener for more details.');\n      }\n\n      isSubscribed = false;\n      ensureCanMutateNextListeners();\n      var index = nextListeners.indexOf(listener);\n      nextListeners.splice(index, 1);\n      currentListeners = null;\n    };\n  }\n  /**\n   * Dispatches an action. It is the only way to trigger a state change.\n   *\n   * The `reducer` function, used to create the store, will be called with the\n   * current state tree and the given `action`. Its return value will\n   * be considered the **next** state of the tree, and the change listeners\n   * will be notified.\n   *\n   * The base implementation only supports plain object actions. If you want to\n   * dispatch a Promise, an Observable, a thunk, or something else, you need to\n   * wrap your store creating function into the corresponding middleware. For\n   * example, see the documentation for the `redux-thunk` package. Even the\n   * middleware will eventually dispatch plain object actions using this method.\n   *\n   * @param {Object} action A plain object representing “what changed”. It is\n   * a good idea to keep actions serializable so you can record and replay user\n   * sessions, or use the time travelling `redux-devtools`. An action must have\n   * a `type` property which may not be `undefined`. It is a good idea to use\n   * string constants for action types.\n   *\n   * @returns {Object} For convenience, the same action object you dispatched.\n   *\n   * Note that, if you use a custom middleware, it may wrap `dispatch()` to\n   * return something else (for example, a Promise you can await).\n   */\n\n\n  function dispatch(action) {\n    if (!isPlainObject(action)) {\n      throw new Error('Actions must be plain objects. ' + 'Use custom middleware for async actions.');\n    }\n\n    if (typeof action.type === 'undefined') {\n      throw new Error('Actions may not have an undefined \"type\" property. ' + 'Have you misspelled a constant?');\n    }\n\n    if (isDispatching) {\n      throw new Error('Reducers may not dispatch actions.');\n    }\n\n    try {\n      isDispatching = true;\n      currentState = currentReducer(currentState, action);\n    } finally {\n      isDispatching = false;\n    }\n\n    var listeners = currentListeners = nextListeners;\n\n    for (var i = 0; i < listeners.length; i++) {\n      var listener = listeners[i];\n      listener();\n    }\n\n    return action;\n  }\n  /**\n   * Replaces the reducer currently used by the store to calculate the state.\n   *\n   * You might need this if your app implements code splitting and you want to\n   * load some of the reducers dynamically. You might also need this if you\n   * implement a hot reloading mechanism for Redux.\n   *\n   * @param {Function} nextReducer The reducer for the store to use instead.\n   * @returns {void}\n   */\n\n\n  function replaceReducer(nextReducer) {\n    if (typeof nextReducer !== 'function') {\n      throw new Error('Expected the nextReducer to be a function.');\n    }\n\n    currentReducer = nextReducer; // This action has a similiar effect to ActionTypes.INIT.\n    // Any reducers that existed in both the new and old rootReducer\n    // will receive the previous state. This effectively populates\n    // the new state tree with any relevant data from the old one.\n\n    dispatch({\n      type: ActionTypes.REPLACE\n    });\n  }\n  /**\n   * Interoperability point for observable/reactive libraries.\n   * @returns {observable} A minimal observable of state changes.\n   * For more information, see the observable proposal:\n   * https://github.com/tc39/proposal-observable\n   */\n\n\n  function observable() {\n    var _ref;\n\n    var outerSubscribe = subscribe;\n    return _ref = {\n      /**\n       * The minimal observable subscription method.\n       * @param {Object} observer Any object that can be used as an observer.\n       * The observer object should have a `next` method.\n       * @returns {subscription} An object with an `unsubscribe` method that can\n       * be used to unsubscribe the observable from the store, and prevent further\n       * emission of values from the observable.\n       */\n      subscribe: function subscribe(observer) {\n        if (typeof observer !== 'object' || observer === null) {\n          throw new TypeError('Expected the observer to be an object.');\n        }\n\n        function observeState() {\n          if (observer.next) {\n            observer.next(getState());\n          }\n        }\n\n        observeState();\n        var unsubscribe = outerSubscribe(observeState);\n        return {\n          unsubscribe: unsubscribe\n        };\n      }\n    }, _ref[$$observable] = function () {\n      return this;\n    }, _ref;\n  } // When a store is created, an \"INIT\" action is dispatched so that every\n  // reducer returns their initial state. This effectively populates\n  // the initial state tree.\n\n\n  dispatch({\n    type: ActionTypes.INIT\n  });\n  return _ref2 = {\n    dispatch: dispatch,\n    subscribe: subscribe,\n    getState: getState,\n    replaceReducer: replaceReducer\n  }, _ref2[$$observable] = observable, _ref2;\n}\n/**\n * Prints a warning in the console if it exists.\n *\n * @param {String} message The warning message.\n * @returns {void}\n */\n\n\nfunction warning(message) {\n  /* eslint-disable no-console */\n  if (typeof console !== 'undefined' && typeof console.error === 'function') {\n    console.error(message);\n  }\n  /* eslint-enable no-console */\n\n\n  try {\n    // This error was thrown as a convenience so that if you enable\n    // \"break on all exceptions\" in your console,\n    // it would pause the execution at this line.\n    throw new Error(message);\n  } catch (e) {} // eslint-disable-line no-empty\n\n}\n\nfunction getUndefinedStateErrorMessage(key, action) {\n  var actionType = action && action.type;\n  var actionDescription = actionType && \"action \\\"\" + String(actionType) + \"\\\"\" || 'an action';\n  return \"Given \" + actionDescription + \", reducer \\\"\" + key + \"\\\" returned undefined. \" + \"To ignore an action, you must explicitly return the previous state. \" + \"If you want this reducer to hold no value, you can return null instead of undefined.\";\n}\n\nfunction getUnexpectedStateShapeWarningMessage(inputState, reducers, action, unexpectedKeyCache) {\n  var reducerKeys = Object.keys(reducers);\n  var argumentName = action && action.type === ActionTypes.INIT ? 'preloadedState argument passed to createStore' : 'previous state received by the reducer';\n\n  if (reducerKeys.length === 0) {\n    return 'Store does not have a valid reducer. Make sure the argument passed ' + 'to combineReducers is an object whose values are reducers.';\n  }\n\n  if (!isPlainObject(inputState)) {\n    return \"The \" + argumentName + \" has unexpected type of \\\"\" + {}.toString.call(inputState).match(/\\s([a-z|A-Z]+)/)[1] + \"\\\". Expected argument to be an object with the following \" + (\"keys: \\\"\" + reducerKeys.join('\", \"') + \"\\\"\");\n  }\n\n  var unexpectedKeys = Object.keys(inputState).filter(function (key) {\n    return !reducers.hasOwnProperty(key) && !unexpectedKeyCache[key];\n  });\n  unexpectedKeys.forEach(function (key) {\n    unexpectedKeyCache[key] = true;\n  });\n  if (action && action.type === ActionTypes.REPLACE) return;\n\n  if (unexpectedKeys.length > 0) {\n    return \"Unexpected \" + (unexpectedKeys.length > 1 ? 'keys' : 'key') + \" \" + (\"\\\"\" + unexpectedKeys.join('\", \"') + \"\\\" found in \" + argumentName + \". \") + \"Expected to find one of the known reducer keys instead: \" + (\"\\\"\" + reducerKeys.join('\", \"') + \"\\\". Unexpected keys will be ignored.\");\n  }\n}\n\nfunction assertReducerShape(reducers) {\n  Object.keys(reducers).forEach(function (key) {\n    var reducer = reducers[key];\n    var initialState = reducer(undefined, {\n      type: ActionTypes.INIT\n    });\n\n    if (typeof initialState === 'undefined') {\n      throw new Error(\"Reducer \\\"\" + key + \"\\\" returned undefined during initialization. \" + \"If the state passed to the reducer is undefined, you must \" + \"explicitly return the initial state. The initial state may \" + \"not be undefined. If you don't want to set a value for this reducer, \" + \"you can use null instead of undefined.\");\n    }\n\n    if (typeof reducer(undefined, {\n      type: ActionTypes.PROBE_UNKNOWN_ACTION()\n    }) === 'undefined') {\n      throw new Error(\"Reducer \\\"\" + key + \"\\\" returned undefined when probed with a random type. \" + (\"Don't try to handle \" + ActionTypes.INIT + \" or other actions in \\\"redux/*\\\" \") + \"namespace. They are considered private. Instead, you must return the \" + \"current state for any unknown actions, unless it is undefined, \" + \"in which case you must return the initial state, regardless of the \" + \"action type. The initial state may not be undefined, but can be null.\");\n    }\n  });\n}\n/**\n * Turns an object whose values are different reducer functions, into a single\n * reducer function. It will call every child reducer, and gather their results\n * into a single state object, whose keys correspond to the keys of the passed\n * reducer functions.\n *\n * @param {Object} reducers An object whose values correspond to different\n * reducer functions that need to be combined into one. One handy way to obtain\n * it is to use ES6 `import * as reducers` syntax. The reducers may never return\n * undefined for any action. Instead, they should return their initial state\n * if the state passed to them was undefined, and the current state for any\n * unrecognized action.\n *\n * @returns {Function} A reducer function that invokes every reducer inside the\n * passed object, and builds a state object with the same shape.\n */\n\n\nfunction combineReducers(reducers) {\n  var reducerKeys = Object.keys(reducers);\n  var finalReducers = {};\n\n  for (var i = 0; i < reducerKeys.length; i++) {\n    var key = reducerKeys[i];\n\n    if (process.env.NODE_ENV !== 'production') {\n      if (typeof reducers[key] === 'undefined') {\n        warning(\"No reducer provided for key \\\"\" + key + \"\\\"\");\n      }\n    }\n\n    if (typeof reducers[key] === 'function') {\n      finalReducers[key] = reducers[key];\n    }\n  }\n\n  var finalReducerKeys = Object.keys(finalReducers); // This is used to make sure we don't warn about the same\n  // keys multiple times.\n\n  var unexpectedKeyCache;\n\n  if (process.env.NODE_ENV !== 'production') {\n    unexpectedKeyCache = {};\n  }\n\n  var shapeAssertionError;\n\n  try {\n    assertReducerShape(finalReducers);\n  } catch (e) {\n    shapeAssertionError = e;\n  }\n\n  return function combination(state, action) {\n    if (state === void 0) {\n      state = {};\n    }\n\n    if (shapeAssertionError) {\n      throw shapeAssertionError;\n    }\n\n    if (process.env.NODE_ENV !== 'production') {\n      var warningMessage = getUnexpectedStateShapeWarningMessage(state, finalReducers, action, unexpectedKeyCache);\n\n      if (warningMessage) {\n        warning(warningMessage);\n      }\n    }\n\n    var hasChanged = false;\n    var nextState = {};\n\n    for (var _i = 0; _i < finalReducerKeys.length; _i++) {\n      var _key = finalReducerKeys[_i];\n      var reducer = finalReducers[_key];\n      var previousStateForKey = state[_key];\n      var nextStateForKey = reducer(previousStateForKey, action);\n\n      if (typeof nextStateForKey === 'undefined') {\n        var errorMessage = getUndefinedStateErrorMessage(_key, action);\n        throw new Error(errorMessage);\n      }\n\n      nextState[_key] = nextStateForKey;\n      hasChanged = hasChanged || nextStateForKey !== previousStateForKey;\n    }\n\n    hasChanged = hasChanged || finalReducerKeys.length !== Object.keys(state).length;\n    return hasChanged ? nextState : state;\n  };\n}\n\nfunction bindActionCreator(actionCreator, dispatch) {\n  return function () {\n    return dispatch(actionCreator.apply(this, arguments));\n  };\n}\n/**\n * Turns an object whose values are action creators, into an object with the\n * same keys, but with every function wrapped into a `dispatch` call so they\n * may be invoked directly. This is just a convenience method, as you can call\n * `store.dispatch(MyActionCreators.doSomething())` yourself just fine.\n *\n * For convenience, you can also pass an action creator as the first argument,\n * and get a dispatch wrapped function in return.\n *\n * @param {Function|Object} actionCreators An object whose values are action\n * creator functions. One handy way to obtain it is to use ES6 `import * as`\n * syntax. You may also pass a single function.\n *\n * @param {Function} dispatch The `dispatch` function available on your Redux\n * store.\n *\n * @returns {Function|Object} The object mimicking the original object, but with\n * every action creator wrapped into the `dispatch` call. If you passed a\n * function as `actionCreators`, the return value will also be a single\n * function.\n */\n\n\nfunction bindActionCreators(actionCreators, dispatch) {\n  if (typeof actionCreators === 'function') {\n    return bindActionCreator(actionCreators, dispatch);\n  }\n\n  if (typeof actionCreators !== 'object' || actionCreators === null) {\n    throw new Error(\"bindActionCreators expected an object or a function, instead received \" + (actionCreators === null ? 'null' : typeof actionCreators) + \". \" + \"Did you write \\\"import ActionCreators from\\\" instead of \\\"import * as ActionCreators from\\\"?\");\n  }\n\n  var boundActionCreators = {};\n\n  for (var key in actionCreators) {\n    var actionCreator = actionCreators[key];\n\n    if (typeof actionCreator === 'function') {\n      boundActionCreators[key] = bindActionCreator(actionCreator, dispatch);\n    }\n  }\n\n  return boundActionCreators;\n}\n\nfunction _defineProperty(obj, key, value) {\n  if (key in obj) {\n    Object.defineProperty(obj, key, {\n      value: value,\n      enumerable: true,\n      configurable: true,\n      writable: true\n    });\n  } else {\n    obj[key] = value;\n  }\n\n  return obj;\n}\n\nfunction ownKeys(object, enumerableOnly) {\n  var keys = Object.keys(object);\n\n  if (Object.getOwnPropertySymbols) {\n    keys.push.apply(keys, Object.getOwnPropertySymbols(object));\n  }\n\n  if (enumerableOnly) keys = keys.filter(function (sym) {\n    return Object.getOwnPropertyDescriptor(object, sym).enumerable;\n  });\n  return keys;\n}\n\nfunction _objectSpread2(target) {\n  for (var i = 1; i < arguments.length; i++) {\n    var source = arguments[i] != null ? arguments[i] : {};\n\n    if (i % 2) {\n      ownKeys(source, true).forEach(function (key) {\n        _defineProperty(target, key, source[key]);\n      });\n    } else if (Object.getOwnPropertyDescriptors) {\n      Object.defineProperties(target, Object.getOwnPropertyDescriptors(source));\n    } else {\n      ownKeys(source).forEach(function (key) {\n        Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key));\n      });\n    }\n  }\n\n  return target;\n}\n/**\n * Composes single-argument functions from right to left. The rightmost\n * function can take multiple arguments as it provides the signature for\n * the resulting composite function.\n *\n * @param {...Function} funcs The functions to compose.\n * @returns {Function} A function obtained by composing the argument functions\n * from right to left. For example, compose(f, g, h) is identical to doing\n * (...args) => f(g(h(...args))).\n */\n\n\nfunction compose() {\n  for (var _len = arguments.length, funcs = new Array(_len), _key = 0; _key < _len; _key++) {\n    funcs[_key] = arguments[_key];\n  }\n\n  if (funcs.length === 0) {\n    return function (arg) {\n      return arg;\n    };\n  }\n\n  if (funcs.length === 1) {\n    return funcs[0];\n  }\n\n  return funcs.reduce(function (a, b) {\n    return function () {\n      return a(b.apply(void 0, arguments));\n    };\n  });\n}\n/**\n * Creates a store enhancer that applies middleware to the dispatch method\n * of the Redux store. This is handy for a variety of tasks, such as expressing\n * asynchronous actions in a concise manner, or logging every action payload.\n *\n * See `redux-thunk` package as an example of the Redux middleware.\n *\n * Because middleware is potentially asynchronous, this should be the first\n * store enhancer in the composition chain.\n *\n * Note that each middleware will be given the `dispatch` and `getState` functions\n * as named arguments.\n *\n * @param {...Function} middlewares The middleware chain to be applied.\n * @returns {Function} A store enhancer applying the middleware.\n */\n\n\nfunction applyMiddleware() {\n  for (var _len = arguments.length, middlewares = new Array(_len), _key = 0; _key < _len; _key++) {\n    middlewares[_key] = arguments[_key];\n  }\n\n  return function (createStore) {\n    return function () {\n      var store = createStore.apply(void 0, arguments);\n\n      var _dispatch = function dispatch() {\n        throw new Error('Dispatching while constructing your middleware is not allowed. ' + 'Other middleware would not be applied to this dispatch.');\n      };\n\n      var middlewareAPI = {\n        getState: store.getState,\n        dispatch: function dispatch() {\n          return _dispatch.apply(void 0, arguments);\n        }\n      };\n      var chain = middlewares.map(function (middleware) {\n        return middleware(middlewareAPI);\n      });\n      _dispatch = compose.apply(void 0, chain)(store.dispatch);\n      return _objectSpread2({}, store, {\n        dispatch: _dispatch\n      });\n    };\n  };\n}\n/*\n * This is a dummy function to check if the function name has been altered by minification.\n * If the function has been minified and NODE_ENV !== 'production', warn the user.\n */\n\n\nfunction isCrushed() {}\n\nif (process.env.NODE_ENV !== 'production' && typeof isCrushed.name === 'string' && isCrushed.name !== 'isCrushed') {\n  warning('You are currently using minified code outside of NODE_ENV === \"production\". ' + 'This means that you are running a slower development build of Redux. ' + 'You can use loose-envify (https://github.com/zertosh/loose-envify) for browserify ' + 'or setting mode to production in webpack (https://webpack.js.org/concepts/mode/) ' + 'to ensure you have the correct code for your production build.');\n}\n\nexport { ActionTypes as __DO_NOT_USE__ActionTypes, applyMiddleware, bindActionCreators, combineReducers, compose, createStore };","export default (function () {\n  var handlers = [];\n\n  var sideEffectsMiddleware = function sideEffectsMiddleware(store) {\n    return function (next) {\n      return function (action) {\n        var result = next(action);\n        handlers.forEach(function (handler) {\n          handler(action, store);\n        });\n        return result;\n      };\n    };\n  };\n\n  sideEffectsMiddleware.add = function (handler) {\n    handlers.push(handler);\n  };\n\n  return sideEffectsMiddleware;\n});","var testKey = '__test_storage_support__';\nexport var testStorageSupport = function testStorageSupport() {\n  var type = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : 'local';\n\n  try {\n    var storage = window[type + 'Storage'];\n    storage.setItem(testKey, true);\n    storage.getItem(testKey);\n    storage.removeItem(testKey);\n    return true;\n  } catch (err) {\n    return false;\n  }\n};\nexport var createStorage = function createStorage() {\n  var memoryStorage = Object.defineProperties({}, {\n    getItem: {\n      value: function value(key) {\n        return memoryStorage[key] || null;\n      }\n    },\n    setItem: {\n      value: function value(key, _value) {\n        try {\n          memoryStorage[key] = String(_value);\n        } catch (err) {}\n      }\n    },\n    removeItem: {\n      value: function value(key) {\n        delete memoryStorage[key];\n      }\n    },\n    clear: {\n      value: function value() {\n        Object.keys(memoryStorage).forEach(memoryStorage.removeItem);\n      }\n    },\n    key: {\n      value: function value(index) {\n        return Object.keys(memoryStorage)[index] || null;\n      }\n    },\n    length: {\n      get: function get() {\n        return Object.keys(memoryStorage).length;\n      }\n    }\n  });\n  return memoryStorage;\n};\nexport default /*#__PURE__*/createStorage();","import memoryStorage, { testStorageSupport } from 'memory-web-storage';\nvar storage = testStorageSupport() ? window.localStorage : memoryStorage;\nvar index = {\n  setItem: function setItem(key, data) {\n    return new Promise(function (resolve) {\n      return resolve(storage.setItem(key, data));\n    });\n  },\n  getItem: function getItem(key) {\n    return new Promise(function (resolve) {\n      return resolve(storage.getItem(key));\n    });\n  },\n  removeItem: function removeItem(key) {\n    return new Promise(function (resolve) {\n      return resolve(storage.removeItem(key));\n    });\n  }\n};\nexport default index;","var index = function index(fn) {\n  return new Promise(function (resolve) {\n    resolve(fn());\n  });\n};\n\nexport default index;","import { toPairs, fromPairs } from '@livechat/data-utils';\n\nvar buildQueryString = function buildQueryString(obj) {\n  return toPairs(obj).map(function (pair) {\n    return pair.map(encodeURIComponent).join('=');\n  }).join('&');\n};\n\nvar decodeQueryString = function decodeQueryString(query) {\n  var pairs = query.split('&').map(function (pair) {\n    return pair.split('=').map(function (value) {\n      return decodeURIComponent(value.replace('+', '%20'));\n    });\n  });\n  var decoded = fromPairs(pairs);\n  return decoded;\n};\n\nvar hostnameRegexp = /(?:[^:]+:\\/\\/)?([^/\\s]+)/;\n\nfunction getHostname(url) {\n  var hostnameMatch = url.match(hostnameRegexp);\n  return hostnameMatch && hostnameMatch[1];\n}\n\nvar originRegexp = /[^:]+:\\/\\/[^(/|?)\\s]+/;\n\nvar getOrigin = function getOrigin(url) {\n  var domain = url.match(originRegexp);\n  return domain && domain[0];\n};\n\nvar searchRegexp = /.*?\\?([^#]+)/;\n\nvar getSearch = function getSearch(url) {\n  var match = url.match(searchRegexp);\n  return match ? \"?\" + match[1] : '';\n};\n\nvar trimSearch = function trimSearch(search) {\n  return search.replace(/^\\?/, '');\n};\n\nvar getQueryParams = function getQueryParams(url) {\n  var search = trimSearch(getSearch(url));\n  return decodeQueryString(search ? search : url);\n};\n\nvar getQueryParam = function getQueryParam(name, url) {\n  return getQueryParams(url)[name];\n};\n\nvar pathnameRegexp = /^(?:https?:)?\\/\\/[^/]+\\/([^?#]+)/;\n\nvar getPathname = function getPathname(url) {\n  var pathname = url.match(pathnameRegexp);\n  return \"/\" + (pathname && pathname[1] || '');\n}; // URL can contain leading C0 control or \\u0020 SPACE,\n// and any newline or tab are filtered out as if they're not part of the URL.\n// https://url.spec.whatwg.org/#url-parsing\n// Tab or newline are defined as \\r\\n\\t:\n// https://infra.spec.whatwg.org/#ascii-tab-or-newline\n// A C0 control is a code point in the range \\u0000 NULL to \\u001F\n// INFORMATION SEPARATOR ONE, inclusive:\n// https://infra.spec.whatwg.org/#c0-control-or-space\n\n\nvar intersperseWithTabOrNewline = function intersperseWithTabOrNewline(str) {\n  return str.replace(/\\w/g, '$&[\\\\r\\\\n\\\\t]*');\n};\n\nvar unsafeProtocol = new RegExp(\"^[\\0-\\x1F]*(\" + intersperseWithTabOrNewline('javascript') + \"|\" + intersperseWithTabOrNewline('data') + \"):\", 'i'); // would be better to whitelist things\n// but people might paste in protocolless URLs\n// and we would filter them out\n\nvar hasUnsafeProtocol = function hasUnsafeProtocol(url) {\n  return unsafeProtocol.test(url);\n};\n\nvar protocolRegexp = /^((http(s)?:)?\\/\\/)/;\n\nvar removeProtocol = function removeProtocol(url) {\n  return url.replace(protocolRegexp, '');\n};\n\nvar protocolRegexp$1 = /^((http(s)?:)?\\/\\/)/;\n\nvar getProtocol = function getProtocol(url) {\n  var match = url.match(protocolRegexp$1);\n  return match ? match[2] : null;\n};\n\nexport { buildQueryString, decodeQueryString, getHostname, getOrigin, getPathname, getProtocol, getQueryParam, getQueryParams, getSearch, hasUnsafeProtocol, removeProtocol, trimSearch };","import _mitt from 'mitt';\n\nfunction _extends() {\n  _extends = Object.assign || function (target) {\n    for (var i = 1; i < arguments.length; i++) {\n      var source = arguments[i];\n\n      for (var key in source) {\n        if (Object.prototype.hasOwnProperty.call(source, key)) {\n          target[key] = source[key];\n        }\n      }\n    }\n\n    return target;\n  };\n\n  return _extends.apply(this, arguments);\n}\n\nvar mitt = _mitt; // Our wrapper over `mitt` starts here\n\nvar createMitt = function createMitt() {\n  var eventsMap = Object.create(null);\n  var instance = mitt(eventsMap);\n\n  var off = function off(type, handler) {\n    if (!type) {\n      Object.keys(eventsMap).forEach(function (key) {\n        delete eventsMap[key];\n      });\n      return;\n    }\n\n    instance.off(type, handler);\n  };\n\n  var once = function once(type, handler) {\n    // for '*' type handler is invoked with 2 arguments - type, evt\n    instance.on(type, function onceHandler(data, maybeSecondArg) {\n      instance.off(type, onceHandler);\n      handler(data, maybeSecondArg);\n    });\n  };\n\n  return _extends({}, instance, {\n    off: off,\n    once: once\n  });\n};\n\nexport default createMitt;","import SockJS from 'sockjs-client';\nimport mitt from '@livechat/mitt';\nimport { buildQueryString } from '@livechat/url-utils';\n\nvar backo = function backo(_ref) {\n  var _ref$min = _ref.min,\n      min = _ref$min === void 0 ? 1000 : _ref$min,\n      _ref$max = _ref.max,\n      max = _ref$max === void 0 ? 5000 : _ref$max,\n      _ref$jitter = _ref.jitter,\n      jitter = _ref$jitter === void 0 ? 0.5 : _ref$jitter;\n  var attempts = 0;\n  return {\n    duration: function duration() {\n      var ms = min * Math.pow(2, attempts++);\n\n      if (jitter) {\n        var rand = Math.random();\n        var deviation = Math.floor(rand * jitter * ms);\n        ms = (Math.floor(rand * 10) & 1) == 0 ? ms - deviation : ms + deviation;\n      }\n\n      return Math.min(ms, max) | 0;\n    },\n    reset: function reset() {\n      attempts = 0;\n    }\n  };\n}; // based on WebSocket's readyState - https://www.w3.org/TR/websockets/#the-websocket-interface\n\n\nvar CONNECTING = 0;\nvar OPEN = 1;\nvar CLOSED = 3;\n\nvar createSockJSManager = function createSockJSManager(url, _temp) {\n  var _ref = _temp === void 0 ? {} : _temp,\n      query = _ref.query,\n      _ref$transports = _ref.transports,\n      transports = _ref$transports === void 0 ? ['websocket', 'xhr-polling'] : _ref$transports;\n\n  var finalUrl = \"\" + url + (!query ? '' : '?' + buildQueryString(query));\n  var emitter = mitt();\n  var backoff = backo({\n    min: 1000,\n    max: 5000,\n    jitter: 0.5\n  });\n  var state = CLOSED;\n  var reconnectTimer;\n  var socket = null;\n\n  var openListener = function openListener() {\n    state = OPEN;\n    backoff.reset();\n    emitter.emit('connect');\n  };\n\n  var closeListener = function closeListener() {\n    state = CLOSED;\n    socket = null;\n    emitter.emit('disconnect'); // eslint-disable-next-line no-use-before-define\n\n    reconnect();\n  };\n\n  var messageListener = function messageListener(_ref2) {\n    var data = _ref2.data;\n    emitter.emit(\"message\", data);\n  };\n\n  var heartbeatListener = function heartbeatListener() {\n    emitter.emit('heartbeat');\n  };\n\n  var addEventListeners = function addEventListeners(instance) {\n    instance.addEventListener('open', openListener);\n    instance.addEventListener('close', closeListener);\n    instance.addEventListener('message', messageListener);\n    instance.addEventListener('heartbeat', heartbeatListener);\n  };\n\n  var removeEventListeners = function removeEventListeners(instance) {\n    instance.removeEventListener('open', openListener);\n    instance.removeEventListener('close', closeListener);\n    instance.removeEventListener('message', messageListener);\n    instance.removeEventListener('heartbeat', heartbeatListener);\n  };\n\n  var close = function close() {\n    state = CLOSED;\n\n    if (!socket) {\n      return;\n    }\n\n    removeEventListeners(socket);\n    socket.close();\n    socket = null;\n  };\n\n  var connect = function connect() {\n    state = CONNECTING;\n    socket = new SockJS(finalUrl, undefined, {\n      transports: transports\n    });\n    addEventListeners(socket);\n  };\n\n  var reconnect = function reconnect(delay) {\n    if (delay === void 0) {\n      delay = backoff.duration();\n    }\n\n    clearTimeout(reconnectTimer);\n\n    if (delay === 0) {\n      connect();\n      return;\n    }\n\n    reconnectTimer = setTimeout(connect, delay);\n  };\n\n  var managedSocket = {\n    connect: function (_connect) {\n      function connect() {\n        return _connect.apply(this, arguments);\n      }\n\n      connect.toString = function () {\n        return _connect.toString();\n      };\n\n      return connect;\n    }(function () {\n      if (state !== CLOSED) {\n        throw new Error('Socket is already open or connecting.');\n      }\n\n      clearTimeout(reconnectTimer);\n      connect();\n    }),\n    destroy: function destroy() {\n      managedSocket.off();\n      managedSocket.disconnect();\n    },\n    disconnect: function disconnect() {\n      state = CLOSED;\n      clearTimeout(reconnectTimer);\n      close();\n    },\n    reconnect: function (_reconnect) {\n      function reconnect(_x) {\n        return _reconnect.apply(this, arguments);\n      }\n\n      reconnect.toString = function () {\n        return _reconnect.toString();\n      };\n\n      return reconnect;\n    }(function (delay) {\n      close();\n      reconnect(delay);\n    }),\n    emit: function emit(data) {\n      if (state !== OPEN) {\n        throw new Error('Socket is not connected.');\n      } // if we are connected we can be sure that socket is defined\n\n\n      socket.send(data);\n    },\n    getReadyState: function getReadyState() {\n      return state;\n    },\n    on: emitter.on,\n    off: emitter.off\n  };\n  return managedSocket;\n};\n\nexport default createSockJSManager;","import { noop, generateRandomId } from '@livechat/data-utils';\nimport createDeferred from '@livechat/deferred';\nimport createSockJSManager from '@livechat/sockjs-manager';\nimport mitt from '@livechat/mitt';\n\nfunction _extends() {\n  _extends = Object.assign || function (target) {\n    for (var i = 1; i < arguments.length; i++) {\n      var source = arguments[i];\n\n      for (var key in source) {\n        if (Object.prototype.hasOwnProperty.call(source, key)) {\n          target[key] = source[key];\n        }\n      }\n    }\n\n    return target;\n  };\n\n  return _extends.apply(this, arguments);\n}\n\nvar createConnectionHero = function createConnectionHero() {\n  var resolve = noop;\n  var timer;\n  return {\n    cancel: function cancel() {\n      clearTimeout(timer);\n      resolve = noop;\n    },\n    check: function check() {\n      var deferred = createDeferred();\n      resolve = deferred.resolve;\n      timer = setTimeout(function () {\n        var err = new Error('Timeout.');\n        err.code = 'TIMEOUT';\n        deferred.reject(err);\n      }, 2000);\n      return deferred.promise;\n    },\n    resolve: function (_resolve) {\n      function resolve() {\n        return _resolve.apply(this, arguments);\n      }\n\n      resolve.toString = function () {\n        return _resolve.toString();\n      };\n\n      return resolve;\n    }(function () {\n      clearTimeout(timer);\n      resolve();\n    })\n  };\n}; // based on server heartbeat interval - which is 25s\n\n\nvar DEFAULT_RESCHEDULE_PING_TIMEOUT = 30 * 1000; // this is not quite type-safe (it doesn't constraint soure & sink types that much)\n// it's generic and really simple though, so we don't waste time to make this completely type-safe\n\nvar forwardEvents = function forwardEvents(source, sink, types) {\n  types.forEach(function (type) {\n    source.on(type, function (data) {\n      sink.emit(type, data);\n    });\n  });\n};\n\nvar createPlatformClient = function createPlatformClient(url, _temp) {\n  var _ref = _temp === void 0 ? {} : _temp,\n      _ref$query = _ref.query,\n      query = _ref$query === void 0 ? {} : _ref$query,\n      _ref$rescheduleTimeou = _ref.rescheduleTimeout,\n      rescheduleTimeout = _ref$rescheduleTimeou === void 0 ? DEFAULT_RESCHEDULE_PING_TIMEOUT : _ref$rescheduleTimeou,\n      transports = _ref.transports,\n      _ref$emitter = _ref.emitter,\n      emitter = _ref$emitter === void 0 ? mitt() : _ref$emitter;\n\n  var manager = createSockJSManager(url, {\n    query: _extends({\n      // needed for HAProxy sticky sessions\n      bh: generateRandomId()\n    }, query),\n    transports: transports\n  });\n  var pingTimer;\n  var connectionHero = createConnectionHero();\n\n  var isSocketOpen = function isSocketOpen() {\n    return manager.getReadyState() === 1;\n  };\n\n  var emit = function emit(frame) {\n    manager.emit(JSON.stringify(frame));\n    reschedulePing();\n  };\n\n  var ping = function ping() {\n    // ping action doesn't extend Outgoing - it's internal, so doesn't have to be specified by a consumer\n    // but it's safe to use emit with it\n    emit({\n      action: 'ping'\n    });\n  }; // extra measure to keep the connection alive\n  // in theory this timer should never fire though\n  // because we ping after each received heartbeat & sent request\n\n\n  var reschedulePing = function reschedulePing() {\n    clearTimeout(pingTimer);\n    pingTimer = setTimeout(ping, rescheduleTimeout);\n  };\n\n  var cleanupPossiblyPendingTasks = function cleanupPossiblyPendingTasks() {\n    connectionHero.cancel();\n    clearTimeout(pingTimer);\n  };\n\n  forwardEvents(manager, emitter, ['connect', 'disconnect']);\n  manager.on('connect', reschedulePing);\n  manager.on('disconnect', cleanupPossiblyPendingTasks); // ping has to be sent back upon receiving heartbeat\n  // this is somewhat guaranteed to be executed asap unlike browser timers\n\n  manager.on('heartbeat', ping);\n  manager.on('message', function (data) {\n    connectionHero.resolve();\n    var message = JSON.parse(data);\n\n    if (message.action === 'ping') {\n      return;\n    } // Incoming requires `action` property to be a string, we cannot forbid in typings `ping` as valid action though\n    // so TS cannot narrow the type down to `Incoming` here (it stays `Incoming | Ping`), that's why we are using `any` here\n\n\n    emitter.emit('message', message);\n  }); // React Native uses window as global object, but without addEventListener method\n\n  if (typeof window !== 'undefined' && typeof window.addEventListener !== 'undefined') {\n    window.addEventListener('online', function () {\n      if (!isSocketOpen()) {\n        return;\n      }\n\n      connectionHero.check().then(function () {\n        connectionHero.cancel();\n        emitter.emit('connection_recovered');\n      }, function (err) {\n        connectionHero.cancel();\n\n        if (err.code !== 'TIMEOUT') {\n          throw err;\n        }\n\n        manager.reconnect();\n      });\n      ping();\n    });\n    window.addEventListener('offline', function () {\n      connectionHero.cancel();\n\n      if (!isSocketOpen()) {\n        return;\n      }\n\n      emitter.emit('connection_unstable');\n    });\n  }\n\n  return _extends({}, manager, {\n    destroy: function destroy() {\n      cleanupPossiblyPendingTasks();\n      manager.destroy();\n    },\n    disconnect: function disconnect() {\n      cleanupPossiblyPendingTasks();\n      manager.disconnect();\n    },\n    reconnect: function reconnect(delay) {\n      cleanupPossiblyPendingTasks();\n      manager.reconnect(delay);\n    },\n    emit: emit,\n    on: emitter.on,\n    off: emitter.off\n  });\n};\n\nexport default createPlatformClient;","var toFormData = function toFormData(object) {\n  var formData = new FormData();\n  Object.keys(object).forEach(function (key) {\n    return formData.append(key, object[key]);\n  });\n  return formData;\n};\n\nvar UPLOAD_FAILED = 'UPLOAD_FAILED';\nvar UPLOAD_CANCELED = 'UPLOAD_CANCELED';\n\nvar uploadFile = function uploadFile(url, data, _temp) {\n  var _ref = _temp === void 0 ? {} : _temp,\n      headers = _ref.headers,\n      _ref$method = _ref.method,\n      method = _ref$method === void 0 ? 'POST' : _ref$method,\n      onProgress = _ref.onProgress,\n      _ref$withCredentials = _ref.withCredentials,\n      withCredentials = _ref$withCredentials === void 0 ? false : _ref$withCredentials;\n\n  var xhr = new XMLHttpRequest();\n  var upload = new Promise(function (resolve, reject) {\n    if (typeof onProgress === 'function') {\n      xhr.upload.onprogress = function (event) {\n        onProgress(event.loaded / event.total);\n      };\n    }\n\n    xhr.onload = function () {\n      var response;\n\n      try {\n        response = JSON.parse(xhr.response);\n      } catch (err) {\n        response = xhr.response;\n      }\n\n      if (xhr.status >= 200 && xhr.status < 300) {\n        resolve(response);\n        return;\n      }\n\n      var err = new Error('Upload failed.');\n      err.code = UPLOAD_FAILED;\n      err.response = response;\n      reject(err);\n    };\n\n    xhr.onerror = function () {\n      var err = new Error('Upload failed.');\n      err.code = UPLOAD_FAILED;\n      reject(err);\n    };\n\n    xhr.onabort = function () {\n      var err = new Error('Upload canceled.');\n      err.code = UPLOAD_CANCELED;\n      reject(err);\n    };\n\n    xhr.open(method, url);\n    xhr.withCredentials = withCredentials;\n\n    if (headers) {\n      Object.keys(headers).forEach(function (header) {\n        return xhr.setRequestHeader(header, headers[header]);\n      });\n    }\n\n    xhr.send(toFormData(data));\n  });\n  return {\n    promise: upload,\n    cancel: function cancel() {\n      xhr.abort();\n    }\n  };\n};\n\nexport default uploadFile;","import { forOwn, pick, hasOwn, sum, findIndex } from '@livechat/data-utils';\nimport { tabbable as tabbable$1 } from 'tabbable';\nexport * from 'tabbable';\n\nvar applyStyle = function applyStyle(style, element) {\n  forOwn(function (value, key) {\n    element.style[key] = value;\n  }, style);\n};\n\nvar applyElementSpec = function applyElementSpec(attributes, element) {\n  var iteratee = function iteratee(value, key) {\n    if (key === 'style') {\n      applyStyle(value, element);\n      return;\n    }\n\n    element.setAttribute(key, value);\n  };\n\n  forOwn(iteratee, attributes);\n};\n\nvar isIE = !!document.documentElement.currentStyle;\n\nvar getComputedStyle = function getComputedStyle(props, element) {\n  var styles = window.getComputedStyle(element);\n  var borderBox = styles.boxSizing === 'border-box';\n  var picked = pick(props, styles);\n\n  if (isIE && borderBox && hasOwn('width', picked) && picked.width !== null) {\n    var widths = [picked.width, styles.paddingLeft, styles.paddingRight, styles.borderLeftWidth, styles.borderRightWidth];\n    picked.width = sum(widths.map(parseFloat)) + 'px';\n  }\n\n  if (isIE && borderBox && hasOwn('height', picked) && picked.height !== null) {\n    var heights = [picked.height, styles.paddingTop, styles.paddingBottom, styles.borderTopWidth, styles.borderBottomWidth];\n    picked.height = sum(heights.map(parseFloat)) + 'px';\n  }\n\n  return picked;\n};\n\nfunction getNextTabbable(element, container) {\n  if (container === void 0) {\n    container = document.body;\n  }\n\n  var tabbables = tabbable$1(container);\n  var elementIndex = findIndex(function (el) {\n    return el === element;\n  }, tabbables);\n  var isElementLast = elementIndex === tabbables.length - 1;\n  return tabbables[isElementLast ? 0 : elementIndex + 1];\n}\n\nfunction getRoot() {\n  return new Promise(function (resolve) {\n    var next = function next() {\n      if (!document.body) {\n        setTimeout(next, 100);\n        return;\n      }\n\n      resolve(document.body);\n    };\n\n    next();\n  });\n}\n\nvar cachedRTLOffsetType = null; // https://github.com/bvaughn/react-window/blob/c035eee067ea89029c89ecffd9eade1fc2ecb2dd/src/domHelpers.js#L31-L36\n\nvar getRTLOffsetType = function getRTLOffsetType() {\n  if (cachedRTLOffsetType) {\n    return cachedRTLOffsetType;\n  }\n\n  var outerDiv = document.createElement('div');\n  var outerStyle = outerDiv.style;\n  outerStyle.width = '50px';\n  outerStyle.height = '50px';\n  outerStyle.overflow = 'scroll';\n  outerStyle.direction = 'rtl';\n  var innerDiv = document.createElement('div');\n  var innerStyle = innerDiv.style;\n  innerStyle.width = '100px';\n  innerStyle.height = '50px';\n  outerDiv.appendChild(innerDiv);\n  document.body.appendChild(outerDiv);\n\n  if (outerDiv.scrollLeft > 0) {\n    // Chrome 😩\n    // it renders initially with max scrollLeft and to shift it to the left we need to subtract the distance\n    cachedRTLOffsetType = 'positive-descending';\n  } else {\n    outerDiv.scrollLeft = 1;\n\n    if (outerDiv.scrollLeft === 0) {\n      // spec-compliant\n      // it renders initially with 0 and to shift it to the left we need to subtract the distance\n      cachedRTLOffsetType = 'negative';\n    } else {\n      // non-chromium Edge 🤦‍♂️\n      // it renders initially with 0 and to shift it to the left we need to add the distance\n      cachedRTLOffsetType = 'positive-ascending';\n    }\n  }\n\n  document.body.removeChild(outerDiv);\n  return cachedRTLOffsetType;\n};\n\nfunction isScrollOnBottom(node, threshold) {\n  if (threshold === void 0) {\n    threshold = 0;\n  }\n\n  return Math.abs(node.scrollTop + node.clientHeight - node.scrollHeight) <= threshold;\n}\n\nfunction isScrollOnTop(node, threshold) {\n  if (threshold === void 0) {\n    threshold = 0;\n  }\n\n  return node.scrollTop <= threshold;\n}\n\nfunction prependChild(parentElement, newElement) {\n  parentElement.insertBefore(newElement, parentElement.children[0]);\n}\n\nfunction scrollToBottom(node) {\n  node.scrollTop = node.scrollHeight;\n}\n\nfunction scrollToTop(node) {\n  node.scrollTop = 0;\n}\n\nfunction removeNode(node) {\n  var parentNode = node.parentNode;\n\n  if (parentNode) {\n    parentNode.removeChild(node);\n  }\n}\n\nexport { applyElementSpec, applyStyle, getComputedStyle, getNextTabbable, getRTLOffsetType, getRoot, isScrollOnBottom, isScrollOnTop, prependChild, removeNode, scrollToBottom, scrollToTop };","import { buildQueryString, getOrigin } from '@livechat/url-utils';\nimport { getRoot, removeNode } from '@livechat/dom-utils';\nimport storage from '@livechat/isomorphic-storage'; // this is the same as \"https://accounts.livechatinc.com\"\n// it's hardcoded here because chat.io has its own ACCOUNTS_URL\n// but this variable has to have the same value for both LiveChat and chat.io\n\nvar POST_MESSAGE_ORIGIN = 'https://accounts.livechatinc.com'; // as const\n\nvar CUSTOMER_AUTH_FOOTPRINT = '@livechat/customer-auth'; // as const\n\nvar ACCOUNTS_URL = \"https://accounts.livechatinc.com\";\n\nvar buildParams = function buildParams(_ref, redirectUri) {\n  var clientId = _ref.clientId,\n      licenseId = _ref.licenseId;\n  return {\n    license_id: String(licenseId),\n    flow: 'button',\n    response_type: 'token',\n    client_id: clientId,\n    redirect_uri: redirectUri,\n    post_message_uri: redirectUri,\n    state: CUSTOMER_AUTH_FOOTPRINT\n  };\n};\n\nvar buildPath = function buildPath(_ref2) {\n  var uniqueGroups = _ref2.uniqueGroups,\n      licenseId = _ref2.licenseId,\n      groupId = _ref2.groupId;\n  return (uniqueGroups ? \"/licence/g\" + licenseId + \"_\" + groupId : '') + \"/customer\";\n};\n\nvar buildSrc = function buildSrc(config, redirectUri, env) {\n  var url = env === 'production' ? ACCOUNTS_URL : ACCOUNTS_URL.replace('accounts.', \"accounts.\" + env + \".\");\n  var path = buildPath(config);\n  var query = buildQueryString(buildParams(config, redirectUri));\n  return \"\" + url + path + \"?\" + query;\n};\n\nvar createError = function createError(_ref) {\n  var code = _ref.code,\n      message = _ref.message;\n  var err = new Error(message);\n  err.code = code;\n  return err;\n};\n\nvar parseTokenResponse = function parseTokenResponse(token, licenseId) {\n  if ('identity_exception' in token) {\n    throw createError({\n      code: 'SSO_IDENTITY_EXCEPTION',\n      message: token.identity_exception\n    });\n  }\n\n  if ('oauth_exception' in token) {\n    throw createError({\n      code: 'SSO_OAUTH_EXCEPTION',\n      message: token.oauth_exception\n    });\n  }\n\n  return {\n    accessToken: token.access_token,\n    entityId: token.entity_id,\n    expiresIn: token.expires_in * 1000,\n    tokenType: token.token_type,\n    creationDate: Date.now(),\n    licenseId: licenseId\n  };\n};\n\nvar getPostMessageOrigin = function getPostMessageOrigin(env) {\n  return env === 'production' ? POST_MESSAGE_ORIGIN : POST_MESSAGE_ORIGIN.replace('accounts.', \"accounts.\" + env + \".\");\n};\n\nvar buildIframe = function buildIframe(config, env) {\n  var iframe = document.createElement('iframe');\n  iframe.style.display = 'none';\n  iframe.setAttribute('src', buildSrc(config, getOrigin(String(window.location)) + window.location.pathname, env));\n  return iframe;\n};\n\nvar isTokenResponse = function isTokenResponse(data) {\n  return data && data.state === CUSTOMER_AUTH_FOOTPRINT;\n};\n\nvar fetchToken = function fetchToken(config, env) {\n  var licenseId = config.licenseId;\n  var postMessageOrigin = getPostMessageOrigin(env);\n  return new Promise(function (resolve, reject) {\n    var iframe = buildIframe(config, env);\n\n    var cleanup = function cleanup() {\n      removeNode(iframe); // eslint-disable-next-line no-use-before-define\n\n      window.removeEventListener('message', listener, false);\n    };\n\n    var timeoutId = setTimeout(function () {\n      cleanup();\n      reject(createError({\n        message: 'Request timed out.',\n        code: 'REQUEST_TIMEOUT'\n      }));\n    }, 15 * 1000);\n\n    var listener = function listener(_ref) {\n      var origin = _ref.origin,\n          data = _ref.data;\n\n      if (origin !== postMessageOrigin) {\n        return;\n      }\n\n      if (!isTokenResponse(data)) {\n        return;\n      }\n\n      clearTimeout(timeoutId);\n      cleanup();\n\n      try {\n        resolve(parseTokenResponse(data, licenseId));\n      } catch (err) {\n        reject(err);\n      }\n    };\n\n    window.addEventListener('message', listener, false);\n    getRoot().then(function (body) {\n      body.appendChild(iframe);\n    });\n  });\n};\n\nvar validateConfig = function validateConfig(_ref) {\n  var licenseId = _ref.licenseId,\n      clientId = _ref.clientId;\n\n  if (typeof licenseId !== 'number' || typeof clientId !== 'string') {\n    throw new Error('You need to pass valid configuration object: { licenseId, clientId }.');\n  }\n};\n\nvar isExpiredToken = function isExpiredToken(_ref) {\n  var creationDate = _ref.creationDate,\n      expiresIn = _ref.expiresIn;\n  return Date.now() >= creationDate + expiresIn;\n};\n\nvar createAuth = function createAuth(config, env) {\n  validateConfig(config);\n  var cacheKey = \"\" + \"@@lc_auth_token:\" + config.licenseId + (config.uniqueGroups ? \":\" + config.groupId : '');\n  var pendingTokenRequest = null;\n  var cachedToken = null;\n  var retrievingToken = storage.getItem(cacheKey).then(function (token) {\n    if (retrievingToken === null) {\n      return;\n    }\n\n    retrievingToken = null;\n\n    if (!token) {\n      return;\n    }\n\n    cachedToken = JSON.parse(token);\n  });\n\n  var getFreshToken = function getFreshToken() {\n    pendingTokenRequest = fetchToken(config, env).then(function (token) {\n      pendingTokenRequest = null;\n      storage.setItem(cacheKey, JSON.stringify(token));\n      cachedToken = token;\n      return token;\n    }, function (err) {\n      pendingTokenRequest = null;\n      throw err;\n    });\n    return pendingTokenRequest;\n  };\n\n  var getToken = function getToken() {\n    if (pendingTokenRequest) {\n      return pendingTokenRequest;\n    }\n\n    if (cachedToken && !isExpiredToken(cachedToken)) {\n      return Promise.resolve(cachedToken);\n    }\n\n    if (retrievingToken) {\n      return retrievingToken.then(getToken);\n    }\n\n    return getFreshToken();\n  };\n\n  var hasToken = function hasToken() {\n    if (retrievingToken) {\n      return retrievingToken.then(hasToken);\n    }\n\n    return Promise.resolve(!!cachedToken);\n  };\n\n  var invalidate = function invalidate() {\n    cachedToken = null;\n    retrievingToken = null;\n    return storage.removeItem(cacheKey);\n  };\n\n  return {\n    getFreshToken: getFreshToken,\n    getToken: getToken,\n    hasToken: hasToken,\n    invalidate: invalidate\n  };\n};\n\nexport default createAuth;\nexport { isExpiredToken, validateConfig };","import { mapValues, noop, hasOwn, identity, isObject, pickOwn, toPairs, generateUniqueId, pick, keyBy, isEmpty, flatMap, includes, last, numericSortBy, stringCompare, uniqBy } from '@livechat/data-utils';\nimport deferred from '@livechat/deferred';\nimport { createStore, applyMiddleware } from 'redux';\nimport createSideEffectsMiddleware from '@livechat/side-effects-middleware';\nimport storage from '@livechat/isomorphic-storage';\nimport promiseTry from '@livechat/promise-try';\nimport Backo from 'backo2';\nimport unfetch from 'unfetch';\nimport { buildQueryString } from '@livechat/url-utils';\nimport createPlatformClient from '@livechat/platform-client';\nimport mitt from '@livechat/mitt';\nimport rawUploadFile from '@livechat/file-upload';\nimport createAuth, { validateConfig } from '@livechat/customer-auth';\n\nfunction _extends() {\n  _extends = Object.assign || function (target) {\n    for (var i = 1; i < arguments.length; i++) {\n      var source = arguments[i];\n\n      for (var key in source) {\n        if (Object.prototype.hasOwnProperty.call(source, key)) {\n          target[key] = source[key];\n        }\n      }\n    }\n\n    return target;\n  };\n\n  return _extends.apply(this, arguments);\n}\n\nfunction _objectWithoutPropertiesLoose(source, excluded) {\n  if (source == null) return {};\n  var target = {};\n  var sourceKeys = Object.keys(source);\n  var key, i;\n\n  for (i = 0; i < sourceKeys.length; i++) {\n    key = sourceKeys[i];\n    if (excluded.indexOf(key) >= 0) continue;\n    target[key] = source[key];\n  }\n\n  return target;\n}\n\nfunction _toPrimitive(input, hint) {\n  if (typeof input !== \"object\" || input === null) return input;\n  var prim = input[Symbol.toPrimitive];\n\n  if (prim !== undefined) {\n    var res = prim.call(input, hint || \"default\");\n    if (typeof res !== \"object\") return res;\n    throw new TypeError(\"@@toPrimitive must return a primitive value.\");\n  }\n\n  return (hint === \"string\" ? String : Number)(input);\n}\n\nfunction _toPropertyKey(arg) {\n  var key = _toPrimitive(arg, \"string\");\n\n  return typeof key === \"symbol\" ? key : String(key);\n}\n\nvar CHANGE_REGION = 'change_region';\nvar CHECK_GOALS = 'check_goals';\nvar DESTROY = 'destroy';\nvar FAIL_ALL_REQUESTS = 'fail_all_requests';\nvar LOGIN_SUCCESS = 'login_success';\nvar PAUSE_CONNECTION = 'pause_connection';\nvar PREFETCH_TOKEN = 'prefetch_token';\nvar PUSH_RECEIVED = 'push_received';\nvar PUSH_RESPONSE_RECEIVED = 'push_response_received';\nvar RECONNECT = 'reconnect';\nvar REQUEST_FAILED = 'request_failed';\nvar RESPONSE_RECEIVED = 'response_received';\nvar SEND_REQUEST = 'send_request';\nvar SET_CHAT_ACTIVE = 'set_chat_active';\nvar SET_SELF_ID = 'set_self_id';\nvar SOCKET_CONNECTED = 'socket_connected';\nvar SOCKET_DISCONNECTED = 'socket_disconnected';\nvar SOCKET_RECOVERED = 'socket_recovered';\nvar SOCKET_UNSTABLE = 'socket_unstable';\nvar START_CONNECTION = 'start_connection';\nvar UPDATE_CUSTOMER_PAGE = 'update_customer_page';\nvar CONNECTION_LOST = 'CONNECTION_LOST';\nvar IDENTITY_MISMATCH = 'IDENTITY_MISMATCH';\nvar MISDIRECTED_CONNECTION = 'MISDIRECTED_CONNECTION';\nvar MISSING_CHAT_THREAD = 'MISSING_CHAT_THREAD';\nvar REQUEST_TIMEOUT = 'REQUEST_TIMEOUT';\nvar TOO_MANY_UNAUTHORIZED_CONNECTIONS = 'TOO_MANY_UNAUTHORIZED_CONNECTIONS';\nvar ACCEPT_GREETING = 'accept_greeting';\nvar ACTIVATE_CHAT = 'activate_chat';\nvar CANCEL_GREETING = 'cancel_greeting';\nvar CHECK_GOALS$1 = 'check_goals';\nvar DEACTIVATE_CHAT = 'deactivate_chat';\nvar DELETE_CHAT_PROPERTIES = 'delete_chat_properties';\nvar DELETE_EVENT_PROPERTIES = 'delete_event_properties';\nvar DELETE_THREAD_PROPERTIES = 'delete_thread_properties';\nvar GET_CHAT = 'get_chat';\nvar GET_CUSTOMER = 'get_customer';\nvar GET_FORM = 'get_form';\nvar GET_PREDICTED_AGENT = 'get_predicted_agent';\nvar GET_URL_INFO = 'get_url_info';\nvar LIST_CHATS = 'list_chats';\nvar LIST_GROUP_STATUSES = 'list_group_statuses';\nvar LIST_THREADS = 'list_threads';\nvar LOGIN = 'login';\nvar MARK_EVENTS_AS_SEEN = 'mark_events_as_seen';\nvar SEND_EVENT = 'send_event';\nvar SEND_RICH_MESSAGE_POSTBACK = 'send_rich_message_postback';\nvar SEND_SNEAK_PEEK = 'send_sneak_peek';\nvar SET_CUSTOMER_SESSION_FIELDS = 'set_customer_session_fields';\nvar START_CHAT = 'start_chat';\nvar UPDATE_CHAT_PROPERTIES = 'update_chat_properties';\nvar UPDATE_CUSTOMER = 'update_customer';\nvar UPDATE_CUSTOMER_PAGE$1 = 'update_customer_page';\nvar UPDATE_EVENT_PROPERTIES = 'update_event_properties';\nvar UPDATE_THREAD_PROPERTIES = 'update_thread_properties';\nvar UPLOAD_FILE = 'upload_file';\nvar DESC = 'desc';\n\nvar createReducer = function createReducer(initialState, reducersMap) {\n  if (process.env.NODE_ENV !== 'development' && reducersMap[undefined]) {\n    // eslint-disable-next-line no-console\n    console.warn([\"Reducer contains an 'undefined' action type.\", 'Have you misspelled a constant?'].join('\\n'));\n  }\n\n  return function reducer(state, action) {\n    if (state === void 0) {\n      state = initialState;\n    }\n\n    if (hasOwn(action.type, reducersMap)) {\n      return reducersMap[action.type](state, action.payload);\n    }\n\n    return state;\n  };\n}; // TODO: this is the same as built-in redux's combineReducers, should be remobed\n\n\nvar CONNECTED = 'connected';\nvar DESTROYED = 'destroyed';\nvar DISCONNECTED = 'disconnected';\nvar PAUSED = 'paused';\nvar RECONNECTING = 'reconnecting';\nvar AGENT = 'agent';\nvar CUSTOMER = 'customer';\n\nvar getAllRequests = function getAllRequests(state) {\n  return state.requests;\n};\n\nvar getConnectionStatus = function getConnectionStatus(state) {\n  return state.connection.status;\n};\n\nvar getRequest = function getRequest(state, id) {\n  return state.requests[id];\n};\n\nvar getSelfId = function getSelfId(state) {\n  return state.users.self.id;\n};\n\nvar isChatActive = function isChatActive(state, chatId) {\n  var chat = state.chats[chatId];\n  return !!chat && chat.active;\n};\n\nvar isConnected = function isConnected(state) {\n  return getConnectionStatus(state) === CONNECTED;\n};\n\nvar isDestroyed = function isDestroyed(state) {\n  return getConnectionStatus(state) === DESTROYED;\n};\n\nvar getEnvPart = function getEnvPart(_ref) {\n  var licenseId = _ref.licenseId,\n      env = _ref.env;\n\n  if (licenseId === 1520) {\n    return '.staging';\n  }\n\n  if (env === 'production') {\n    return '';\n  }\n\n  return \".\" + env;\n};\n\nvar getApiOrigin = function getApiOrigin(state) {\n  var region = state.region;\n  var regionPart = region ? \"-\" + region : '';\n  return \"https://api\" + regionPart + getEnvPart(state) + \".livechatinc.com\";\n};\n\nvar getServerUrl = function getServerUrl(state) {\n  return getApiOrigin(state) + \"/v3.2/customer\";\n};\n\nvar createInitialState = function createInitialState(initialStateData) {\n  var _initialStateData$app = initialStateData.application,\n      application = _initialStateData$app === void 0 ? {} : _initialStateData$app,\n      licenseId = initialStateData.licenseId,\n      _initialStateData$gro = initialStateData.groupId,\n      groupId = _initialStateData$gro === void 0 ? null : _initialStateData$gro,\n      env = initialStateData.env,\n      _initialStateData$pag = initialStateData.page,\n      page = _initialStateData$pag === void 0 ? null : _initialStateData$pag,\n      _initialStateData$reg = initialStateData.region,\n      region = _initialStateData$reg === void 0 ? null : _initialStateData$reg,\n      _initialStateData$ref = initialStateData.referrer,\n      referrer = _initialStateData$ref === void 0 ? null : _initialStateData$ref,\n      _initialStateData$uni = initialStateData.uniqueGroups,\n      uniqueGroups = _initialStateData$uni === void 0 ? false : _initialStateData$uni,\n      _initialStateData$mob = initialStateData.mobile,\n      mobile = _initialStateData$mob === void 0 ? false : _initialStateData$mob;\n  return {\n    application: _extends({}, application, {\n      name: \"customer_sdk\",\n      version: \"2.0.4\"\n    }),\n    licenseId: licenseId,\n    env: env,\n    groupId: groupId,\n    chats: {},\n    connection: {\n      status: DISCONNECTED\n    },\n    page: page,\n    region: region,\n    referrer: referrer,\n    requests: {},\n    users: {\n      self: {\n        id: null,\n        type: CUSTOMER\n      },\n      others: {}\n    },\n    uniqueGroups: uniqueGroups,\n    mobile: mobile\n  };\n};\n\nvar removeStoredRequest = function removeStoredRequest(state, _ref2) {\n  var id = _ref2.id; // eslint-disable-next-line no-unused-vars\n\n  var _state$requests = state.requests,\n      requests = _objectWithoutPropertiesLoose(_state$requests, [id].map(_toPropertyKey));\n\n  return _extends({}, state, {\n    requests: requests\n  });\n};\n\nvar setConnectionStatus = function setConnectionStatus(status, state) {\n  return _extends({}, state, {\n    connection: _extends({}, state.connection, {\n      status: status\n    })\n  });\n};\n\nvar createReducer$1 = function createReducer$1(state) {\n  var _createReducer;\n\n  return createReducer(state, (_createReducer = {}, _createReducer[CHANGE_REGION] = function (state, _ref3) {\n    var region = _ref3.region;\n    return _extends({}, state, {\n      region: region\n    });\n  }, _createReducer[DESTROY] = function (state) {\n    return setConnectionStatus(DESTROYED, state);\n  }, _createReducer[LOGIN_SUCCESS] = function (state) {\n    return setConnectionStatus(CONNECTED, state);\n  }, _createReducer[PAUSE_CONNECTION] = function (state) {\n    return setConnectionStatus(PAUSED, state);\n  }, _createReducer[REQUEST_FAILED] = removeStoredRequest, _createReducer[RESPONSE_RECEIVED] = removeStoredRequest, _createReducer[SEND_REQUEST] = function (state, _ref4) {\n    var _extends2;\n\n    var promise = _ref4.promise,\n        resolve = _ref4.resolve,\n        reject = _ref4.reject,\n        id = _ref4.id,\n        request = _ref4.request;\n    return _extends({}, state, {\n      requests: _extends({}, state.requests, (_extends2 = {}, _extends2[id] = {\n        id: id,\n        promise: promise,\n        resolve: resolve,\n        reject: reject,\n        request: request\n      }, _extends2))\n    });\n  }, _createReducer[SET_CHAT_ACTIVE] = function (state, _ref5) {\n    var _extends3;\n\n    var id = _ref5.id,\n        active = _ref5.active;\n    return _extends({}, state, {\n      chats: _extends({}, state.chats, (_extends3 = {}, _extends3[id] = _extends({}, state.chats[id], {\n        active: active\n      }), _extends3))\n    });\n  }, _createReducer[SET_SELF_ID] = function (state, payload) {\n    return _extends({}, state, {\n      users: _extends({}, state.users, {\n        self: _extends({}, state.users.self, {\n          id: payload.id\n        })\n      })\n    });\n  }, _createReducer[SOCKET_DISCONNECTED] = function (state) {\n    var previousStatus = getConnectionStatus(state);\n\n    if (process.env.NODE_ENV !== 'production' && (previousStatus === PAUSED || previousStatus === DESTROYED)) {\n      throw new Error(\"Got 'socket_disconnected' action when in \" + previousStatus + \" state. This should be an impossible state.\");\n    }\n\n    var state1 = setConnectionStatus(previousStatus === DISCONNECTED ? DISCONNECTED : RECONNECTING, state);\n    return _extends({}, state1, {\n      requests: {}\n    });\n  }, _createReducer[UPDATE_CUSTOMER_PAGE] = function (state, page) {\n    return _extends({}, state, {\n      page: _extends({}, state.page, page)\n    });\n  }, _createReducer));\n};\n\nfunction finalCreateStore(initialStateData) {\n  var compose = process.env.NODE_ENV === 'development' && typeof window !== 'undefined' && window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__ ? window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__({\n    name: '@livechat/customer-sdk'\n  }) : identity;\n  var sideEffectsMiddleware = createSideEffectsMiddleware();\n  var store = createStore(createReducer$1(createInitialState(initialStateData)), compose(applyMiddleware(sideEffectsMiddleware)));\n  store.addSideEffectsHandler = sideEffectsMiddleware.add;\n  return store;\n}\n\nfunction createError(_ref) {\n  var message = _ref.message,\n      code = _ref.code;\n  var error = new Error(message);\n  error.code = code;\n  return error;\n}\n\nvar ACCESS_TOKEN_EXPIRED = 'access_token_expired';\nvar CUSTOMER_BANNED = 'customer_banned';\nvar CUSTOMER_TEMPORARILY_BLOCKED = 'customer_temporarily_blocked';\nvar LICENSE_NOT_FOUND = 'license_not_found';\nvar MISDIRECTED_CONNECTION$1 = 'misdirected_connection';\nvar PRODUCT_VERSION_CHANGED = 'product_version_changed';\nvar TOO_MANY_CONNECTIONS = 'too_many_connections'; // the limit of unauthorized connections is per IP\n\nvar TOO_MANY_UNAUTHORIZED_CONNECTIONS$1 = 'too_many_unauthorized_connections';\nvar UNSUPPORTED_VERSION = 'unsupported_version';\nvar CHAT_DEACTIVATED = 'chat_deactivated';\nvar CHAT_PROPERTIES_DELETED = 'chat_properties_deleted';\nvar CHAT_PROPERTIES_UPDATED = 'chat_properties_updated';\nvar CHAT_TRANSFERRED = 'chat_transferred';\nvar CUSTOMER_DISCONNECTED = 'customer_disconnected';\nvar CUSTOMER_PAGE_UPDATED = 'customer_page_updated';\nvar CUSTOMER_SIDE_STORAGE_UPDATED = 'customer_side_storage_updated';\nvar CUSTOMER_UPDATED = 'customer_updated';\nvar EVENT_PROPERTIES_DELETED = 'event_properties_deleted';\nvar EVENT_PROPERTIES_UPDATED = 'event_properties_updated';\nvar EVENT_UPDATED = 'event_updated';\nvar EVENTS_MARKED_AS_SEEN = 'events_marked_as_seen';\nvar GREETING_ACCEPTED = 'greeting_accepted';\nvar GREETING_CANCELED = 'greeting_canceled';\nvar INCOMING_CHAT = 'incoming_chat';\nvar INCOMING_EVENT = 'incoming_event';\nvar INCOMING_GREETING = 'incoming_greeting';\nvar INCOMING_MULTICAST = 'incoming_multicast';\nvar INCOMING_RICH_MESSAGE_POSTBACK = 'incoming_rich_message_postback';\nvar INCOMING_TYPING_INDICATOR = 'incoming_typing_indicator';\nvar QUEUE_POSITION_UPDATED = 'queue_position_updated';\nvar THREAD_PROPERTIES_DELETED = 'thread_properties_deleted';\nvar THREAD_PROPERTIES_UPDATED = 'thread_properties_updated';\nvar USER_ADDED_TO_CHAT = 'user_added_to_chat';\nvar USER_REMOVED_FROM_CHAT = 'user_removed_from_chat';\nvar FILE = 'file';\nvar FILLED_FORM = 'filled_form';\nvar MESSAGE = 'message';\nvar RICH_MESSAGE = 'rich_message';\nvar SYSTEM_MESSAGE = 'system_message';\n\nvar createEventBase = function createEventBase(event) {\n  var base = {};\n\n  if (typeof event.customId === 'string') {\n    base.custom_id = event.customId;\n  }\n\n  if (isObject(event.properties)) {\n    base.properties = event.properties;\n  }\n\n  return base;\n}; // TODO: we could validate and throw here\n// but should we? maybe only in DEV mode?\n\n\nvar parseEvent = function parseEvent(event) {\n  switch (event.type) {\n    case MESSAGE:\n      {\n        var message = _extends({}, createEventBase(event), {\n          type: event.type,\n          text: event.text\n        });\n\n        if (event.postback) {\n          message.postback = {\n            id: event.postback.id,\n            thread_id: event.postback.threadId,\n            event_id: event.postback.eventId,\n            type: event.postback.type,\n            value: event.postback.value\n          };\n        }\n\n        return message;\n      }\n\n    case FILE:\n      {\n        var file = _extends({}, createEventBase(event), {\n          type: event.type,\n          url: event.url\n        });\n\n        return file;\n      }\n\n    case FILLED_FORM:\n      {\n        var filledForm = _extends({}, createEventBase(event), {\n          type: event.type,\n          form_id: event.formId,\n          fields: event.fields.map(function (field) {\n            switch (field.type) {\n              case 'group_chooser':\n                {\n                  if (!field.answer) {\n                    return field;\n                  }\n\n                  var _field$answer = field.answer,\n                      groupId = _field$answer.groupId,\n                      answer = _objectWithoutPropertiesLoose(_field$answer, [\"groupId\"]);\n\n                  return _extends({}, field, {\n                    answer: _extends({}, answer, {\n                      group_id: groupId\n                    })\n                  });\n                }\n\n              default:\n                return field;\n            }\n          })\n        });\n\n        return filledForm;\n      }\n\n    case SYSTEM_MESSAGE:\n      {\n        var systemMessage = _extends({}, createEventBase(event), {\n          type: event.type,\n          text: event.text,\n          system_message_type: event.systemMessageType\n        });\n\n        if (event.recipients) {\n          systemMessage.recipients = event.recipients;\n        }\n\n        return systemMessage;\n      }\n  }\n};\n\nvar parseThreadData = function parseThreadData(thread) {\n  var data = {};\n  var events = thread.events,\n      properties = thread.properties;\n\n  if (events) {\n    data.events = events.map(parseEvent);\n  }\n\n  if (properties) {\n    data.properties = properties;\n  }\n\n  return data;\n};\n\nvar parseStartChatData = function parseStartChatData(_ref) {\n  var chat = _ref.chat,\n      continuous = _ref.continuous;\n  var data = {\n    chat: {}\n  };\n\n  if (typeof continuous === 'boolean') {\n    data.continuous = continuous;\n  }\n\n  if (!chat) {\n    return data;\n  }\n\n  var access = chat.access,\n      thread = chat.thread,\n      properties = chat.properties;\n\n  if (access && access.groupIds) {\n    data.chat.access = {\n      group_ids: access.groupIds\n    };\n  }\n\n  if (properties) {\n    data.chat.properties = properties;\n  }\n\n  if (thread) {\n    data.chat.thread = parseThreadData(thread);\n  }\n\n  return data;\n};\n\nvar parseActivateChatData = function parseActivateChatData(requestData) {\n  var data = parseStartChatData(requestData);\n  return _extends({}, data, {\n    chat: _extends({}, data.chat, {\n      id: requestData.chat.id\n    })\n  });\n};\n\nvar parseCustomerSessionFields = function parseCustomerSessionFields(sessionFields) {\n  return toPairs(sessionFields).map(function (_ref2) {\n    var _ref3;\n\n    var key = _ref2[0],\n        value = _ref2[1];\n    return _ref3 = {}, _ref3[key] = value, _ref3;\n  });\n};\n\nvar parseCustomerUpdate = function parseCustomerUpdate(update) {\n  var result = pickOwn(['avatar', 'name', 'email'], update);\n\n  if (update.sessionFields) {\n    result.session_fields = parseCustomerSessionFields(update.sessionFields);\n  }\n\n  return result;\n};\n\nvar destroy = function destroy(reason) {\n  return {\n    type: DESTROY,\n    payload: {\n      reason: reason\n    }\n  };\n};\n\nvar loginSuccess = function loginSuccess(payload) {\n  return {\n    type: LOGIN_SUCCESS,\n    payload: payload\n  };\n};\n\nvar prefetchToken = function prefetchToken(fresh) {\n  if (fresh === void 0) {\n    fresh = false;\n  }\n\n  return {\n    type: PREFETCH_TOKEN,\n    payload: {\n      fresh: fresh\n    }\n  };\n};\n\nvar reconnect = function reconnect(delay) {\n  return {\n    type: RECONNECT,\n    payload: {\n      delay: delay\n    }\n  };\n}; // TODO: this one was currently pretty hard to type in full\n// we should explore providing stricter types for this in the future\n\n\nvar sendRequest = function sendRequest(action, payload, source) {\n  return {\n    type: SEND_REQUEST,\n    payload: _extends({\n      request: {\n        action: action,\n        payload: payload\n      }\n    }, source && {\n      source: source\n    })\n  };\n};\n\nvar sendEvent = function sendEvent(_ref) {\n  var chatId = _ref.chatId,\n      event = _ref.event,\n      attachToLastThread = _ref.attachToLastThread;\n  var payload = {\n    chat_id: chatId,\n    event: parseEvent(event)\n  };\n\n  if (attachToLastThread) {\n    payload.attach_to_last_thread = true;\n  }\n\n  return sendRequest(SEND_EVENT, payload);\n};\n\nvar setChatActive = function setChatActive(id, active) {\n  return {\n    type: SET_CHAT_ACTIVE,\n    payload: {\n      id: id,\n      active: active\n    }\n  };\n};\n\nvar setSelfId = function setSelfId(id) {\n  return {\n    type: SET_SELF_ID,\n    payload: {\n      id: id\n    }\n  };\n};\n\nvar socketDisconnected = function socketDisconnected() {\n  return {\n    type: SOCKET_DISCONNECTED\n  };\n}; // TODO: this thing is not really well typed and should be improved\n\n\nvar sendRequestAction = function sendRequestAction(store, action) {\n  action.payload.id = generateUniqueId(store.getState().requests);\n\n  var _deferred = deferred(),\n      resolve = _deferred.resolve,\n      reject = _deferred.reject,\n      promise = _deferred.promise;\n\n  action.payload.promise = promise;\n  action.payload.resolve = resolve;\n  action.payload.reject = reject;\n  store.dispatch(action);\n  return promise;\n};\n\nvar AUTHENTICATION = 'AUTHENTICATION';\nvar CUSTOMER_BANNED$1 = 'CUSTOMER_BANNED';\nvar USERS_LIMIT_REACHED = 'USERS_LIMIT_REACHED';\nvar WRONG_PRODUCT_VERSION = 'WRONG_PRODUCT_VERSION';\n\nvar getSideStorageKey = function getSideStorageKey(store) {\n  var _store$getState = store.getState(),\n      licenseId = _store$getState.licenseId,\n      groupId = _store$getState.groupId,\n      uniqueGroups = _store$getState.uniqueGroups;\n\n  return \"side_storage_\" + licenseId + (uniqueGroups ? \":\" + groupId : '');\n};\n\nvar getSideStorage = function getSideStorage(store) {\n  return storage.getItem(getSideStorageKey(store)).catch(noop).then(function (sideStorage) {\n    return JSON.parse(sideStorage || '{}');\n  }) // shouldnt get triggered, just a defensive measure against malformed storage entries\n  .catch(function () {\n    return {};\n  });\n};\n\nvar saveSideStorage = function saveSideStorage(store, sideStorage) {\n  return storage.setItem(getSideStorageKey(store), JSON.stringify(sideStorage)).catch(noop);\n};\n\nvar taskChain = function taskChain(_ref, onSuccess, onError) {\n  var steps = _ref.slice(0);\n\n  var cancelled = false;\n\n  var next = function next(intermediateResult) {\n    var step = steps.shift();\n    promiseTry(function () {\n      return step(intermediateResult);\n    }).then(function (result) {\n      if (cancelled) {\n        return;\n      }\n\n      if (steps.length) {\n        next(result);\n        return;\n      }\n\n      onSuccess(result);\n    }, function (error) {\n      if (cancelled) {\n        return;\n      }\n\n      onError(error);\n    });\n  };\n\n  next();\n  return {\n    cancel: function cancel() {\n      cancelled = true;\n    }\n  };\n};\n\nvar sendLoginFlowRequest = function sendLoginFlowRequest(store, type, payload) {\n  return sendRequestAction(store, sendRequest(type, payload, 'login'));\n};\n\nvar delay = function delay(ms) {\n  return new Promise(function (resolve) {\n    setTimeout(resolve, ms);\n  });\n};\n\nfunction createLoginTask(auth, customerDataProvider) {\n  var store;\n  var sentPage = null;\n  var task;\n  var backoff = new Backo({\n    min: 300,\n    max: 60000,\n    jitter: 0.3\n  });\n\n  var destroy$$1 = function destroy$$1(reason) {\n    return store.dispatch(destroy(reason));\n  };\n\n  var reconnect$$1 = function reconnect$$1() {\n    return store.dispatch(reconnect(backoff.duration()));\n  };\n\n  var getTokenAndSideStorage = function getTokenAndSideStorage() {\n    return Promise.all([auth.getToken(), getSideStorage(store)]);\n  };\n\n  var dispatchSelfId = function dispatchSelfId(_ref2) {\n    var token = _ref2[0],\n        sideStorage = _ref2[1];\n    var selfId = getSelfId(store.getState());\n\n    if (selfId === null) {\n      store.dispatch(setSelfId(token.entityId));\n    } else if (selfId !== token.entityId) {\n      var err = new Error('Identity has changed.');\n      err.code = IDENTITY_MISMATCH;\n      throw err;\n    }\n\n    return [token, sideStorage];\n  };\n\n  var sendLogin = function sendLogin(_ref3) {\n    var token = _ref3[0],\n        sideStorage = _ref3[1];\n    var state = store.getState();\n    var application = state.application,\n        groupId = state.groupId,\n        page = state.page,\n        referrer = state.referrer,\n        mobile = state.mobile;\n    var payload = {\n      token: token.tokenType + \" \" + token.accessToken,\n      customer: typeof customerDataProvider === 'function' ? parseCustomerUpdate(customerDataProvider()) : {},\n      customer_side_storage: sideStorage,\n      is_mobile: mobile,\n      application: pick(['name', 'version'], application)\n    };\n\n    if (typeof groupId === 'number') {\n      payload.group_id = groupId;\n    }\n\n    if (application.channelType) {\n      payload.application.channel_type = application.channelType;\n    }\n\n    if (page !== null) {\n      sentPage = page;\n      payload.customer_page = page;\n    }\n\n    if (referrer !== null) {\n      payload.referrer = referrer;\n    }\n\n    return Promise.race([sendLoginFlowRequest(store, LOGIN, payload), delay(15 * 1000).then(function () {\n      return Promise.reject(createError({\n        message: 'Request timed out.',\n        code: REQUEST_TIMEOUT\n      }));\n    })]);\n  };\n\n  var updateCustomerPageIfNeeded = function updateCustomerPageIfNeeded() {\n    var _store$getState = store.getState(),\n        page = _store$getState.page;\n\n    if (sentPage !== page) {\n      sendLoginFlowRequest(store, UPDATE_CUSTOMER_PAGE$1, page).catch(noop);\n    }\n\n    sentPage = null;\n  };\n\n  return function (_store) {\n    // after switching to callbags, we should be able to use smth similar to redux-observable\n    // and thus just use store given to epic\n    store = _store;\n\n    if (task) {\n      task.cancel();\n    }\n\n    task = taskChain([getTokenAndSideStorage, dispatchSelfId, sendLogin], function (loginResponse) {\n      task = null;\n      backoff.reset(); // TODO: rethink if this should be handled by SDK consumer\n\n      updateCustomerPageIfNeeded();\n      store.dispatch(loginSuccess(loginResponse));\n    }, function (error) {\n      if (process.env.NODE_ENV !== 'production') {\n        console.error('[Customer SDK] Login flow has thrown code', error.code, 'with', error);\n      }\n\n      switch (error.code) {\n        case AUTHENTICATION:\n          auth.getFreshToken();\n          reconnect$$1();\n          return;\n\n        case CONNECTION_LOST:\n          // this is connectivity problem, not a server error\n          // and is taken care of in socket module\n          // as it has its own backoff implementation\n          return;\n\n        case MISDIRECTED_CONNECTION:\n          // socket gets reinitialized on this anyway, so just ignore it here\n          return;\n        // those are auth errors, we should maybe export those constants from the auth package\n\n        case 'SSO_IDENTITY_EXCEPTION':\n        case 'SSO_OAUTH_EXCEPTION':\n          if (error.message === 'server_error' || error.message === 'temporarily_unavailable') {\n            reconnect$$1();\n            return;\n          }\n\n          destroy$$1(error.message);\n          return;\n\n        case IDENTITY_MISMATCH:\n        case CUSTOMER_BANNED$1:\n        case USERS_LIMIT_REACHED:\n        case WRONG_PRODUCT_VERSION:\n          destroy$$1(error.code.toLowerCase());\n          return;\n\n        default:\n          reconnect$$1();\n          return;\n      }\n    });\n  };\n}\n\nvar checkGoals = function checkGoals(store, auth, sessionFields) {\n  return auth.getToken().then(function (token) {\n    var state = store.getState();\n\n    if (getSelfId(state) === null) {\n      store.dispatch(setSelfId(token.entityId));\n    }\n\n    var page = state.page;\n\n    if (!page || !page.url) {\n      return;\n    }\n\n    var query = buildQueryString({\n      license_id: state.licenseId\n    });\n    var payload = {\n      // TODO: remove sending customer_fields once API releases their changes\n      customer_fields: sessionFields || {},\n      session_fields: parseCustomerSessionFields(sessionFields || {}),\n      group_id: state.groupId || 0,\n      page_url: page.url\n    };\n    return unfetch(getServerUrl(state) + \"/action/\" + CHECK_GOALS$1 + \"?\" + query, {\n      method: 'POST',\n      headers: {\n        'Content-Type': 'application/json',\n        Authorization: token.tokenType + \" \" + token.accessToken\n      },\n      body: JSON.stringify(payload)\n    }).then(function () {\n      // TODO: we should actually normalize response here\n      return undefined;\n    });\n  });\n};\n\nvar failAllRequests = function failAllRequests(_ref, reason) {\n  var getState = _ref.getState,\n      dispatch = _ref.dispatch;\n  var state = getState();\n  var requests = getAllRequests(state);\n  dispatch({\n    type: FAIL_ALL_REQUESTS,\n    payload: {\n      rejects: Object.keys(requests).map(function (requestId) {\n        return requests[requestId].reject;\n      }),\n      reason: reason\n    }\n  });\n};\n\nvar failRequest = function failRequest(_ref2, requestAction, error) {\n  var getState = _ref2.getState,\n      dispatch = _ref2.dispatch;\n  var requestId = requestAction.payload.id;\n  dispatch({\n    type: REQUEST_FAILED,\n    payload: {\n      id: requestId,\n      reject: getState().requests[requestId].reject,\n      error: error\n    }\n  });\n};\n\nvar SUCCESS = Object.freeze({\n  success: true\n});\n\nvar parseCommonEventProps = function parseCommonEventProps(threadId, event) {\n  var parsed = {\n    id: event.id,\n    authorId: event.author_id,\n    createdAt: event.created_at,\n    threadId: threadId,\n    properties: event.properties || {}\n  };\n\n  if (event.custom_id !== undefined) {\n    parsed.customId = event.custom_id;\n  }\n\n  return parsed;\n};\n\nvar downsizeWithRatio = function downsizeWithRatio(max, dimensions) {\n  var _ref;\n\n  var biggerProp;\n  var smallerProp;\n  var bigger;\n  var smaller;\n\n  if (dimensions.height > dimensions.width) {\n    biggerProp = 'height';\n    smallerProp = 'width';\n    bigger = dimensions.height;\n    smaller = dimensions.width;\n  } else {\n    biggerProp = 'width';\n    smallerProp = 'height';\n    bigger = dimensions.width;\n    smaller = dimensions.height;\n  }\n\n  var ratio = max / bigger;\n  return _ref = {}, _ref[biggerProp] = Math.ceil(Math.min(bigger, max)), _ref[smallerProp] = Math.ceil(Math.min(ratio * smaller, smaller)), _ref;\n};\n\nvar parseImage = function parseImage(thread, image) {\n  return _extends({}, parseCommonEventProps(thread, image), {\n    type: FILE,\n    contentType: image.content_type,\n    url: image.url,\n    name: image.name,\n    width: image.width,\n    height: image.height,\n    thumbnails: {\n      default: _extends({\n        url: image.thumbnail_url\n      }, downsizeWithRatio(300, image)),\n      high: _extends({\n        url: image.thumbnail2x_url\n      }, downsizeWithRatio(600, image))\n    }\n  });\n};\n\nvar parseFile = function parseFile(thread, file) {\n  if (file.width !== undefined && file.height !== undefined) {\n    return parseImage(thread, file);\n  }\n\n  return _extends({}, parseCommonEventProps(thread, file), {\n    type: FILE,\n    contentType: file.content_type,\n    url: file.url,\n    name: file.name\n  });\n};\n\nvar parseFilledForm = function parseFilledForm(thread, filledForm) {\n  return _extends({}, parseCommonEventProps(thread, filledForm), {\n    type: FILLED_FORM,\n    formId: filledForm.form_id,\n    fields: filledForm.fields.map(function (field) {\n      switch (field.type) {\n        case 'group_chooser':\n          {\n            if (!field.answer) {\n              return field;\n            }\n\n            var _field$answer = field.answer,\n                groupId = _field$answer.group_id,\n                answer = _objectWithoutPropertiesLoose(_field$answer, [\"group_id\"]);\n\n            return _extends({}, field, {\n              answer: _extends({}, answer, {\n                groupId: groupId\n              })\n            });\n          }\n\n        default:\n          return field;\n      }\n    })\n  });\n};\n\nvar parseMessage = function parseMessage(thread, message) {\n  return _extends({}, parseCommonEventProps(thread, message), {\n    type: MESSAGE,\n    text: message.text\n  });\n};\n\nvar parseRichMessageElement = function parseRichMessageElement(element) {\n  var parsed = {};\n\n  if (typeof element.title === 'string') {\n    parsed.title = element.title;\n  }\n\n  if (typeof element.subtitle === 'string') {\n    parsed.subtitle = element.subtitle;\n  }\n\n  if (element.image) {\n    // TODO: we should reuse parseImage here\n    var image = element.image;\n    parsed.image = {\n      url: image.url,\n      name: image.name\n    };\n  }\n\n  if (element.buttons) {\n    parsed.buttons = element.buttons.map(function (serverButton) {\n      switch (serverButton.type) {\n        case 'message':\n        case 'phone':\n          {\n            return {\n              type: serverButton.type,\n              text: serverButton.text,\n              postbackId: serverButton.postback_id,\n              userIds: serverButton.user_ids,\n              value: serverButton.value,\n              role: serverButton.role || 'default'\n            };\n          }\n\n        case 'url':\n          {\n            var button = {\n              type: serverButton.type,\n              text: serverButton.text,\n              postbackId: serverButton.postback_id,\n              userIds: serverButton.user_ids,\n              value: serverButton.value,\n              role: serverButton.role || 'default'\n            };\n\n            if (serverButton.target) {\n              button.target = serverButton.target;\n            }\n\n            return button;\n          }\n\n        case 'webview':\n          {\n            var _button = {\n              type: serverButton.type,\n              text: serverButton.text,\n              postbackId: serverButton.postback_id,\n              userIds: serverButton.user_ids,\n              value: serverButton.value,\n              role: serverButton.role || 'default'\n            };\n\n            if (typeof serverButton.webview_height === 'string') {\n              _button.webviewHeight = serverButton.webview_height;\n            }\n\n            return _button;\n          }\n\n        default:\n          {\n            return {\n              text: serverButton.text,\n              postbackId: serverButton.postback_id,\n              userIds: serverButton.user_ids,\n              role: serverButton.role || 'default'\n            };\n          }\n      }\n    });\n  }\n\n  return parsed;\n};\n\nvar parseRichMessage = function parseRichMessage(thread, richMessage) {\n  switch (richMessage.template_id) {\n    case 'cards':\n    case 'quick_replies':\n    case 'sticker':\n      return _extends({}, parseCommonEventProps(thread, richMessage), {\n        type: RICH_MESSAGE,\n        template: richMessage.template_id,\n        elements: richMessage.elements.map(parseRichMessageElement)\n      });\n\n    default:\n      return null;\n  }\n};\n\nvar parseSystemMessage = function parseSystemMessage(thread, systemMessage) {\n  var parsed = _extends({}, parseCommonEventProps(thread, _extends({}, systemMessage, {\n    author_id: 'system'\n  })), {\n    type: SYSTEM_MESSAGE,\n    text: systemMessage.text,\n    systemMessageType: systemMessage.system_message_type\n  });\n\n  if (systemMessage.text_vars) {\n    parsed.textVars = systemMessage.text_vars;\n  }\n\n  return parsed;\n};\n\nvar parseEvent$1 = function parseEvent(thread, event) {\n  switch (event.type) {\n    case FILE:\n      return parseFile(thread, event);\n\n    case FILLED_FORM:\n      return parseFilledForm(thread, event);\n\n    case MESSAGE:\n      return parseMessage(thread, event);\n\n    case RICH_MESSAGE:\n      return parseRichMessage(thread, event);\n\n    case SYSTEM_MESSAGE:\n      return parseSystemMessage(thread, event);\n\n    default:\n      return null;\n  }\n};\n\nvar parseGreeting = function parseGreeting(greeting) {\n  return {\n    id: greeting.id,\n    addon: greeting.addon || null,\n    uniqueId: greeting.unique_id,\n    displayedFirstTime: greeting.displayed_first_time,\n    accepted: greeting.accepted || false,\n    // threadId is typed as nonoptional string but for greetings it doesn't exist\n    event: parseEvent$1(null, greeting.event),\n    agent: {\n      id: greeting.agent.id,\n      name: greeting.agent.name,\n      avatar: greeting.agent.avatar,\n      jobTitle: greeting.agent.job_title,\n      isBot: greeting.agent.is_bot || false\n    }\n  };\n}; // so it's better to rely on a custom implementation\n\n\nvar parseCustomerSessionFields$1 = function parseCustomerSessionFields(sessionFields) {\n  return sessionFields.reduce(function (acc, field) {\n    var _Object$keys = Object.keys(field),\n        key = _Object$keys[0];\n\n    acc[key] = field[key];\n    return acc;\n  }, {});\n};\n\nvar parseAccess = function parseAccess(access) {\n  if (access === void 0) {\n    access = {};\n  }\n\n  return access.group_ids ? {\n    groupIds: access.group_ids\n  } : {};\n};\n\nvar getEventsSeenUpToMap = function getEventsSeenUpToMap(users) {\n  return mapValues(function (user) {\n    return user.events_seen_up_to ? user.events_seen_up_to : null;\n  }, keyBy('id', users));\n};\n\nvar parseThread = function parseThread(chatId, thread) {\n  var properties = thread.properties || {};\n  return {\n    id: thread.id,\n    chatId: chatId,\n    active: thread.active,\n    access: parseAccess(thread.access),\n    createdAt: thread.created_at,\n    userIds: thread.user_ids,\n    events: thread.events.map(function (event) {\n      return parseEvent$1(thread.id, event);\n    }).filter(Boolean),\n    properties: properties,\n    previousThreadId: thread.previous_thread_id || null,\n    nextThreadId: thread.next_thread_id || null,\n    queue: thread.queue ? parseQueue(thread.queue) : null\n  };\n};\n\nvar parseIncomingChat = function parseIncomingChat(chat) {\n  return {\n    id: chat.id,\n    access: parseAccess(chat.access),\n    users: chat.users.map(parseChatUser),\n    properties: chat.properties || {},\n    thread: parseThread(chat.id, chat.thread),\n    eventsSeenUpToMap: getEventsSeenUpToMap(chat.users)\n  };\n};\n\nvar parseChatAgent = function parseChatAgent(agent) {\n  return {\n    id: agent.id,\n    // keep literal here, so every non-customer gets treated as agent\n    // currently there are only 2 types of users - customer & agent (bots have type: \"agent\")\n    // so this is purely defensive measure, trying to stay future-proof\n    type: AGENT,\n    name: agent.name,\n    avatar: agent.avatar,\n    jobTitle: agent.job_title,\n    present: agent.present\n  };\n};\n\nvar parseCustomerOptionalProps = function parseCustomerOptionalProps(customerProps) {\n  var optionalProps = pickOwn(['avatar', 'email', 'name'], customerProps);\n\n  if (customerProps.session_fields) {\n    optionalProps.sessionFields = parseCustomerSessionFields$1(customerProps.session_fields);\n  }\n\n  return optionalProps;\n};\n\nvar parseCustomerCommonProps = function parseCustomerCommonProps(customer) {\n  var optionalProps = parseCustomerOptionalProps(customer);\n  return _extends({\n    id: customer.id,\n    type: CUSTOMER\n  }, optionalProps, {\n    sessionFields: optionalProps.sessionFields || {}\n  });\n};\n\nvar parseChatCustomer = function parseChatCustomer(customer) {\n  return _extends({}, parseCustomerCommonProps(customer), {\n    present: customer.present\n  });\n};\n\nvar parseCustomer = function parseCustomer(customer) {\n  var statistics = customer.statistics;\n  return _extends({}, parseCustomerCommonProps(customer), {\n    statistics: {\n      chatsCount: statistics.chats_count,\n      threadsCount: statistics.threads_count,\n      visitsCount: statistics.visits_count,\n      pageViewsCount: statistics.page_views_count,\n      greetingsShownCount: statistics.greetings_shown_count,\n      greetingsAcceptedCount: statistics.greetings_accepted_count\n    }\n  });\n};\n\nvar parsePredictedAgent = function parsePredictedAgent(agent) {\n  return {\n    id: agent.id,\n    type: AGENT,\n    name: agent.name,\n    avatar: agent.avatar,\n    jobTitle: agent.job_title,\n    isBot: agent.is_bot\n  };\n};\n\nvar parseQueueUpdate = function parseQueueUpdate(queueUpdate) {\n  return {\n    position: queueUpdate.position,\n    waitTime: queueUpdate.wait_time\n  };\n};\n\nvar parseQueue = function parseQueue(queue) {\n  return _extends({}, parseQueueUpdate(queue), {\n    queuedAt: queue.queued_at\n  });\n};\n\nvar parseChatUser = function parseChatUser(user) {\n  return user.type === CUSTOMER ? parseChatCustomer(user) : parseChatAgent(user);\n};\n\nvar parseGroupStatus = function parseGroupStatus(status) {\n  return status === 'offline' ? 'offline' : 'online';\n};\n\nvar _FAIL_ALL_REQUESTS_ME;\n\nvar SMALL_RECONNECT_DELAY = 100;\nvar FAIL_ALL_REQUESTS_MESSAGES = (_FAIL_ALL_REQUESTS_ME = {}, _FAIL_ALL_REQUESTS_ME[CONNECTION_LOST] = 'Connection lost.', _FAIL_ALL_REQUESTS_ME[MISDIRECTED_CONNECTION] = 'Connected to wrong region.', _FAIL_ALL_REQUESTS_ME);\n\nvar updateStateIfNeeded = function updateStateIfNeeded(store, action) {\n  var state = store.getState();\n\n  switch (action.type) {\n    case PUSH_RESPONSE_RECEIVED:\n    case PUSH_RECEIVED:\n      switch (action.payload.action) {\n        case CHAT_DEACTIVATED:\n          store.dispatch(setChatActive(action.payload.payload.chatId, false));\n          return;\n\n        case INCOMING_CHAT:\n          store.dispatch(setChatActive(action.payload.payload.chat.id, true));\n          return;\n\n        default:\n          return;\n      }\n\n    case RESPONSE_RECEIVED:\n      switch (action.payload.action) {\n        case LIST_CHATS:\n          action.payload.payload.chatsSummary.filter(function (_ref) {\n            var id = _ref.id,\n                active = _ref.active;\n            return isChatActive(state, id) !== active;\n          }).forEach(function (_ref2) {\n            var id = _ref2.id,\n                active = _ref2.active;\n            store.dispatch(setChatActive(id, active));\n          });\n          return;\n\n        default:\n          return;\n      }\n\n  }\n};\n\nvar sendRequest$1 = function sendRequest$$1(socket, _ref3) {\n  var _ref3$payload = _ref3.payload,\n      id = _ref3$payload.id,\n      request = _ref3$payload.request;\n\n  var frame = _extends({\n    request_id: id\n  }, request);\n\n  socket.emit(frame);\n};\n\nvar emitUsers = function emitUsers(emit, users) {\n  users.forEach(function (user) {\n    if ('present' in user) {\n      var rest = _objectWithoutPropertiesLoose(user, [\"present\"]);\n\n      emit('user_data', rest);\n      return;\n    }\n\n    if (user.type === CUSTOMER) {\n      var _rest = _objectWithoutPropertiesLoose(user, [\"statistics\"]);\n\n      emit('user_data', _rest);\n      return;\n    }\n\n    emit('user_data', user);\n  });\n};\n\nvar handleMulticast = function handleMulticast(emit, _ref4) {\n  var type = _ref4.type,\n      content = _ref4.content;\n\n  if (type !== 'lc2') {\n    return;\n  }\n\n  if (content.name === 'groups_update' && 'groups' in content && !isEmpty(content.groups)) {\n    var _content$groups = content.groups,\n        group = _content$groups[0];\n    var availability = parseGroupStatus(group.status);\n    emit('availability_updated', {\n      availability: availability\n    });\n  }\n};\n\nvar handlePush = function handlePush(_ref5, _ref6) {\n  var emit = _ref5.emit,\n      store = _ref5.store;\n  var payload = _ref6.payload;\n\n  switch (payload.action) {\n    case THREAD_PROPERTIES_UPDATED:\n      if (payload.payload.properties.lc2 && 'queue_pos' in payload.payload.properties.lc2) {\n        emit(QUEUE_POSITION_UPDATED, {\n          chatId: payload.payload.chatId,\n          threadId: payload.payload.threadId,\n          queue: {\n            position: payload.payload.properties.lc2.queue_pos,\n            waitTime: payload.payload.properties.lc2.queue_waiting_time\n          }\n        });\n      }\n\n      emit('thread_properties_updated', payload.payload);\n      return;\n\n    case CUSTOMER_SIDE_STORAGE_UPDATED:\n      saveSideStorage(store, payload.payload.customer_side_storage);\n      return;\n\n    case CUSTOMER_DISCONNECTED:\n      // each of those should currently lead to either reconnect or destroy call\n      // after receiving this push server closes the connection with us\n      // which results in SOCKET_DISCONNECTED action being dispatched\n      // we don't want to rely on this (nor we want to risk emitting 'disconnected' twice)\n      // so we should handle all cases ourselves and close the connection preemptively\n      switch (payload.payload.reason) {\n        case ACCESS_TOKEN_EXPIRED:\n          // we passthrough access_token_expired here, so pending requests receive CONNECTION_LOST error\n          // we could fail them with ACCESS_TOKEN_EXPIRED, but it could force people to handle it in special manner\n          // but actually they should handle it exactly like CONNECTION_LOST:\n          // a request could succeed, who knows, it has to be checked after being reconnected\n          store.dispatch(prefetchToken(true));\n          store.dispatch(reconnect(SMALL_RECONNECT_DELAY));\n          emit('disconnected', payload.payload);\n          break;\n\n        case CUSTOMER_BANNED:\n        case CUSTOMER_TEMPORARILY_BLOCKED:\n        case LICENSE_NOT_FOUND:\n        case PRODUCT_VERSION_CHANGED:\n        case TOO_MANY_CONNECTIONS:\n        case UNSUPPORTED_VERSION:\n          // this also emits `disconnected` event - but it's handled in response to this action by destroy handler\n          store.dispatch(destroy(payload.payload.reason));\n          break;\n\n        case MISDIRECTED_CONNECTION$1:\n          failAllRequests(store, MISDIRECTED_CONNECTION);\n          store.dispatch({\n            type: CHANGE_REGION,\n            payload: payload.payload.data\n          });\n          break;\n\n        case TOO_MANY_UNAUTHORIZED_CONNECTIONS$1:\n          // this should only really fail a `login` request - as it's the only one sent before authorization\n          // and login should reconnect on its own right now\n          failAllRequests(store, TOO_MANY_UNAUTHORIZED_CONNECTIONS);\n          break;\n\n        default:\n          store.dispatch(reconnect(SMALL_RECONNECT_DELAY));\n          emit('disconnected', payload.payload);\n          break;\n      }\n\n      return;\n\n    case INCOMING_CHAT:\n      emitUsers(emit, payload.payload.chat.users);\n      emit(payload.action, payload.payload);\n      return;\n\n    case INCOMING_EVENT:\n      if (payload.payload.event === null) {\n        return;\n      }\n\n      emit(payload.action, payload.payload);\n      return;\n\n    case INCOMING_TYPING_INDICATOR:\n      emit(payload.action, payload.payload);\n      return;\n\n    case INCOMING_MULTICAST:\n      handleMulticast(emit, payload.payload); // we passthrough this action even if it was already handled above\n\n      emit(payload.action, payload.payload);\n      return;\n\n    case USER_ADDED_TO_CHAT:\n      emitUsers(emit, [payload.payload.user]);\n      emit(payload.action, payload.payload);\n      return;\n\n    default:\n      emit(payload.action, payload.payload);\n      return;\n  }\n};\n\nvar handleResponse = function handleResponse(_ref7, _ref8) {\n  var emit = _ref7.emit;\n  var payload = _ref8.payload;\n\n  switch (payload.action) {\n    case CHAT_DEACTIVATED:\n      payload.resolve(SUCCESS);\n      return;\n\n    case GET_CHAT:\n      emitUsers(emit, payload.payload.users);\n      payload.resolve(payload.payload);\n      return;\n\n    case INCOMING_CHAT:\n      emitUsers(emit, payload.payload.chat.users);\n      payload.resolve(payload.payload);\n      return;\n\n    case INCOMING_EVENT:\n      payload.resolve(payload.payload.event);\n      return;\n\n    case LIST_CHATS:\n      emitUsers(emit, payload.payload.users);\n      payload.resolve(payload.payload);\n      return;\n\n    default:\n      payload.resolve(payload.payload);\n      return;\n  }\n};\n\nvar createSideEffectsHandler = function createSideEffectsHandler(_ref9) {\n  var auth = _ref9.auth,\n      customerDataProvider = _ref9.customerDataProvider,\n      emitter = _ref9.emitter,\n      socket = _ref9.socket;\n  var emit = emitter.emit;\n  var login = createLoginTask(auth, customerDataProvider); // TODO: using Store type here is a lie, middleware only provides MiddlewareAPI here\n\n  return function (action, store) {\n    switch (action.type) {\n      case CHANGE_REGION:\n        socket.reinitialize();\n        return;\n\n      case CHECK_GOALS:\n        checkGoals(store, auth, action.payload.sessionFields).catch(noop);\n        return;\n\n      case DESTROY:\n        {\n          var payload = action.payload;\n          socket.destroy();\n\n          if (payload.reason !== 'manual') {\n            emit('disconnected', payload);\n          }\n\n          emitter.off();\n          return;\n        }\n\n      case FAIL_ALL_REQUESTS:\n        {\n          var _action$payload = action.payload,\n              reason = _action$payload.reason,\n              rejects = _action$payload.rejects;\n          var error = {\n            message: FAIL_ALL_REQUESTS_MESSAGES[reason],\n            code: reason\n          };\n          rejects.forEach(function (reject) {\n            reject(createError(error));\n          });\n          return;\n        }\n\n      case LOGIN_SUCCESS:\n        {\n          var _action$payload2 = action.payload,\n              dynamicConfig = _action$payload2.dynamicConfig,\n              customer = _action$payload2.customer,\n              chats = _action$payload2.chats,\n              greeting = _action$payload2.greeting,\n              availability = _action$payload2.availability;\n\n          var eventData = _extends({\n            customer: customer,\n            availability: availability\n          }, greeting && {\n            greeting: greeting\n          });\n\n          Object.defineProperty(eventData, '__unsafeDynamicConfig', {\n            value: dynamicConfig\n          });\n          Object.defineProperty(eventData, '__unsafeChats', {\n            value: chats\n          });\n          emit('connected', eventData);\n          return;\n        }\n\n      case PAUSE_CONNECTION:\n        socket.disconnect();\n        return;\n\n      case PREFETCH_TOKEN:\n        if (action.payload.fresh) {\n          auth.getFreshToken().catch(noop);\n          return;\n        }\n\n        auth.hasToken().then(function (hasToken) {\n          if (!hasToken) {\n            return auth.getToken();\n          }\n\n          return auth.getToken().then(function (_ref10) {\n            var creationDate = _ref10.creationDate,\n                expiresIn = _ref10.expiresIn;\n            var ONE_HOUR = 60 * 60 * 1000; // check if the token is worth reusing\n            // we don't want to get disconnected in a moment because of expired token\n\n            if (creationDate + expiresIn - Date.now() > ONE_HOUR) {\n              return;\n            }\n\n            return auth.invalidate().then(auth.getFreshToken);\n          });\n        }).catch(noop);\n        return;\n\n      case PUSH_RECEIVED:\n        // TODO: this if doesn't seem to make much sense\n        // I'm too afraid to remove it right now though\n        if (action.payload.action === CUSTOMER_DISCONNECTED) {\n          handlePush({\n            emit: emit,\n            store: store\n          }, action);\n          return;\n        }\n\n        updateStateIfNeeded(store, action);\n        handlePush({\n          emit: emit,\n          store: store\n        }, action);\n        return;\n\n      case PUSH_RESPONSE_RECEIVED:\n        updateStateIfNeeded(store, action);\n        handleResponse({\n          emit: emit\n        }, action);\n        return;\n\n      case RECONNECT:\n        socket.reconnect(action.payload.delay);\n        return;\n\n      case REQUEST_FAILED:\n        {\n          var _action$payload3 = action.payload,\n              reject = _action$payload3.reject,\n              _error = _action$payload3.error;\n          reject(createError(_error));\n          return;\n        }\n\n      case RESPONSE_RECEIVED:\n        updateStateIfNeeded(store, action);\n        handleResponse({\n          emit: emit\n        }, action);\n        return;\n\n      case SEND_REQUEST:\n        {\n          var state = store.getState();\n\n          if (isDestroyed(state)) {\n            failRequest(store, action, {\n              code: 'SDK_DESTROYED',\n              message: 'SDK destroyed.'\n            });\n            return;\n          }\n\n          if (!isConnected(state) && action.payload.source !== 'login') {\n            failRequest(store, action, {\n              code: 'NO_CONNECTION',\n              message: 'No connection.'\n            });\n            return;\n          }\n\n          sendRequest$1(socket, action);\n        }\n        return;\n\n      case SET_SELF_ID:\n        emit('customer_id', action.payload.id);\n        return;\n\n      case SOCKET_DISCONNECTED:\n        emit('disconnected', {\n          reason: 'connection_lost'\n        });\n        return;\n\n      case SOCKET_CONNECTED:\n        login(store);\n        return;\n\n      case SOCKET_RECOVERED:\n        // don't emit if from consumer's perspective we haven't been connected\n        if (!isConnected(store.getState())) {\n          return;\n        }\n\n        emit('connection_recovered');\n        return;\n\n      case SOCKET_UNSTABLE:\n        // don't emit if from consumer's perspective we haven't been connected\n        if (!isConnected(store.getState())) {\n          return;\n        }\n\n        emit('connection_unstable');\n        return;\n\n      case START_CONNECTION:\n        socket.connect();\n        store.dispatch(prefetchToken());\n        return;\n\n      case UPDATE_CUSTOMER_PAGE:\n        if (!isConnected(store.getState())) {\n          return;\n        }\n\n        sendRequestAction(store, sendRequest(UPDATE_CUSTOMER_PAGE$1, action.payload)).catch(noop);\n        return;\n\n      default:\n        return;\n    }\n  };\n};\n\nvar HISTORY_EVENT_COUNT_TARGET = 25;\n\nvar createState = function createState() {\n  return {\n    status: 'idle',\n    queuedTasks: [],\n    nextPageId: null\n  };\n};\n\nvar createChatHistoryIterator = function createChatHistoryIterator(sdk, chatId) {\n  var historyState = createState();\n\n  var next = function next(resolve, reject) {\n    switch (historyState.status) {\n      case 'idle':\n        historyState.status = 'fetching';\n        sdk.listThreads({\n          chatId: chatId,\n          minEventsCount: HISTORY_EVENT_COUNT_TARGET,\n          pageId: historyState.nextPageId || undefined\n        }).then(function (_ref) {\n          var threads = _ref.threads,\n              nextPageId = _ref.nextPageId;\n          historyState.nextPageId = nextPageId;\n\n          if (!historyState.nextPageId) {\n            historyState.status = 'done';\n            resolve({\n              value: {\n                threads: [].concat(threads).reverse()\n              },\n              done: true\n            });\n          } else {\n            historyState.status = 'idle';\n            resolve({\n              value: {\n                threads: [].concat(threads).reverse()\n              },\n              done: false\n            });\n          }\n\n          var queuedTask = historyState.queuedTasks.shift();\n\n          if (!queuedTask) {\n            return;\n          }\n\n          next(queuedTask.resolve, queuedTask.reject);\n        }, function (err) {\n          var queuedTasks = historyState.queuedTasks;\n          historyState.status = 'idle';\n          historyState.queuedTasks = [];\n          reject(err);\n          queuedTasks.forEach(function (queuedTask) {\n            return queuedTask.reject(err);\n          });\n        });\n        return;\n\n      case 'fetching':\n        historyState.queuedTasks.push({\n          resolve: resolve,\n          reject: reject\n        });\n        return;\n\n      case 'done':\n        resolve({\n          value: undefined,\n          done: true\n        });\n        return;\n    }\n  };\n\n  return {\n    next: function (_next) {\n      function next() {\n        return _next.apply(this, arguments);\n      }\n\n      next.toString = function () {\n        return _next.toString();\n      };\n\n      return next;\n    }(function () {\n      return new Promise(next);\n    })\n  };\n};\n\nvar initialize = function initialize(store, emitter) {\n  var state = store.getState();\n  var url = getServerUrl(state) + \"/rtm/sjs\";\n  return createPlatformClient(url, {\n    query: {\n      license_id: state.licenseId\n    },\n    emitter: emitter\n  });\n};\n\nvar createSocketClient = function createSocketClient(store) {\n  var emitter = mitt();\n  var client = initialize(store, emitter);\n  return _extends({}, Object.keys(client).reduce(function (proxy, method) {\n    proxy[method] = function () {\n      var _client;\n\n      return (_client = client)[method].apply(_client, arguments);\n    };\n\n    return proxy;\n  }, {}), {\n    reinitialize: function reinitialize() {\n      client.disconnect();\n      client = initialize(store, emitter);\n      client.connect();\n    }\n  });\n};\n\nvar parseChatPropertiesDeletedPush = function parseChatPropertiesDeletedPush(payload) {\n  return {\n    chatId: payload.chat_id,\n    properties: payload.properties\n  };\n};\n\nvar parseChatPropertiesUpdatedPush = function parseChatPropertiesUpdatedPush(payload) {\n  return {\n    chatId: payload.chat_id,\n    properties: payload.properties\n  };\n};\n\nvar parseChatTransferredPush = function parseChatTransferredPush(payload) {\n  var basePayload = {\n    chatId: payload.chat_id,\n    threadId: payload.thread_id,\n    transferredTo: _extends({}, payload.transferred_to.agent_ids && {\n      agentIds: payload.transferred_to.agent_ids\n    }, payload.transferred_to.group_ids && {\n      groupIds: payload.transferred_to.group_ids\n    }),\n    queue: payload.queue ? parseQueue(payload.queue) : null\n  };\n\n  if (payload.reason === 'manual') {\n    return _extends({}, basePayload, {\n      reason: payload.reason,\n      requesterId: payload.requester_id\n    });\n  }\n\n  return _extends({}, basePayload, {\n    reason: payload.reason\n  });\n};\n\nvar parseCustomerPageUpdatedPush = function parseCustomerPageUpdatedPush(payload) {\n  return {\n    url: payload.url,\n    title: payload.title,\n    timestamp: payload.timestamp * 1000\n  };\n};\n\nvar parseCustomerUpdatedPush = function parseCustomerUpdatedPush(payload) {\n  return {\n    customer: _extends({\n      id: payload.customer.id\n    }, parseCustomerOptionalProps(payload.customer))\n  };\n};\n\nvar parseEventPropertiesDeletedPush = function parseEventPropertiesDeletedPush(payload) {\n  return {\n    chatId: payload.chat_id,\n    threadId: payload.thread_id,\n    eventId: payload.event_id,\n    properties: payload.properties\n  };\n};\n\nvar parseEventPropertiesUpdatedPush = function parseEventPropertiesUpdatedPush(payload) {\n  return {\n    chatId: payload.chat_id,\n    threadId: payload.thread_id,\n    eventId: payload.event_id,\n    properties: payload.properties\n  };\n};\n\nvar parseEventUpdatedPush = function parseEventUpdatedPush(payload) {\n  var threadId = payload.thread_id;\n  return {\n    chatId: payload.chat_id,\n    threadId: threadId,\n    event: parseEvent$1(threadId, payload.event)\n  };\n};\n\nvar parseEventsMarkedAsSeenPush = function parseEventsMarkedAsSeenPush(payload) {\n  return {\n    chatId: payload.chat_id,\n    userId: payload.user_id,\n    seenUpTo: payload.seen_up_to\n  };\n};\n\nvar parseGreetingAcceptedPush = function parseGreetingAcceptedPush(payload) {\n  return {\n    uniqueId: payload.unique_id\n  };\n};\n\nvar parseGetChatResponse = function parseGetChatResponse(payload) {\n  return parseIncomingChat(payload);\n};\n\nvar parseIncomingChatPush = function parseIncomingChatPush(payload) {\n  return {\n    chat: parseIncomingChat(payload.chat)\n  };\n};\n\nvar parseIncomingEventPush = function parseIncomingEventPush(payload) {\n  return {\n    chatId: payload.chat_id,\n    event: parseEvent$1(payload.thread_id, payload.event)\n  };\n};\n\nvar parseIncomingGreetingPush = function parseIncomingGreetingPush(payload) {\n  return parseGreeting(payload);\n};\n\nvar parseIncomingRichMessagePostbackPush = function parseIncomingRichMessagePostbackPush(payload) {\n  return {\n    userId: payload.user_id,\n    chatId: payload.chat_id,\n    threadId: payload.thread_id,\n    eventId: payload.event_id,\n    postback: payload.postback\n  };\n};\n\nvar parseIncomingTypingIndicatorPush = function parseIncomingTypingIndicatorPush(payload) {\n  var chatId = payload.chat_id,\n      typingIndicator = payload.typing_indicator;\n  return {\n    chatId: chatId,\n    typingIndicator: {\n      authorId: typingIndicator.author_id,\n      isTyping: typingIndicator.is_typing\n    }\n  };\n};\n\nvar parseQueuePositionUpdatedPush = function parseQueuePositionUpdatedPush(payload) {\n  return {\n    chatId: payload.chat_id,\n    threadId: payload.thread_id,\n    queue: parseQueueUpdate(payload.queue)\n  };\n};\n\nvar parseThreadPropertiesDeletedPush = function parseThreadPropertiesDeletedPush(payload) {\n  return {\n    chatId: payload.chat_id,\n    threadId: payload.thread_id,\n    properties: payload.properties\n  };\n};\n\nvar parseThreadPropertiesUpdatedPush = function parseThreadPropertiesUpdatedPush(payload) {\n  return {\n    chatId: payload.chat_id,\n    threadId: payload.thread_id,\n    properties: payload.properties\n  };\n};\n\nvar parseUserAddedToChatPush = function parseUserAddedToChatPush(payload) {\n  return {\n    chatId: payload.chat_id,\n    user: parseChatUser(payload.user),\n    present: payload.user.present\n  };\n};\n\nvar parseUserRemovedFromChatPush = function parseUserRemovedFromChatPush(payload) {\n  return {\n    chatId: payload.chat_id,\n    userId: payload.user_id\n  };\n};\n\nvar parseFields = function parseFields(fields) {\n  return fields.map(function (field) {\n    switch (field.type) {\n      case 'group_chooser':\n        return _extends({}, field, {\n          options: field.options.map(function (_ref) {\n            var groupId = _ref.group_id,\n                option = _objectWithoutPropertiesLoose(_ref, [\"group_id\"]);\n\n            return _extends({}, option, {\n              groupId: groupId\n            });\n          })\n        });\n\n      case 'rating':\n        {\n          var commentLabel = field.comment_label,\n              parsed = _objectWithoutPropertiesLoose(field, [\"comment_label\"]);\n\n          return _extends({}, parsed, {\n            commentLabel: commentLabel\n          });\n        }\n\n      default:\n        return field;\n    }\n  });\n};\n\nvar parseTicketFormFields = function parseTicketFormFields(fields) {\n  var withFakeIds = fields.map(function (field, index) {\n    return _extends({}, field, {\n      id: String(index)\n    });\n  });\n  return parseFields(withFakeIds);\n};\n\nvar parseGetFormResponse = function parseGetFormResponse(payload) {\n  if (!payload.enabled) {\n    return payload;\n  }\n\n  return _extends({}, payload, {\n    form: 'id' in payload.form.fields[0] ? {\n      id: payload.form.id,\n      fields: parseFields(payload.form.fields)\n    } : {\n      // TODO: should we fake id for this one?\n      id: 'ticket',\n      fields: parseTicketFormFields(payload.form.fields)\n    }\n  });\n};\n\nvar parseGetUrlInfoResponse = function parseGetUrlInfoResponse(payload) {\n  var urlInfo = {\n    url: payload.url\n  };\n\n  if (payload.title) {\n    urlInfo.title = payload.title;\n  }\n\n  if (payload.description) {\n    urlInfo.description = payload.description;\n  }\n\n  if (payload.image_url) {\n    urlInfo.imageUrl = \"https://\" + payload.image_url;\n\n    if (payload.image_width && payload.image_height) {\n      urlInfo.imageWidth = payload.image_width;\n      urlInfo.imageHeight = payload.image_height;\n    }\n  }\n\n  return urlInfo;\n};\n\nvar getAvailabilityBasedOnDynamicConfig = function getAvailabilityBasedOnDynamicConfig(_ref2) {\n  var onlineGroups = _ref2.online_groups_ids,\n      customerGroups = _ref2.customer_groups; // this might be missing if all groups are offline\n\n  if (!onlineGroups) {\n    return 'offline';\n  }\n\n  var monitoringGroupId = customerGroups.monitoring.id;\n  return includes(monitoringGroupId, onlineGroups) ? 'online' : 'offline';\n};\n\nvar parseListChatsResponse = function parseListChatsResponse(payload) {\n  var chatsSummary = payload.chats_summary.map(function (_ref3) {\n    var id = _ref3.id,\n        active = _ref3.active,\n        access = _ref3.access,\n        lastThreadCreatedAt = _ref3.last_thread_created_at,\n        lastThreadId = _ref3.last_thread_id,\n        lastEventsPerType = _ref3.last_event_per_type,\n        _ref3$properties = _ref3.properties,\n        properties = _ref3$properties === void 0 ? {} : _ref3$properties,\n        users = _ref3.users;\n    var chatSummary = {\n      id: id,\n      active: active,\n      access: parseAccess(access),\n      properties: properties,\n      users: users.map(parseChatUser),\n      lastThreadId: lastThreadId || null,\n      lastThreadCreatedAt: lastThreadCreatedAt || null,\n      eventsSeenUpToMap: getEventsSeenUpToMap(users)\n    };\n\n    if (!lastEventsPerType) {\n      return chatSummary;\n    }\n\n    chatSummary.lastEventsPerType = mapValues(function (lastEventPerType) {\n      return parseEvent$1(lastEventPerType.thread_id, lastEventPerType.event);\n    }, lastEventsPerType);\n    var refinedLastEventsPerType = lastEventsPerType;\n    var lastEventSummariesArray = Object.keys(refinedLastEventsPerType).map(function (eventType) {\n      return refinedLastEventsPerType[eventType];\n    });\n    var lastEventSummary = last(lastEventSummariesArray.sort(function (eventSummaryA, eventSummaryB) {\n      return eventSummaryA.thread_id === eventSummaryB.thread_id ? stringCompare(eventSummaryA.event.created_at, eventSummaryB.event.created_at) : stringCompare(eventSummaryA.thread_created_at, eventSummaryB.thread_created_at);\n    }));\n\n    if (lastEventSummary) {\n      chatSummary.lastEvent = chatSummary.lastEventsPerType[lastEventSummary.event.type];\n    }\n\n    return chatSummary;\n  });\n  return {\n    chatsSummary: numericSortBy(function (_ref4) {\n      var lastEvent = _ref4.lastEvent,\n          order = _ref4.order;\n      return -1 * (lastEvent !== undefined ? lastEvent.timestamp : order);\n    }, chatsSummary),\n    totalChats: payload.total_chats,\n    users: uniqBy(function (user) {\n      return user.id;\n    }, flatMap(function (summary) {\n      return summary.users;\n    }, chatsSummary)),\n    previousPageId: payload.previous_page_id || null,\n    nextPageId: payload.next_page_id || null\n  };\n};\n\nvar parseListGroupStatusesResponse = function parseListGroupStatusesResponse(payload) {\n  return payload.groups_status;\n};\n\nvar parseListThreadsResponse = function parseListThreadsResponse(request, payload) {\n  return {\n    threads: payload.threads.map(function (thread) {\n      return parseThread(request.payload.chat_id, thread);\n    }),\n    previousPageId: payload.previous_page_id || null,\n    nextPageId: payload.next_page_id || null\n  };\n};\n\nvar parseLoginResponse = function parseLoginResponse(payload) {\n  var dynamicConfig = payload.__priv_dynamic_config,\n      chats = payload.chats;\n  var greeting = payload.greeting || dynamicConfig.greeting; // TODO: remove the fallback after API release the new greeting object position to the prod env\n\n  return _extends({\n    dynamicConfig: dynamicConfig,\n    customer: parseCustomer(payload.customer),\n    availability: getAvailabilityBasedOnDynamicConfig(dynamicConfig),\n    chats: chats.map(function (chat) {\n      return {\n        id: chat.chat_id,\n        active: 'has_active_thread' in chat ? chat.has_active_thread : // temporary fallback, waiting for API to move this flag into `chats` array\n        payload.has_active_thread,\n        hasUnreadEvents: chat.has_unread_events\n      };\n    })\n  }, greeting && {\n    greeting: parseGreeting(greeting)\n  });\n};\n\nvar parsePush = function parsePush(push) {\n  switch (push.action) {\n    case CHAT_DEACTIVATED:\n      return {\n        action: push.action,\n        payload: {\n          chatId: push.payload.chat_id\n        }\n      };\n\n    case CHAT_PROPERTIES_DELETED:\n      return {\n        action: push.action,\n        payload: parseChatPropertiesDeletedPush(push.payload)\n      };\n\n    case CHAT_PROPERTIES_UPDATED:\n      return {\n        action: push.action,\n        payload: parseChatPropertiesUpdatedPush(push.payload)\n      };\n\n    case CHAT_TRANSFERRED:\n      return {\n        action: push.action,\n        payload: parseChatTransferredPush(push.payload)\n      };\n\n    case CUSTOMER_SIDE_STORAGE_UPDATED:\n      return {\n        action: push.action,\n        payload: push.payload\n      };\n\n    case CUSTOMER_DISCONNECTED:\n      return {\n        action: push.action,\n        payload: push.payload\n      };\n\n    case CUSTOMER_PAGE_UPDATED:\n      return {\n        action: push.action,\n        payload: parseCustomerPageUpdatedPush(push.payload)\n      };\n\n    case CUSTOMER_UPDATED:\n      return {\n        action: push.action,\n        payload: parseCustomerUpdatedPush(push.payload)\n      };\n\n    case EVENT_PROPERTIES_DELETED:\n      return {\n        action: push.action,\n        payload: parseEventPropertiesDeletedPush(push.payload)\n      };\n\n    case EVENT_PROPERTIES_UPDATED:\n      return {\n        action: push.action,\n        payload: parseEventPropertiesUpdatedPush(push.payload)\n      };\n\n    case EVENT_UPDATED:\n      return {\n        action: push.action,\n        payload: parseEventUpdatedPush(push.payload)\n      };\n\n    case EVENTS_MARKED_AS_SEEN:\n      return {\n        action: push.action,\n        payload: parseEventsMarkedAsSeenPush(push.payload)\n      };\n\n    case GREETING_ACCEPTED:\n      return {\n        action: push.action,\n        payload: parseGreetingAcceptedPush(push.payload)\n      };\n\n    case GREETING_CANCELED:\n      return {\n        action: push.action,\n        // 'greeting_canceled' has the same payload as `greeting_accepted`\n        payload: parseGreetingAcceptedPush(push.payload)\n      };\n\n    case INCOMING_CHAT:\n      return {\n        action: push.action,\n        payload: parseIncomingChatPush(push.payload)\n      };\n\n    case INCOMING_EVENT:\n      return {\n        action: push.action,\n        payload: parseIncomingEventPush(push.payload)\n      };\n\n    case INCOMING_GREETING:\n      return {\n        action: push.action,\n        payload: parseIncomingGreetingPush(push.payload)\n      };\n\n    case INCOMING_MULTICAST:\n      return {\n        action: push.action,\n        payload: push.payload\n      };\n\n    case INCOMING_RICH_MESSAGE_POSTBACK:\n      return {\n        action: push.action,\n        payload: parseIncomingRichMessagePostbackPush(push.payload)\n      };\n\n    case INCOMING_TYPING_INDICATOR:\n      return {\n        action: push.action,\n        payload: parseIncomingTypingIndicatorPush(push.payload)\n      };\n\n    case QUEUE_POSITION_UPDATED:\n      return {\n        action: push.action,\n        payload: parseQueuePositionUpdatedPush(push.payload)\n      };\n\n    case THREAD_PROPERTIES_DELETED:\n      return {\n        action: push.action,\n        payload: parseThreadPropertiesDeletedPush(push.payload)\n      };\n\n    case THREAD_PROPERTIES_UPDATED:\n      return {\n        action: push.action,\n        payload: parseThreadPropertiesUpdatedPush(push.payload)\n      };\n\n    case USER_ADDED_TO_CHAT:\n      return {\n        action: push.action,\n        payload: parseUserAddedToChatPush(push.payload)\n      };\n\n    case USER_REMOVED_FROM_CHAT:\n      return {\n        action: push.action,\n        payload: parseUserRemovedFromChatPush(push.payload) // TODO: remove those once we sync with the API on prod\n\n      };\n\n    case 'chat_user_added':\n      return {\n        action: USER_ADDED_TO_CHAT,\n        payload: parseUserAddedToChatPush(push.payload)\n      };\n\n    case 'chat_user_removed':\n      return {\n        action: USER_REMOVED_FROM_CHAT,\n        payload: parseUserRemovedFromChatPush(push.payload)\n      };\n  }\n};\n\nvar parseResponse = function parseResponse(_ref5) {\n  var request = _ref5.request,\n      response = _ref5.response;\n\n  switch (response.action) {\n    case ACCEPT_GREETING:\n      return {\n        action: response.action,\n        payload: SUCCESS\n      };\n\n    case CANCEL_GREETING:\n      return {\n        action: response.action,\n        payload: SUCCESS\n      };\n\n    case DELETE_CHAT_PROPERTIES:\n      return {\n        action: response.action,\n        payload: SUCCESS\n      };\n\n    case DELETE_EVENT_PROPERTIES:\n      return {\n        action: response.action,\n        payload: SUCCESS\n      };\n\n    case DELETE_THREAD_PROPERTIES:\n      return {\n        action: response.action,\n        payload: SUCCESS\n      };\n\n    case GET_CHAT:\n      return {\n        action: response.action,\n        payload: parseGetChatResponse(response.payload)\n      };\n\n    case GET_CUSTOMER:\n      return {\n        action: response.action,\n        payload: parseCustomer(response.payload)\n      };\n\n    case GET_FORM:\n      return {\n        action: response.action,\n        payload: parseGetFormResponse(response.payload)\n      };\n\n    case GET_PREDICTED_AGENT:\n      return {\n        action: response.action,\n        payload: parsePredictedAgent(response.payload)\n      };\n\n    case GET_URL_INFO:\n      return {\n        action: response.action,\n        payload: parseGetUrlInfoResponse(response.payload)\n      };\n\n    case LIST_CHATS:\n      return {\n        action: response.action,\n        payload: parseListChatsResponse(response.payload)\n      };\n\n    case LIST_GROUP_STATUSES:\n      return {\n        action: response.action,\n        payload: parseListGroupStatusesResponse(response.payload)\n      };\n\n    case LIST_THREADS:\n      return {\n        action: response.action,\n        payload: parseListThreadsResponse(request, response.payload)\n      };\n\n    case LOGIN:\n      return {\n        action: response.action,\n        payload: parseLoginResponse(response.payload)\n      };\n\n    case MARK_EVENTS_AS_SEEN:\n      return {\n        action: response.action,\n        payload: SUCCESS\n      };\n\n    case SEND_SNEAK_PEEK:\n      return {\n        action: response.action,\n        payload: SUCCESS\n      };\n\n    case SET_CUSTOMER_SESSION_FIELDS:\n      return {\n        action: response.action,\n        payload: SUCCESS\n      };\n\n    case SEND_RICH_MESSAGE_POSTBACK:\n      return {\n        action: response.action,\n        payload: SUCCESS\n      };\n\n    case UPDATE_CHAT_PROPERTIES:\n      return {\n        action: response.action,\n        payload: SUCCESS\n      };\n\n    case UPDATE_CUSTOMER:\n      return {\n        action: response.action,\n        payload: SUCCESS\n      };\n\n    case UPDATE_CUSTOMER_PAGE$1:\n      return {\n        action: response.action,\n        payload: SUCCESS\n      };\n\n    case UPDATE_EVENT_PROPERTIES:\n      return {\n        action: response.action,\n        payload: SUCCESS\n      };\n\n    case UPDATE_THREAD_PROPERTIES:\n      return {\n        action: response.action,\n        payload: SUCCESS\n      };\n  }\n};\n\nvar parseServerError = function parseServerError(error) {\n  return {\n    code: error.type.toUpperCase(),\n    message: error.message\n  };\n};\n\nvar handleResponseError = function handleResponseError(_ref, response) {\n  var dispatch = _ref.dispatch,\n      getState = _ref.getState;\n  var requestId = response.request_id,\n      payload = response.payload;\n\n  var _getRequest = getRequest(getState(), requestId),\n      reject = _getRequest.reject;\n\n  dispatch({\n    type: REQUEST_FAILED,\n    payload: {\n      id: requestId,\n      reject: reject,\n      error: parseServerError(payload.error)\n    }\n  });\n};\n\nvar handleResponse$1 = function handleResponse(_ref2, response) {\n  var dispatch = _ref2.dispatch,\n      getState = _ref2.getState;\n  var requestId = response.request_id;\n\n  var _getRequest2 = getRequest(getState(), requestId),\n      promise = _getRequest2.promise,\n      resolve = _getRequest2.resolve,\n      request = _getRequest2.request;\n\n  var parsedResponse = parseResponse({\n    request: request,\n    response: response\n  });\n  dispatch({\n    type: RESPONSE_RECEIVED,\n    payload: _extends({\n      id: requestId,\n      promise: promise,\n      resolve: resolve\n    }, parsedResponse)\n  });\n};\n\nvar handlePushResponse = function handlePushResponse(_ref3, response) {\n  var dispatch = _ref3.dispatch,\n      getState = _ref3.getState;\n  var requestId = response.request_id;\n\n  var _getRequest3 = getRequest(getState(), requestId),\n      promise = _getRequest3.promise,\n      resolve = _getRequest3.resolve;\n\n  var parsedPush = parsePush(response);\n  dispatch({\n    type: PUSH_RESPONSE_RECEIVED,\n    payload: _extends({\n      id: requestId,\n      promise: promise,\n      resolve: resolve\n    }, parsedPush)\n  });\n};\n\nvar handlePush$1 = function handlePush(store, push) {\n  var parsedPush = parsePush(push);\n\n  if (!parsedPush) {\n    // defensive measure against receiving unknown push\n    return;\n  }\n\n  store.dispatch({\n    type: PUSH_RECEIVED,\n    payload: parsedPush\n  });\n};\n\nvar socketListener = function socketListener(store, socket) {\n  var dispatch = store.dispatch;\n  socket.on('connect', function () {\n    dispatch({\n      type: SOCKET_CONNECTED\n    });\n  });\n  socket.on('message', function (message) {\n    if (message.type === 'response') {\n      if (!message.success) {\n        handleResponseError(store, message);\n        return;\n      }\n\n      switch (message.action) {\n        case ACTIVATE_CHAT:\n        case DEACTIVATE_CHAT:\n        case SEND_EVENT:\n        case START_CHAT:\n          // those are requests with indirect responses\n          return;\n\n        default:\n          handleResponse$1(store, message);\n          return;\n      }\n    }\n\n    if ('request_id' in message) {\n      switch (message.action) {\n        case CHAT_DEACTIVATED:\n        case INCOMING_CHAT:\n        case INCOMING_EVENT:\n          // those are acting as indirect responses\n          handlePushResponse(store, message);\n          return;\n      }\n    }\n\n    handlePush$1(store, message);\n  });\n  socket.on('disconnect', function () {\n    failAllRequests(store, CONNECTION_LOST);\n\n    if (getConnectionStatus(store.getState()) === CONNECTED) {\n      store.dispatch(socketDisconnected());\n    }\n  });\n  socket.on('connection_unstable', function () {\n    dispatch({\n      type: SOCKET_UNSTABLE\n    });\n  });\n  socket.on('connection_recovered', function () {\n    dispatch({\n      type: SOCKET_RECOVERED\n    });\n  });\n  return socket.off;\n};\n\nvar INCORRECT_REQUESTER_STRUCTURE = 'incorrect requester structure';\n\nvar appendString = function appendString(input, str) {\n  return input.length ? input + \"\\n\" + str : str;\n};\n\nvar createTicketBody = function createTicketBody(state, _ref) {\n  var fields = _ref.fields,\n      customerId = _ref.customerId,\n      _ref$groupId = _ref.groupId,\n      groupId = _ref$groupId === void 0 ? state.groupId : _ref$groupId,\n      timeZone = _ref.timeZone;\n\n  var ticketBody = _extends({\n    licence_id: state.licenseId,\n    ticket_message: '',\n    offline_message: '',\n    visitor_id: customerId,\n    requester: {}\n  }, typeof groupId === 'number' && {\n    group: groupId\n  }, state.page && {\n    source: {\n      url: state.page.url\n    }\n  }, timeZone && {\n    timezone: timeZone\n  });\n\n  return fields.reduce(function (body, field) {\n    switch (field.type) {\n      case 'subject':\n        {\n          var value = field.answer;\n          var text = value ? field.label + \" \" + value : field.label;\n\n          if (value) {\n            body.subject = value;\n          }\n\n          body.offline_message = appendString(body.offline_message, text);\n          return body;\n        }\n\n      case 'name':\n        {\n          var _value = field.answer;\n\n          var _text = _value ? field.label + \" \" + _value : field.label;\n\n          if (_value) {\n            body.requester.name = _value;\n          }\n\n          body.offline_message = appendString(body.offline_message, _text);\n          return body;\n        }\n\n      case 'email':\n        {\n          var _value2 = field.answer;\n\n          var _text2 = _value2 ? field.label + \" \" + _value2 : field.label;\n\n          body.requester.mail = _value2;\n          body.offline_message = appendString(body.offline_message, _text2);\n          return body;\n        }\n\n      case 'question':\n      case 'textarea':\n        {\n          var _value3 = field.answer;\n\n          var _text3 = _value3 ? field.label + \" \" + _value3 : field.label;\n\n          body.offline_message = appendString(body.offline_message, _text3);\n          body.ticket_message = appendString(body.ticket_message, _text3);\n          return body;\n        }\n\n      case 'radio':\n      case 'select':\n        {\n          var _value4 = field.answer && field.answer.label;\n\n          var _text4 = _value4 ? field.label + \" \" + _value4 : field.label;\n\n          body.offline_message = appendString(body.offline_message, _text4);\n          body.ticket_message = appendString(body.ticket_message, _text4);\n          return body;\n        }\n\n      case 'checkbox':\n        {\n          var _value5 = field.answers && field.answers.map(function (answer) {\n            return answer.label;\n          }).join(', ');\n\n          var _text5 = _value5 ? field.label + \" \" + _value5 : field.label;\n\n          body.offline_message = appendString(body.offline_message, _text5);\n          body.ticket_message = appendString(body.ticket_message, _text5);\n          return body;\n        }\n\n      default:\n        return body;\n    }\n  }, ticketBody);\n};\n\nvar sendTicketForm = function sendTicketForm(store, auth, _ref2) {\n  var filledForm = _ref2.filledForm,\n      groupId = _ref2.groupId,\n      timeZone = _ref2.timeZone;\n  return auth.getToken().then(function (token) {\n    var state = store.getState();\n\n    if (getSelfId(state) === null) {\n      store.dispatch(setSelfId(token.entityId));\n    }\n\n    var url = getApiOrigin(state) + \"/v2/tickets/new\";\n    var body = createTicketBody(state, {\n      fields: filledForm.fields,\n      customerId: token.entityId,\n      groupId: groupId,\n      timeZone: timeZone\n    });\n    return unfetch(url, {\n      method: 'POST',\n      headers: {\n        'Content-Type': 'application/json'\n      },\n      body: JSON.stringify(body)\n    }).then(function (response) {\n      if (response.ok) {\n        return response.json().then(function (res) {\n          return _extends({}, res, {\n            text: body.ticket_message\n          });\n        });\n      } // we actually should normalize this somehow\n\n\n      if (response.status === 400 || response.status === 422) {\n        var errHandler = function errHandler(error) {\n          if (!error || !error.errors) {\n            // TODO: I honestly don't know if this can even be reached and even if it is - What error should be thrown here\n            throw new Error();\n          } // we receive some hardcore aggregate error here 😱\n\n\n          var firstError = error.errors[0];\n          var type = Object.keys(firstError)[0];\n\n          if (type === INCORRECT_REQUESTER_STRUCTURE) {\n            throw createError({\n              message: firstError[INCORRECT_REQUESTER_STRUCTURE][0],\n              code: 'VALIDATION'\n            });\n          }\n\n          throw new Error();\n        };\n\n        return response.json().then(errHandler, errHandler);\n      }\n\n      throw new Error();\n    });\n  });\n};\n\nvar KILOBYTE = 1024;\nvar MEGABYTE = 1024 * KILOBYTE;\nvar GIGABYTE = 1024 * MEGABYTE;\nvar SIZE_LIMIT = 10 * MEGABYTE;\n\nvar formatBytes = function formatBytes(bytes, precision) {\n  if (precision === void 0) {\n    precision = 2;\n  }\n\n  if (bytes < KILOBYTE) {\n    return bytes + \" b\";\n  }\n\n  var kilobytes = bytes / 1024;\n\n  if (bytes < MEGABYTE) {\n    return kilobytes.toFixed(precision) + \" kb\";\n  }\n\n  var megabytes = kilobytes / 1024;\n\n  if (bytes < GIGABYTE) {\n    return megabytes.toFixed(precision) + \" MB\";\n  }\n\n  var gigabytes = megabytes / 1024;\n  return gigabytes.toFixed(precision) + \" GB\";\n};\n\nvar validateFile = function validateFile(file) {\n  if (file.size > SIZE_LIMIT) {\n    throw createError({\n      message: \"The file is too big (max size is \" + formatBytes(SIZE_LIMIT) + \").\",\n      code: 'TOO_BIG_FILE'\n    });\n  }\n};\n\nvar uploadFile = function uploadFile(_ref, _ref2) {\n  var auth = _ref.auth,\n      store = _ref.store;\n  var file = _ref2.file,\n      onProgress = _ref2.onProgress;\n  var upload;\n  var cancelled = false;\n  var send = new Promise(function (resolve, reject) {\n    validateFile(file);\n    var state = store.getState();\n    var query = buildQueryString({\n      license_id: state.licenseId\n    });\n    var url = getServerUrl(state) + \"/action/\" + UPLOAD_FILE + \"?\" + query;\n    var payload = {\n      file: file\n    };\n    auth.getToken().then(function (token) {\n      if (cancelled) {\n        reject(new Error('Upload cancelled.'));\n        return;\n      }\n\n      upload = rawUploadFile(url, payload, {\n        headers: {\n          Authorization: token.tokenType + \" \" + token.accessToken\n        },\n        onProgress: onProgress\n      });\n      upload.promise.then(resolve, function (uploadError) {\n        // an error might not come from a server\n        if (!uploadError.response) {\n          reject(uploadError);\n          return;\n        }\n\n        var _uploadError$response = uploadError.response.error,\n            type = _uploadError$response.type,\n            message = _uploadError$response.message;\n        reject(createError({\n          message: message,\n          code: type.toUpperCase()\n        }));\n      });\n    });\n  });\n  return {\n    promise: send,\n    cancel: function cancel() {\n      if (cancelled) {\n        return;\n      }\n\n      cancelled = true;\n\n      if (upload) {\n        upload.cancel();\n      }\n    }\n  };\n};\n\nvar makeGraylogRequest = function makeGraylogRequest(url, body) {\n  return new Promise(function (resolve) {\n    var img = new Image();\n    img.src = url + \"?\" + body;\n    img.onerror = noop;\n\n    img.onload = function () {\n      return resolve();\n    };\n  });\n};\n/**\n * Logs event to Graylog with provided config data.\n * Logging request is fired only when all of those conditions are true:\n * 1. package is used in lc production environment\n * 2. package is used standalone because only then \"customer_sdk\" will be set to customer_sdk\n */\n\n\nvar log = function log(_ref) {\n  var env = _ref.env,\n      licenseId = _ref.licenseId,\n      eventName = _ref.eventName;\n\n  if (env !== 'production' || \"customer_sdk\" !== 'customer_sdk') {\n    return Promise.resolve();\n  }\n\n  var message = {\n    event_name: eventName,\n    severity: 'Informational',\n    sdkVersion: \"2.0.4\"\n  };\n  var body = {\n    licence_id: licenseId,\n    event_id: 'chat_widget_customer_sdk',\n    message: JSON.stringify(message)\n  };\n  return makeGraylogRequest('https://queue.livechatinc.com/logs', buildQueryString(body));\n};\n\nvar LISTENER_IDENTITY = 'LISTENER_IDENTITY';\nvar listenersMap = {};\n\nvar createDebuggedMethods = function createDebuggedMethods(methods, prefix) {\n  if (prefix === void 0) {\n    prefix = '';\n  }\n\n  var methodNames = Object.keys(methods);\n  return methodNames.map(function (methodName) {\n    var method = methods[methodName];\n    return function () {\n      var _console;\n\n      for (var _len = arguments.length, args = new Array(_len), _key = 0; _key < _len; _key++) {\n        args[_key] = arguments[_key];\n      }\n\n      (_console = console).info.apply(_console, [prefix + \".\" + methodName + \"() ===>\"].concat(args));\n\n      var result = method.apply(void 0, args);\n\n      if (result && typeof result.then === 'function') {\n        result.then(function (data) {\n          console.info(prefix + \".\" + methodName + \"() <===\", data);\n        }).catch(function (err) {\n          console.error(prefix + \".\" + methodName + \"() <===\", err);\n        });\n      }\n\n      return result;\n    };\n  }).reduce(function (acc, method, index) {\n    acc[methodNames[index]] = method;\n    return acc;\n  }, {});\n};\n\nvar createEnhancedListener = function createEnhancedListener(label, event, listener) {\n  if (listener[LISTENER_IDENTITY] === undefined) {\n    Object.defineProperty(listener, LISTENER_IDENTITY, {\n      value: {}\n    });\n  }\n\n  if (listener[LISTENER_IDENTITY][event]) {\n    var enhancedListenerId = listener[LISTENER_IDENTITY][event];\n    return listenersMap[enhancedListenerId];\n  }\n\n  var enhancedListener = function enhancedListener(data) {\n    console.info(\".\" + label + \"(\\\"\" + event + \"\\\") <===\", data);\n    listener(data);\n  };\n\n  var uniqueId = generateUniqueId(listenersMap);\n  listener[LISTENER_IDENTITY][event] = uniqueId;\n  listenersMap[uniqueId] = enhancedListener;\n  return enhancedListener;\n}; // TODO: this really should just accept & return CustomerSdk type\n\n\nvar debug = function debug(_sdk) {\n  var sdk = _sdk;\n\n  if (process.env.NODE_ENV === 'production') {\n    console.warn('You probably do not want to use debug(customerSDK) in your production environment.');\n  }\n\n  var _on = sdk.on,\n      _once = sdk.once,\n      _off = sdk.off,\n      _getChatHistory = sdk.getChatHistory,\n      auth = sdk.auth,\n      rest = _objectWithoutPropertiesLoose(sdk, [\"on\", \"once\", \"off\", \"getChatHistory\", \"auth\"]);\n\n  var methods = createDebuggedMethods(rest);\n  return Object.freeze(_extends({\n    auth: Object.freeze(createDebuggedMethods(auth, '.auth'))\n  }, methods, {\n    getChatHistory: function getChatHistory() {\n      var _console2;\n\n      for (var _len2 = arguments.length, args = new Array(_len2), _key2 = 0; _key2 < _len2; _key2++) {\n        args[_key2] = arguments[_key2];\n      }\n\n      (_console2 = console).info.apply(_console2, [\".getChatHistory()\"].concat(args));\n\n      var history = _getChatHistory.apply(void 0, args);\n\n      var logLabel = 'history.next()';\n      return {\n        next: function next() {\n          var _console3;\n\n          (_console3 = console).info.apply(_console3, [logLabel + \" ===>\"].concat(args));\n\n          var result = history.next();\n          result.then(function (data) {\n            var _console4;\n\n            (_console4 = console).info.apply(_console4, [logLabel + \" <===\"].concat(args, [data]));\n          }).catch(function (err) {\n            var _console5;\n\n            (_console5 = console).error.apply(_console5, [logLabel + \" <===\"].concat(args, [err]));\n          });\n          return result;\n        }\n      };\n    },\n    off: function off(event, listener) {\n      console.info(\".off(\\\"\" + event + \"\\\", \" + (listener.name || 'anonymous') + \")\");\n      var enhancedListener = listener;\n\n      if (listener[LISTENER_IDENTITY] !== undefined) {\n        var enhancedListenerId = listener[LISTENER_IDENTITY][event];\n        enhancedListener = listenersMap[enhancedListenerId];\n      }\n\n      _off(event, enhancedListener);\n    },\n    on: function on(event, listener) {\n      _on(event, createEnhancedListener('on', event, listener));\n    },\n    once: function once(event, listener) {\n      _once(event, createEnhancedListener('once', event, listener));\n    }\n  }));\n};\n\nvar CHATS_PAGINATION_MAX_LIMIT = 25;\n\nvar init = function init(config, env) {\n  if (env === void 0) {\n    env = 'production';\n  }\n\n  validateConfig(config);\n\n  var _config$autoConnect = config.autoConnect,\n      autoConnect = _config$autoConnect === void 0 ? true : _config$autoConnect,\n      customerDataProvider = config.customerDataProvider,\n      instanceConfig = _objectWithoutPropertiesLoose(config, [\"autoConnect\", \"customerDataProvider\"]);\n\n  var store = finalCreateStore(_extends({}, instanceConfig, {\n    env: env\n  }));\n  var emitter = mitt();\n  var socket = createSocketClient(store);\n  var auth = createAuth(instanceConfig, env);\n  store.addSideEffectsHandler(createSideEffectsHandler({\n    emitter: emitter,\n    socket: socket,\n    auth: auth,\n    customerDataProvider: customerDataProvider\n  }));\n  socketListener(store, socket);\n  var sendRequestAction$$1 = sendRequestAction.bind(null, store);\n\n  var startConnection = function startConnection() {\n    store.dispatch({\n      type: START_CONNECTION\n    });\n  };\n\n  var api = Object.freeze({\n    acceptGreeting: function acceptGreeting(_ref) {\n      var greetingId = _ref.greetingId,\n          uniqueId = _ref.uniqueId;\n      return sendRequestAction$$1(sendRequest(ACCEPT_GREETING, {\n        greeting_id: greetingId,\n        unique_id: uniqueId\n      }));\n    },\n    activateChat: function activateChat(data) {\n      log({\n        env: env,\n        licenseId: config.licenseId,\n        eventName: 'chat_started'\n      });\n      return sendRequestAction$$1(sendRequest(ACTIVATE_CHAT, parseActivateChatData(data)));\n    },\n    auth: auth,\n    cancelGreeting: function cancelGreeting(_ref2) {\n      var uniqueId = _ref2.uniqueId;\n      return sendRequestAction$$1(sendRequest(CANCEL_GREETING, {\n        unique_id: uniqueId\n      }));\n    },\n    cancelRate: function cancelRate(params) {\n      var chatId = params.chatId,\n          _params$properties = params.properties,\n          properties = _params$properties === void 0 ? ['score'] : _params$properties;\n      return api.listThreads({\n        chatId: chatId\n      }).then(function (_ref3) {\n        var threads = _ref3.threads;\n\n        if (!threads.length) {\n          throw createError({\n            message: \"There is no thread in \\\"\" + chatId + \"\\\".\",\n            code: MISSING_CHAT_THREAD\n          });\n        }\n\n        return api.deleteThreadProperties({\n          chatId: chatId,\n          threadId: threads[0].id,\n          properties: {\n            rating: properties\n          }\n        });\n      });\n    },\n    connect: startConnection,\n    deactivateChat: function deactivateChat(_ref4) {\n      var chatId = _ref4.chatId;\n      return sendRequestAction$$1(sendRequest(DEACTIVATE_CHAT, {\n        chat_id: chatId\n      }));\n    },\n    deleteChatProperties: function deleteChatProperties(_ref5) {\n      var chatId = _ref5.chatId,\n          properties = _ref5.properties;\n      return sendRequestAction$$1(sendRequest(DELETE_CHAT_PROPERTIES, {\n        chat_id: chatId,\n        properties: properties\n      }));\n    },\n    deleteEventProperties: function deleteEventProperties(_ref6) {\n      var chatId = _ref6.chatId,\n          threadId = _ref6.threadId,\n          eventId = _ref6.eventId,\n          properties = _ref6.properties;\n      return sendRequestAction$$1(sendRequest(DELETE_EVENT_PROPERTIES, {\n        chat_id: chatId,\n        thread_id: threadId,\n        event_id: eventId,\n        properties: properties\n      }));\n    },\n    deleteThreadProperties: function deleteThreadProperties(_ref7) {\n      var chatId = _ref7.chatId,\n          threadId = _ref7.threadId,\n          properties = _ref7.properties;\n      return sendRequestAction$$1(sendRequest(DELETE_THREAD_PROPERTIES, {\n        chat_id: chatId,\n        thread_id: threadId,\n        properties: properties\n      }));\n    },\n    destroy: function destroy$$1() {\n      store.dispatch(destroy('manual'));\n    },\n    disconnect: function disconnect() {\n      store.dispatch({\n        type: PAUSE_CONNECTION\n      });\n    },\n    getChat: function getChat(_ref8) {\n      var chatId = _ref8.chatId,\n          threadId = _ref8.threadId;\n      return sendRequestAction$$1(sendRequest(GET_CHAT, {\n        chat_id: chatId,\n        thread_id: threadId\n      }));\n    },\n    getChatHistory: function getChatHistory(_ref9) {\n      var chatId = _ref9.chatId;\n      return createChatHistoryIterator(api, chatId);\n    },\n    getCustomer: function getCustomer() {\n      return sendRequestAction$$1(sendRequest(GET_CUSTOMER, {}));\n    },\n    getForm: function getForm(_ref10) {\n      var groupId = _ref10.groupId,\n          type = _ref10.type;\n      return sendRequestAction$$1(sendRequest(GET_FORM, {\n        group_id: groupId,\n        type: type\n      }));\n    },\n    getPredictedAgent: function getPredictedAgent(params) {\n      if (params === void 0) {\n        params = {};\n      }\n\n      var _params = params,\n          groupId = _params.groupId;\n      return sendRequestAction$$1(sendRequest(GET_PREDICTED_AGENT, typeof groupId === 'number' ? {\n        group_id: groupId\n      } : {}));\n    },\n    getUrlInfo: function getUrlInfo(_ref11) {\n      var url = _ref11.url;\n      return sendRequestAction$$1(sendRequest(GET_URL_INFO, {\n        url: url\n      }));\n    },\n    listChats: function listChats(_temp) {\n      var _ref12 = _temp === void 0 ? {} : _temp,\n          _ref12$limit = _ref12.limit,\n          limit = _ref12$limit === void 0 ? 10 : _ref12$limit,\n          pageId = _ref12.pageId;\n\n      if (limit > CHATS_PAGINATION_MAX_LIMIT) {\n        return Promise.reject(new Error(\"Specified limit is too high (max \" + CHATS_PAGINATION_MAX_LIMIT + \").\"));\n      }\n\n      return sendRequestAction$$1(sendRequest(LIST_CHATS, {\n        limit: limit,\n        page_id: pageId\n      }));\n    },\n    listGroupStatuses: function listGroupStatuses(_temp2) {\n      var _ref13 = _temp2 === void 0 ? {} : _temp2,\n          groupIds = _ref13.groupIds;\n\n      return sendRequestAction$$1(sendRequest(LIST_GROUP_STATUSES, groupIds ? {\n        group_ids: groupIds\n      } : {\n        all: true\n      }));\n    },\n    listThreads: function listThreads(_ref14) {\n      var chatId = _ref14.chatId,\n          _ref14$sortOrder = _ref14.sortOrder,\n          sortOrder = _ref14$sortOrder === void 0 ? DESC : _ref14$sortOrder,\n          limit = _ref14.limit,\n          pageId = _ref14.pageId,\n          minEventsCount = _ref14.minEventsCount;\n      return sendRequestAction$$1(sendRequest(LIST_THREADS, {\n        chat_id: chatId,\n        sort_order: sortOrder,\n        limit: limit,\n        page_id: pageId,\n        min_events_count: minEventsCount\n      }));\n    },\n    markEventsAsSeen: function markEventsAsSeen(_ref15) {\n      var chatId = _ref15.chatId,\n          seenUpTo = _ref15.seenUpTo;\n      return sendRequestAction$$1(sendRequest(MARK_EVENTS_AS_SEEN, {\n        chat_id: chatId,\n        seen_up_to: seenUpTo\n      }));\n    },\n    on: emitter.on,\n    once: emitter.once,\n    off: emitter.off,\n    rateChat: function rateChat(params) {\n      var chatId = params.chatId,\n          rating = params.rating;\n      return api.listThreads({\n        chatId: chatId\n      }).then(function (_ref16) {\n        var threads = _ref16.threads;\n\n        if (!threads.length) {\n          throw createError({\n            message: \"There is no thread in \\\"\" + chatId + \"\\\".\",\n            code: MISSING_CHAT_THREAD\n          });\n        }\n\n        return api.updateThreadProperties({\n          chatId: chatId,\n          threadId: threads[0].id,\n          properties: {\n            rating: rating\n          }\n        });\n      });\n    },\n    sendEvent: function (_sendEvent) {\n      function sendEvent$$1(_x) {\n        return _sendEvent.apply(this, arguments);\n      }\n\n      sendEvent$$1.toString = function () {\n        return _sendEvent.toString();\n      };\n\n      return sendEvent$$1;\n    }(function (params) {\n      return sendRequestAction$$1(sendEvent(params));\n    }),\n    sendTicketForm: function sendTicketForm$$1(options) {\n      return sendTicketForm(store, auth, options);\n    },\n    sendRichMessagePostback: function sendRichMessagePostback(_ref17) {\n      var chatId = _ref17.chatId,\n          threadId = _ref17.threadId,\n          eventId = _ref17.eventId,\n          postback = _ref17.postback;\n      return sendRequestAction$$1(sendRequest(SEND_RICH_MESSAGE_POSTBACK, {\n        chat_id: chatId,\n        event_id: eventId,\n        thread_id: threadId,\n        postback: postback\n      }));\n    },\n    setCustomerSessionFields: function setCustomerSessionFields(_ref18) {\n      var sessionFields = _ref18.sessionFields;\n      return sendRequestAction$$1(sendRequest(SET_CUSTOMER_SESSION_FIELDS, {\n        session_fields: parseCustomerSessionFields(sessionFields)\n      }));\n    },\n    setSneakPeek: function setSneakPeek(_ref19) {\n      var chatId = _ref19.chatId,\n          sneakPeekText = _ref19.sneakPeekText;\n      var state = store.getState();\n\n      if (!isChatActive(state, chatId) || !isConnected(state)) {\n        return;\n      }\n\n      sendRequestAction$$1(sendRequest(SEND_SNEAK_PEEK, {\n        chat_id: chatId,\n        sneak_peek_text: sneakPeekText\n      })).catch(noop);\n    },\n    startChat: function startChat(data) {\n      if (data === void 0) {\n        data = {};\n      }\n\n      log({\n        env: env,\n        licenseId: config.licenseId,\n        eventName: 'chat_started'\n      });\n      return sendRequestAction$$1(sendRequest(START_CHAT, parseStartChatData(data)));\n    },\n    updateChatProperties: function updateChatProperties(_ref20) {\n      var chatId = _ref20.chatId,\n          properties = _ref20.properties;\n      return sendRequestAction$$1(sendRequest(UPDATE_CHAT_PROPERTIES, {\n        chat_id: chatId,\n        properties: properties\n      }));\n    },\n    updateCustomer: function updateCustomer(update) {\n      return sendRequestAction$$1(sendRequest(UPDATE_CUSTOMER, parseCustomerUpdate(update)));\n    },\n    updateCustomerPage: function updateCustomerPage(page) {\n      store.dispatch({\n        type: UPDATE_CUSTOMER_PAGE,\n        payload: pickOwn(['title', 'url'], page)\n      });\n    },\n    updateEventProperties: function updateEventProperties(_ref21) {\n      var chatId = _ref21.chatId,\n          threadId = _ref21.threadId,\n          eventId = _ref21.eventId,\n          properties = _ref21.properties;\n      return sendRequestAction$$1(sendRequest(UPDATE_EVENT_PROPERTIES, {\n        chat_id: chatId,\n        event_id: eventId,\n        thread_id: threadId,\n        properties: properties\n      }));\n    },\n    updateThreadProperties: function updateThreadProperties(_ref22) {\n      var chatId = _ref22.chatId,\n          threadId = _ref22.threadId,\n          properties = _ref22.properties;\n      return sendRequestAction$$1(sendRequest(UPDATE_THREAD_PROPERTIES, {\n        chat_id: chatId,\n        thread_id: threadId,\n        properties: properties\n      }));\n    },\n    uploadFile: function uploadFile$$1(options) {\n      return uploadFile({\n        auth: auth,\n        store: store\n      }, options);\n    }\n  });\n\n  if (autoConnect) {\n    startConnection();\n  } else {\n    store.dispatch({\n      type: CHECK_GOALS,\n      payload: {\n        sessionFields: typeof customerDataProvider === 'function' ? customerDataProvider().sessionFields : {}\n      }\n    });\n  }\n\n  return api;\n};\n\nexport { init, debug, parseFile, parseFilledForm, parseMessage, parseRichMessage, parseSystemMessage, parseEvent$1 as parseEvent, parseGreeting };","/**\n * Expose `Backoff`.\n */\nmodule.exports = Backoff;\n/**\n * Initialize backoff timer with `opts`.\n *\n * - `min` initial timeout in milliseconds [100]\n * - `max` max timeout [10000]\n * - `jitter` [0]\n * - `factor` [2]\n *\n * @param {Object} opts\n * @api public\n */\n\nfunction Backoff(opts) {\n  opts = opts || {};\n  this.ms = opts.min || 100;\n  this.max = opts.max || 10000;\n  this.factor = opts.factor || 2;\n  this.jitter = opts.jitter > 0 && opts.jitter <= 1 ? opts.jitter : 0;\n  this.attempts = 0;\n}\n/**\n * Return the backoff duration.\n *\n * @return {Number}\n * @api public\n */\n\n\nBackoff.prototype.duration = function () {\n  var ms = this.ms * Math.pow(this.factor, this.attempts++);\n\n  if (this.jitter) {\n    var rand = Math.random();\n    var deviation = Math.floor(rand * this.jitter * ms);\n    ms = (Math.floor(rand * 10) & 1) == 0 ? ms - deviation : ms + deviation;\n  }\n\n  return Math.min(ms, this.max) | 0;\n};\n/**\n * Reset the number of attempts.\n *\n * @api public\n */\n\n\nBackoff.prototype.reset = function () {\n  this.attempts = 0;\n};\n/**\n * Set the minimum duration\n *\n * @api public\n */\n\n\nBackoff.prototype.setMin = function (min) {\n  this.ms = min;\n};\n/**\n * Set the maximum duration\n *\n * @api public\n */\n\n\nBackoff.prototype.setMax = function (max) {\n  this.max = max;\n};\n/**\n * Set the jitter\n *\n * @api public\n */\n\n\nBackoff.prototype.setJitter = function (jitter) {\n  this.jitter = jitter;\n};","\"use strict\";\n\nmodule.exports = global.fetch;","if (typeof Object.create === 'function') {\n  // implementation from standard node.js 'util' module\n  module.exports = function inherits(ctor, superCtor) {\n    if (superCtor) {\n      ctor.super_ = superCtor;\n      ctor.prototype = Object.create(superCtor.prototype, {\n        constructor: {\n          value: ctor,\n          enumerable: false,\n          writable: true,\n          configurable: true\n        }\n      });\n    }\n  };\n} else {\n  // old school shim for old browsers\n  module.exports = function inherits(ctor, superCtor) {\n    if (superCtor) {\n      ctor.super_ = superCtor;\n\n      var TempCtor = function TempCtor() {};\n\n      TempCtor.prototype = superCtor.prototype;\n      ctor.prototype = new TempCtor();\n      ctor.prototype.constructor = ctor;\n    }\n  };\n}","/*! JSON v3.3.2 | https://bestiejs.github.io/json3 | Copyright 2012-2015, Kit Cambridge, Benjamin Tan | http://kit.mit-license.org */\n;\n(function () {\n  // Detect the `define` function exposed by asynchronous module loaders. The\n  // strict `define` check is necessary for compatibility with `r.js`.\n  var isLoader = typeof define === \"function\" && define.amd; // A set of types used to distinguish objects from primitives.\n\n  var objectTypes = {\n    \"function\": true,\n    \"object\": true\n  }; // Detect the `exports` object exposed by CommonJS implementations.\n\n  var freeExports = objectTypes[typeof exports] && exports && !exports.nodeType && exports; // Use the `global` object exposed by Node (including Browserify via\n  // `insert-module-globals`), Narwhal, and Ringo as the default context,\n  // and the `window` object in browsers. Rhino exports a `global` function\n  // instead.\n\n  var root = objectTypes[typeof window] && window || this,\n      freeGlobal = freeExports && objectTypes[typeof module] && module && !module.nodeType && typeof global == \"object\" && global;\n\n  if (freeGlobal && (freeGlobal.global === freeGlobal || freeGlobal.window === freeGlobal || freeGlobal.self === freeGlobal)) {\n    root = freeGlobal;\n  } // Public: Initializes JSON 3 using the given `context` object, attaching the\n  // `stringify` and `parse` functions to the specified `exports` object.\n\n\n  function runInContext(context, exports) {\n    context || (context = root.Object());\n    exports || (exports = root.Object()); // Native constructor aliases.\n\n    var Number = context.Number || root.Number,\n        String = context.String || root.String,\n        Object = context.Object || root.Object,\n        Date = context.Date || root.Date,\n        SyntaxError = context.SyntaxError || root.SyntaxError,\n        TypeError = context.TypeError || root.TypeError,\n        Math = context.Math || root.Math,\n        nativeJSON = context.JSON || root.JSON; // Delegate to the native `stringify` and `parse` implementations.\n\n    if (typeof nativeJSON == \"object\" && nativeJSON) {\n      exports.stringify = nativeJSON.stringify;\n      exports.parse = nativeJSON.parse;\n    } // Convenience aliases.\n\n\n    var objectProto = Object.prototype,\n        getClass = objectProto.toString,\n        isProperty = objectProto.hasOwnProperty,\n        undefined; // Internal: Contains `try...catch` logic used by other functions.\n    // This prevents other functions from being deoptimized.\n\n    function attempt(func, errorFunc) {\n      try {\n        func();\n      } catch (exception) {\n        if (errorFunc) {\n          errorFunc();\n        }\n      }\n    } // Test the `Date#getUTC*` methods. Based on work by @Yaffle.\n\n\n    var isExtended = new Date(-3509827334573292);\n    attempt(function () {\n      // The `getUTCFullYear`, `Month`, and `Date` methods return nonsensical\n      // results for certain dates in Opera >= 10.53.\n      isExtended = isExtended.getUTCFullYear() == -109252 && isExtended.getUTCMonth() === 0 && isExtended.getUTCDate() === 1 && isExtended.getUTCHours() == 10 && isExtended.getUTCMinutes() == 37 && isExtended.getUTCSeconds() == 6 && isExtended.getUTCMilliseconds() == 708;\n    }); // Internal: Determines whether the native `JSON.stringify` and `parse`\n    // implementations are spec-compliant. Based on work by Ken Snyder.\n\n    function has(name) {\n      if (has[name] != null) {\n        // Return cached feature test result.\n        return has[name];\n      }\n\n      var isSupported;\n\n      if (name == \"bug-string-char-index\") {\n        // IE <= 7 doesn't support accessing string characters using square\n        // bracket notation. IE 8 only supports this for primitives.\n        isSupported = \"a\"[0] != \"a\";\n      } else if (name == \"json\") {\n        // Indicates whether both `JSON.stringify` and `JSON.parse` are\n        // supported.\n        isSupported = has(\"json-stringify\") && has(\"date-serialization\") && has(\"json-parse\");\n      } else if (name == \"date-serialization\") {\n        // Indicates whether `Date`s can be serialized accurately by `JSON.stringify`.\n        isSupported = has(\"json-stringify\") && isExtended;\n\n        if (isSupported) {\n          var stringify = exports.stringify;\n          attempt(function () {\n            isSupported = // JSON 2, Prototype <= 1.7, and older WebKit builds incorrectly\n            // serialize extended years.\n            stringify(new Date(-8.64e15)) == '\"-271821-04-20T00:00:00.000Z\"' && // The milliseconds are optional in ES 5, but required in 5.1.\n            stringify(new Date(8.64e15)) == '\"+275760-09-13T00:00:00.000Z\"' && // Firefox <= 11.0 incorrectly serializes years prior to 0 as negative\n            // four-digit years instead of six-digit years. Credits: @Yaffle.\n            stringify(new Date(-621987552e5)) == '\"-000001-01-01T00:00:00.000Z\"' && // Safari <= 5.1.5 and Opera >= 10.53 incorrectly serialize millisecond\n            // values less than 1000. Credits: @Yaffle.\n            stringify(new Date(-1)) == '\"1969-12-31T23:59:59.999Z\"';\n          });\n        }\n      } else {\n        var value,\n            serialized = \"{\\\"a\\\":[1,true,false,null,\\\"\\\\u0000\\\\b\\\\n\\\\f\\\\r\\\\t\\\"]}\"; // Test `JSON.stringify`.\n\n        if (name == \"json-stringify\") {\n          var stringify = exports.stringify,\n              stringifySupported = typeof stringify == \"function\";\n\n          if (stringifySupported) {\n            // A test function object with a custom `toJSON` method.\n            (value = function value() {\n              return 1;\n            }).toJSON = value;\n            attempt(function () {\n              stringifySupported = // Firefox 3.1b1 and b2 serialize string, number, and boolean\n              // primitives as object literals.\n              stringify(0) === \"0\" && // FF 3.1b1, b2, and JSON 2 serialize wrapped primitives as object\n              // literals.\n              stringify(new Number()) === \"0\" && stringify(new String()) == '\"\"' && // FF 3.1b1, 2 throw an error if the value is `null`, `undefined`, or\n              // does not define a canonical JSON representation (this applies to\n              // objects with `toJSON` properties as well, *unless* they are nested\n              // within an object or array).\n              stringify(getClass) === undefined && // IE 8 serializes `undefined` as `\"undefined\"`. Safari <= 5.1.7 and\n              // FF 3.1b3 pass this test.\n              stringify(undefined) === undefined && // Safari <= 5.1.7 and FF 3.1b3 throw `Error`s and `TypeError`s,\n              // respectively, if the value is omitted entirely.\n              stringify() === undefined && // FF 3.1b1, 2 throw an error if the given value is not a number,\n              // string, array, object, Boolean, or `null` literal. This applies to\n              // objects with custom `toJSON` methods as well, unless they are nested\n              // inside object or array literals. YUI 3.0.0b1 ignores custom `toJSON`\n              // methods entirely.\n              stringify(value) === \"1\" && stringify([value]) == \"[1]\" && // Prototype <= 1.6.1 serializes `[undefined]` as `\"[]\"` instead of\n              // `\"[null]\"`.\n              stringify([undefined]) == \"[null]\" && // YUI 3.0.0b1 fails to serialize `null` literals.\n              stringify(null) == \"null\" && // FF 3.1b1, 2 halts serialization if an array contains a function:\n              // `[1, true, getClass, 1]` serializes as \"[1,true,],\". FF 3.1b3\n              // elides non-JSON values from objects and arrays, unless they\n              // define custom `toJSON` methods.\n              stringify([undefined, getClass, null]) == \"[null,null,null]\" && // Simple serialization test. FF 3.1b1 uses Unicode escape sequences\n              // where character escape codes are expected (e.g., `\\b` => `\\u0008`).\n              stringify({\n                \"a\": [value, true, false, null, \"\\x00\\b\\n\\f\\r\\t\"]\n              }) == serialized && // FF 3.1b1 and b2 ignore the `filter` and `width` arguments.\n              stringify(null, value) === \"1\" && stringify([1, 2], null, 1) == \"[\\n 1,\\n 2\\n]\";\n            }, function () {\n              stringifySupported = false;\n            });\n          }\n\n          isSupported = stringifySupported;\n        } // Test `JSON.parse`.\n\n\n        if (name == \"json-parse\") {\n          var parse = exports.parse,\n              parseSupported;\n\n          if (typeof parse == \"function\") {\n            attempt(function () {\n              // FF 3.1b1, b2 will throw an exception if a bare literal is provided.\n              // Conforming implementations should also coerce the initial argument to\n              // a string prior to parsing.\n              if (parse(\"0\") === 0 && !parse(false)) {\n                // Simple parsing test.\n                value = parse(serialized);\n                parseSupported = value[\"a\"].length == 5 && value[\"a\"][0] === 1;\n\n                if (parseSupported) {\n                  attempt(function () {\n                    // Safari <= 5.1.2 and FF 3.1b1 allow unescaped tabs in strings.\n                    parseSupported = !parse('\"\\t\"');\n                  });\n\n                  if (parseSupported) {\n                    attempt(function () {\n                      // FF 4.0 and 4.0.1 allow leading `+` signs and leading\n                      // decimal points. FF 4.0, 4.0.1, and IE 9-10 also allow\n                      // certain octal literals.\n                      parseSupported = parse(\"01\") !== 1;\n                    });\n                  }\n\n                  if (parseSupported) {\n                    attempt(function () {\n                      // FF 4.0, 4.0.1, and Rhino 1.7R3-R4 allow trailing decimal\n                      // points. These environments, along with FF 3.1b1 and 2,\n                      // also allow trailing commas in JSON objects and arrays.\n                      parseSupported = parse(\"1.\") !== 1;\n                    });\n                  }\n                }\n              }\n            }, function () {\n              parseSupported = false;\n            });\n          }\n\n          isSupported = parseSupported;\n        }\n      }\n\n      return has[name] = !!isSupported;\n    }\n\n    has[\"bug-string-char-index\"] = has[\"date-serialization\"] = has[\"json\"] = has[\"json-stringify\"] = has[\"json-parse\"] = null;\n\n    if (!has(\"json\")) {\n      // Common `[[Class]]` name aliases.\n      var functionClass = \"[object Function]\",\n          dateClass = \"[object Date]\",\n          numberClass = \"[object Number]\",\n          stringClass = \"[object String]\",\n          arrayClass = \"[object Array]\",\n          booleanClass = \"[object Boolean]\"; // Detect incomplete support for accessing string characters by index.\n\n      var charIndexBuggy = has(\"bug-string-char-index\"); // Internal: Normalizes the `for...in` iteration algorithm across\n      // environments. Each enumerated key is yielded to a `callback` function.\n\n      var _forOwn = function forOwn(object, callback) {\n        var size = 0,\n            Properties,\n            dontEnums,\n            property; // Tests for bugs in the current environment's `for...in` algorithm. The\n        // `valueOf` property inherits the non-enumerable flag from\n        // `Object.prototype` in older versions of IE, Netscape, and Mozilla.\n\n        (Properties = function Properties() {\n          this.valueOf = 0;\n        }).prototype.valueOf = 0; // Iterate over a new instance of the `Properties` class.\n\n        dontEnums = new Properties();\n\n        for (property in dontEnums) {\n          // Ignore all properties inherited from `Object.prototype`.\n          if (isProperty.call(dontEnums, property)) {\n            size++;\n          }\n        }\n\n        Properties = dontEnums = null; // Normalize the iteration algorithm.\n\n        if (!size) {\n          // A list of non-enumerable properties inherited from `Object.prototype`.\n          dontEnums = [\"valueOf\", \"toString\", \"toLocaleString\", \"propertyIsEnumerable\", \"isPrototypeOf\", \"hasOwnProperty\", \"constructor\"]; // IE <= 8, Mozilla 1.0, and Netscape 6.2 ignore shadowed non-enumerable\n          // properties.\n\n          _forOwn = function forOwn(object, callback) {\n            var isFunction = getClass.call(object) == functionClass,\n                property,\n                length;\n            var hasProperty = !isFunction && typeof object.constructor != \"function\" && objectTypes[typeof object.hasOwnProperty] && object.hasOwnProperty || isProperty;\n\n            for (property in object) {\n              // Gecko <= 1.0 enumerates the `prototype` property of functions under\n              // certain conditions; IE does not.\n              if (!(isFunction && property == \"prototype\") && hasProperty.call(object, property)) {\n                callback(property);\n              }\n            } // Manually invoke the callback for each non-enumerable property.\n\n\n            for (length = dontEnums.length; property = dontEnums[--length];) {\n              if (hasProperty.call(object, property)) {\n                callback(property);\n              }\n            }\n          };\n        } else {\n          // No bugs detected; use the standard `for...in` algorithm.\n          _forOwn = function forOwn(object, callback) {\n            var isFunction = getClass.call(object) == functionClass,\n                property,\n                isConstructor;\n\n            for (property in object) {\n              if (!(isFunction && property == \"prototype\") && isProperty.call(object, property) && !(isConstructor = property === \"constructor\")) {\n                callback(property);\n              }\n            } // Manually invoke the callback for the `constructor` property due to\n            // cross-environment inconsistencies.\n\n\n            if (isConstructor || isProperty.call(object, property = \"constructor\")) {\n              callback(property);\n            }\n          };\n        }\n\n        return _forOwn(object, callback);\n      }; // Public: Serializes a JavaScript `value` as a JSON string. The optional\n      // `filter` argument may specify either a function that alters how object and\n      // array members are serialized, or an array of strings and numbers that\n      // indicates which properties should be serialized. The optional `width`\n      // argument may be either a string or number that specifies the indentation\n      // level of the output.\n\n\n      if (!has(\"json-stringify\") && !has(\"date-serialization\")) {\n        // Internal: A map of control characters and their escaped equivalents.\n        var Escapes = {\n          92: \"\\\\\\\\\",\n          34: '\\\\\"',\n          8: \"\\\\b\",\n          12: \"\\\\f\",\n          10: \"\\\\n\",\n          13: \"\\\\r\",\n          9: \"\\\\t\"\n        }; // Internal: Converts `value` into a zero-padded string such that its\n        // length is at least equal to `width`. The `width` must be <= 6.\n\n        var leadingZeroes = \"000000\";\n\n        var toPaddedString = function toPaddedString(width, value) {\n          // The `|| 0` expression is necessary to work around a bug in\n          // Opera <= 7.54u2 where `0 == -0`, but `String(-0) !== \"0\"`.\n          return (leadingZeroes + (value || 0)).slice(-width);\n        }; // Internal: Serializes a date object.\n\n\n        var _serializeDate = function serializeDate(value) {\n          var getData, year, month, date, time, hours, minutes, seconds, milliseconds; // Define additional utility methods if the `Date` methods are buggy.\n\n          if (!isExtended) {\n            var floor = Math.floor; // A mapping between the months of the year and the number of days between\n            // January 1st and the first of the respective month.\n\n            var Months = [0, 31, 59, 90, 120, 151, 181, 212, 243, 273, 304, 334]; // Internal: Calculates the number of days between the Unix epoch and the\n            // first day of the given month.\n\n            var getDay = function getDay(year, month) {\n              return Months[month] + 365 * (year - 1970) + floor((year - 1969 + (month = +(month > 1))) / 4) - floor((year - 1901 + month) / 100) + floor((year - 1601 + month) / 400);\n            };\n\n            getData = function getData(value) {\n              // Manually compute the year, month, date, hours, minutes,\n              // seconds, and milliseconds if the `getUTC*` methods are\n              // buggy. Adapted from @Yaffle's `date-shim` project.\n              date = floor(value / 864e5);\n\n              for (year = floor(date / 365.2425) + 1970 - 1; getDay(year + 1, 0) <= date; year++) {\n                ;\n              }\n\n              for (month = floor((date - getDay(year, 0)) / 30.42); getDay(year, month + 1) <= date; month++) {\n                ;\n              }\n\n              date = 1 + date - getDay(year, month); // The `time` value specifies the time within the day (see ES\n              // 5.1 section 15.9.1.2). The formula `(A % B + B) % B` is used\n              // to compute `A modulo B`, as the `%` operator does not\n              // correspond to the `modulo` operation for negative numbers.\n\n              time = (value % 864e5 + 864e5) % 864e5; // The hours, minutes, seconds, and milliseconds are obtained by\n              // decomposing the time within the day. See section 15.9.1.10.\n\n              hours = floor(time / 36e5) % 24;\n              minutes = floor(time / 6e4) % 60;\n              seconds = floor(time / 1e3) % 60;\n              milliseconds = time % 1e3;\n            };\n          } else {\n            getData = function getData(value) {\n              year = value.getUTCFullYear();\n              month = value.getUTCMonth();\n              date = value.getUTCDate();\n              hours = value.getUTCHours();\n              minutes = value.getUTCMinutes();\n              seconds = value.getUTCSeconds();\n              milliseconds = value.getUTCMilliseconds();\n            };\n          }\n\n          _serializeDate = function serializeDate(value) {\n            if (value > -1 / 0 && value < 1 / 0) {\n              // Dates are serialized according to the `Date#toJSON` method\n              // specified in ES 5.1 section 15.9.5.44. See section 15.9.1.15\n              // for the ISO 8601 date time string format.\n              getData(value); // Serialize extended years correctly.\n\n              value = (year <= 0 || year >= 1e4 ? (year < 0 ? \"-\" : \"+\") + toPaddedString(6, year < 0 ? -year : year) : toPaddedString(4, year)) + \"-\" + toPaddedString(2, month + 1) + \"-\" + toPaddedString(2, date) + // Months, dates, hours, minutes, and seconds should have two\n              // digits; milliseconds should have three.\n              \"T\" + toPaddedString(2, hours) + \":\" + toPaddedString(2, minutes) + \":\" + toPaddedString(2, seconds) + // Milliseconds are optional in ES 5.0, but required in 5.1.\n              \".\" + toPaddedString(3, milliseconds) + \"Z\";\n              year = month = date = hours = minutes = seconds = milliseconds = null;\n            } else {\n              value = null;\n            }\n\n            return value;\n          };\n\n          return _serializeDate(value);\n        }; // For environments with `JSON.stringify` but buggy date serialization,\n        // we override the native `Date#toJSON` implementation with a\n        // spec-compliant one.\n\n\n        if (has(\"json-stringify\") && !has(\"date-serialization\")) {\n          // Internal: the `Date#toJSON` implementation used to override the native one.\n          function dateToJSON(key) {\n            return _serializeDate(this);\n          } // Public: `JSON.stringify`. See ES 5.1 section 15.12.3.\n\n\n          var nativeStringify = exports.stringify;\n\n          exports.stringify = function (source, filter, width) {\n            var nativeToJSON = Date.prototype.toJSON;\n            Date.prototype.toJSON = dateToJSON;\n            var result = nativeStringify(source, filter, width);\n            Date.prototype.toJSON = nativeToJSON;\n            return result;\n          };\n        } else {\n          // Internal: Double-quotes a string `value`, replacing all ASCII control\n          // characters (characters with code unit values between 0 and 31) with\n          // their escaped equivalents. This is an implementation of the\n          // `Quote(value)` operation defined in ES 5.1 section 15.12.3.\n          var unicodePrefix = \"\\\\u00\";\n\n          var escapeChar = function escapeChar(character) {\n            var charCode = character.charCodeAt(0),\n                escaped = Escapes[charCode];\n\n            if (escaped) {\n              return escaped;\n            }\n\n            return unicodePrefix + toPaddedString(2, charCode.toString(16));\n          };\n\n          var reEscape = /[\\x00-\\x1f\\x22\\x5c]/g;\n\n          var quote = function quote(value) {\n            reEscape.lastIndex = 0;\n            return '\"' + (reEscape.test(value) ? value.replace(reEscape, escapeChar) : value) + '\"';\n          }; // Internal: Recursively serializes an object. Implements the\n          // `Str(key, holder)`, `JO(value)`, and `JA(value)` operations.\n\n\n          var serialize = function serialize(property, object, callback, properties, whitespace, indentation, stack) {\n            var value, type, className, results, element, index, length, prefix, result;\n            attempt(function () {\n              // Necessary for host object support.\n              value = object[property];\n            });\n\n            if (typeof value == \"object\" && value) {\n              if (value.getUTCFullYear && getClass.call(value) == dateClass && value.toJSON === Date.prototype.toJSON) {\n                value = _serializeDate(value);\n              } else if (typeof value.toJSON == \"function\") {\n                value = value.toJSON(property);\n              }\n            }\n\n            if (callback) {\n              // If a replacement function was provided, call it to obtain the value\n              // for serialization.\n              value = callback.call(object, property, value);\n            } // Exit early if value is `undefined` or `null`.\n\n\n            if (value == undefined) {\n              return value === undefined ? value : \"null\";\n            }\n\n            type = typeof value; // Only call `getClass` if the value is an object.\n\n            if (type == \"object\") {\n              className = getClass.call(value);\n            }\n\n            switch (className || type) {\n              case \"boolean\":\n              case booleanClass:\n                // Booleans are represented literally.\n                return \"\" + value;\n\n              case \"number\":\n              case numberClass:\n                // JSON numbers must be finite. `Infinity` and `NaN` are serialized as\n                // `\"null\"`.\n                return value > -1 / 0 && value < 1 / 0 ? \"\" + value : \"null\";\n\n              case \"string\":\n              case stringClass:\n                // Strings are double-quoted and escaped.\n                return quote(\"\" + value);\n            } // Recursively serialize objects and arrays.\n\n\n            if (typeof value == \"object\") {\n              // Check for cyclic structures. This is a linear search; performance\n              // is inversely proportional to the number of unique nested objects.\n              for (length = stack.length; length--;) {\n                if (stack[length] === value) {\n                  // Cyclic structures cannot be serialized by `JSON.stringify`.\n                  throw TypeError();\n                }\n              } // Add the object to the stack of traversed objects.\n\n\n              stack.push(value);\n              results = []; // Save the current indentation level and indent one additional level.\n\n              prefix = indentation;\n              indentation += whitespace;\n\n              if (className == arrayClass) {\n                // Recursively serialize array elements.\n                for (index = 0, length = value.length; index < length; index++) {\n                  element = serialize(index, value, callback, properties, whitespace, indentation, stack);\n                  results.push(element === undefined ? \"null\" : element);\n                }\n\n                result = results.length ? whitespace ? \"[\\n\" + indentation + results.join(\",\\n\" + indentation) + \"\\n\" + prefix + \"]\" : \"[\" + results.join(\",\") + \"]\" : \"[]\";\n              } else {\n                // Recursively serialize object members. Members are selected from\n                // either a user-specified list of property names, or the object\n                // itself.\n                _forOwn(properties || value, function (property) {\n                  var element = serialize(property, value, callback, properties, whitespace, indentation, stack);\n\n                  if (element !== undefined) {\n                    // According to ES 5.1 section 15.12.3: \"If `gap` {whitespace}\n                    // is not the empty string, let `member` {quote(property) + \":\"}\n                    // be the concatenation of `member` and the `space` character.\"\n                    // The \"`space` character\" refers to the literal space\n                    // character, not the `space` {width} argument provided to\n                    // `JSON.stringify`.\n                    results.push(quote(property) + \":\" + (whitespace ? \" \" : \"\") + element);\n                  }\n                });\n\n                result = results.length ? whitespace ? \"{\\n\" + indentation + results.join(\",\\n\" + indentation) + \"\\n\" + prefix + \"}\" : \"{\" + results.join(\",\") + \"}\" : \"{}\";\n              } // Remove the object from the traversed object stack.\n\n\n              stack.pop();\n              return result;\n            }\n          }; // Public: `JSON.stringify`. See ES 5.1 section 15.12.3.\n\n\n          exports.stringify = function (source, filter, width) {\n            var whitespace, callback, properties, className;\n\n            if (objectTypes[typeof filter] && filter) {\n              className = getClass.call(filter);\n\n              if (className == functionClass) {\n                callback = filter;\n              } else if (className == arrayClass) {\n                // Convert the property names array into a makeshift set.\n                properties = {};\n\n                for (var index = 0, length = filter.length, value; index < length;) {\n                  value = filter[index++];\n                  className = getClass.call(value);\n\n                  if (className == \"[object String]\" || className == \"[object Number]\") {\n                    properties[value] = 1;\n                  }\n                }\n              }\n            }\n\n            if (width) {\n              className = getClass.call(width);\n\n              if (className == numberClass) {\n                // Convert the `width` to an integer and create a string containing\n                // `width` number of space characters.\n                if ((width -= width % 1) > 0) {\n                  if (width > 10) {\n                    width = 10;\n                  }\n\n                  for (whitespace = \"\"; whitespace.length < width;) {\n                    whitespace += \" \";\n                  }\n                }\n              } else if (className == stringClass) {\n                whitespace = width.length <= 10 ? width : width.slice(0, 10);\n              }\n            } // Opera <= 7.54u2 discards the values associated with empty string keys\n            // (`\"\"`) only if they are used directly within an object member list\n            // (e.g., `!(\"\" in { \"\": 1})`).\n\n\n            return serialize(\"\", (value = {}, value[\"\"] = source, value), callback, properties, whitespace, \"\", []);\n          };\n        }\n      } // Public: Parses a JSON source string.\n\n\n      if (!has(\"json-parse\")) {\n        var fromCharCode = String.fromCharCode; // Internal: A map of escaped control characters and their unescaped\n        // equivalents.\n\n        var Unescapes = {\n          92: \"\\\\\",\n          34: '\"',\n          47: \"/\",\n          98: \"\\b\",\n          116: \"\\t\",\n          110: \"\\n\",\n          102: \"\\f\",\n          114: \"\\r\"\n        }; // Internal: Stores the parser state.\n\n        var Index, Source; // Internal: Resets the parser state and throws a `SyntaxError`.\n\n        var abort = function abort() {\n          Index = Source = null;\n          throw SyntaxError();\n        }; // Internal: Returns the next token, or `\"$\"` if the parser has reached\n        // the end of the source string. A token may be a string, number, `null`\n        // literal, or Boolean literal.\n\n\n        var lex = function lex() {\n          var source = Source,\n              length = source.length,\n              value,\n              begin,\n              position,\n              isSigned,\n              charCode;\n\n          while (Index < length) {\n            charCode = source.charCodeAt(Index);\n\n            switch (charCode) {\n              case 9:\n              case 10:\n              case 13:\n              case 32:\n                // Skip whitespace tokens, including tabs, carriage returns, line\n                // feeds, and space characters.\n                Index++;\n                break;\n\n              case 123:\n              case 125:\n              case 91:\n              case 93:\n              case 58:\n              case 44:\n                // Parse a punctuator token (`{`, `}`, `[`, `]`, `:`, or `,`) at\n                // the current position.\n                value = charIndexBuggy ? source.charAt(Index) : source[Index];\n                Index++;\n                return value;\n\n              case 34:\n                // `\"` delimits a JSON string; advance to the next character and\n                // begin parsing the string. String tokens are prefixed with the\n                // sentinel `@` character to distinguish them from punctuators and\n                // end-of-string tokens.\n                for (value = \"@\", Index++; Index < length;) {\n                  charCode = source.charCodeAt(Index);\n\n                  if (charCode < 32) {\n                    // Unescaped ASCII control characters (those with a code unit\n                    // less than the space character) are not permitted.\n                    abort();\n                  } else if (charCode == 92) {\n                    // A reverse solidus (`\\`) marks the beginning of an escaped\n                    // control character (including `\"`, `\\`, and `/`) or Unicode\n                    // escape sequence.\n                    charCode = source.charCodeAt(++Index);\n\n                    switch (charCode) {\n                      case 92:\n                      case 34:\n                      case 47:\n                      case 98:\n                      case 116:\n                      case 110:\n                      case 102:\n                      case 114:\n                        // Revive escaped control characters.\n                        value += Unescapes[charCode];\n                        Index++;\n                        break;\n\n                      case 117:\n                        // `\\u` marks the beginning of a Unicode escape sequence.\n                        // Advance to the first character and validate the\n                        // four-digit code point.\n                        begin = ++Index;\n\n                        for (position = Index + 4; Index < position; Index++) {\n                          charCode = source.charCodeAt(Index); // A valid sequence comprises four hexdigits (case-\n                          // insensitive) that form a single hexadecimal value.\n\n                          if (!(charCode >= 48 && charCode <= 57 || charCode >= 97 && charCode <= 102 || charCode >= 65 && charCode <= 70)) {\n                            // Invalid Unicode escape sequence.\n                            abort();\n                          }\n                        } // Revive the escaped character.\n\n\n                        value += fromCharCode(\"0x\" + source.slice(begin, Index));\n                        break;\n\n                      default:\n                        // Invalid escape sequence.\n                        abort();\n                    }\n                  } else {\n                    if (charCode == 34) {\n                      // An unescaped double-quote character marks the end of the\n                      // string.\n                      break;\n                    }\n\n                    charCode = source.charCodeAt(Index);\n                    begin = Index; // Optimize for the common case where a string is valid.\n\n                    while (charCode >= 32 && charCode != 92 && charCode != 34) {\n                      charCode = source.charCodeAt(++Index);\n                    } // Append the string as-is.\n\n\n                    value += source.slice(begin, Index);\n                  }\n                }\n\n                if (source.charCodeAt(Index) == 34) {\n                  // Advance to the next character and return the revived string.\n                  Index++;\n                  return value;\n                } // Unterminated string.\n\n\n                abort();\n\n              default:\n                // Parse numbers and literals.\n                begin = Index; // Advance past the negative sign, if one is specified.\n\n                if (charCode == 45) {\n                  isSigned = true;\n                  charCode = source.charCodeAt(++Index);\n                } // Parse an integer or floating-point value.\n\n\n                if (charCode >= 48 && charCode <= 57) {\n                  // Leading zeroes are interpreted as octal literals.\n                  if (charCode == 48 && (charCode = source.charCodeAt(Index + 1), charCode >= 48 && charCode <= 57)) {\n                    // Illegal octal literal.\n                    abort();\n                  }\n\n                  isSigned = false; // Parse the integer component.\n\n                  for (; Index < length && (charCode = source.charCodeAt(Index), charCode >= 48 && charCode <= 57); Index++) {\n                    ;\n                  } // Floats cannot contain a leading decimal point; however, this\n                  // case is already accounted for by the parser.\n\n\n                  if (source.charCodeAt(Index) == 46) {\n                    position = ++Index; // Parse the decimal component.\n\n                    for (; position < length; position++) {\n                      charCode = source.charCodeAt(position);\n\n                      if (charCode < 48 || charCode > 57) {\n                        break;\n                      }\n                    }\n\n                    if (position == Index) {\n                      // Illegal trailing decimal.\n                      abort();\n                    }\n\n                    Index = position;\n                  } // Parse exponents. The `e` denoting the exponent is\n                  // case-insensitive.\n\n\n                  charCode = source.charCodeAt(Index);\n\n                  if (charCode == 101 || charCode == 69) {\n                    charCode = source.charCodeAt(++Index); // Skip past the sign following the exponent, if one is\n                    // specified.\n\n                    if (charCode == 43 || charCode == 45) {\n                      Index++;\n                    } // Parse the exponential component.\n\n\n                    for (position = Index; position < length; position++) {\n                      charCode = source.charCodeAt(position);\n\n                      if (charCode < 48 || charCode > 57) {\n                        break;\n                      }\n                    }\n\n                    if (position == Index) {\n                      // Illegal empty exponent.\n                      abort();\n                    }\n\n                    Index = position;\n                  } // Coerce the parsed value to a JavaScript number.\n\n\n                  return +source.slice(begin, Index);\n                } // A negative sign may only precede numbers.\n\n\n                if (isSigned) {\n                  abort();\n                } // `true`, `false`, and `null` literals.\n\n\n                var temp = source.slice(Index, Index + 4);\n\n                if (temp == \"true\") {\n                  Index += 4;\n                  return true;\n                } else if (temp == \"fals\" && source.charCodeAt(Index + 4) == 101) {\n                  Index += 5;\n                  return false;\n                } else if (temp == \"null\") {\n                  Index += 4;\n                  return null;\n                } // Unrecognized token.\n\n\n                abort();\n            }\n          } // Return the sentinel `$` character if the parser has reached the end\n          // of the source string.\n\n\n          return \"$\";\n        }; // Internal: Parses a JSON `value` token.\n\n\n        var get = function get(value) {\n          var results, hasMembers;\n\n          if (value == \"$\") {\n            // Unexpected end of input.\n            abort();\n          }\n\n          if (typeof value == \"string\") {\n            if ((charIndexBuggy ? value.charAt(0) : value[0]) == \"@\") {\n              // Remove the sentinel `@` character.\n              return value.slice(1);\n            } // Parse object and array literals.\n\n\n            if (value == \"[\") {\n              // Parses a JSON array, returning a new JavaScript array.\n              results = [];\n\n              for (;;) {\n                value = lex(); // A closing square bracket marks the end of the array literal.\n\n                if (value == \"]\") {\n                  break;\n                } // If the array literal contains elements, the current token\n                // should be a comma separating the previous element from the\n                // next.\n\n\n                if (hasMembers) {\n                  if (value == \",\") {\n                    value = lex();\n\n                    if (value == \"]\") {\n                      // Unexpected trailing `,` in array literal.\n                      abort();\n                    }\n                  } else {\n                    // A `,` must separate each array element.\n                    abort();\n                  }\n                } else {\n                  hasMembers = true;\n                } // Elisions and leading commas are not permitted.\n\n\n                if (value == \",\") {\n                  abort();\n                }\n\n                results.push(get(value));\n              }\n\n              return results;\n            } else if (value == \"{\") {\n              // Parses a JSON object, returning a new JavaScript object.\n              results = {};\n\n              for (;;) {\n                value = lex(); // A closing curly brace marks the end of the object literal.\n\n                if (value == \"}\") {\n                  break;\n                } // If the object literal contains members, the current token\n                // should be a comma separator.\n\n\n                if (hasMembers) {\n                  if (value == \",\") {\n                    value = lex();\n\n                    if (value == \"}\") {\n                      // Unexpected trailing `,` in object literal.\n                      abort();\n                    }\n                  } else {\n                    // A `,` must separate each object member.\n                    abort();\n                  }\n                } else {\n                  hasMembers = true;\n                } // Leading commas are not permitted, object property names must be\n                // double-quoted strings, and a `:` must separate each property\n                // name and value.\n\n\n                if (value == \",\" || typeof value != \"string\" || (charIndexBuggy ? value.charAt(0) : value[0]) != \"@\" || lex() != \":\") {\n                  abort();\n                }\n\n                results[value.slice(1)] = get(lex());\n              }\n\n              return results;\n            } // Unexpected token encountered.\n\n\n            abort();\n          }\n\n          return value;\n        }; // Internal: Updates a traversed object member.\n\n\n        var update = function update(source, property, callback) {\n          var element = walk(source, property, callback);\n\n          if (element === undefined) {\n            delete source[property];\n          } else {\n            source[property] = element;\n          }\n        }; // Internal: Recursively traverses a parsed JSON object, invoking the\n        // `callback` function for each value. This is an implementation of the\n        // `Walk(holder, name)` operation defined in ES 5.1 section 15.12.2.\n\n\n        var walk = function walk(source, property, callback) {\n          var value = source[property],\n              length;\n\n          if (typeof value == \"object\" && value) {\n            // `forOwn` can't be used to traverse an array in Opera <= 8.54\n            // because its `Object#hasOwnProperty` implementation returns `false`\n            // for array indices (e.g., `![1, 2, 3].hasOwnProperty(\"0\")`).\n            if (getClass.call(value) == arrayClass) {\n              for (length = value.length; length--;) {\n                update(getClass, _forOwn, value, length, callback);\n              }\n            } else {\n              _forOwn(value, function (property) {\n                update(value, property, callback);\n              });\n            }\n          }\n\n          return callback.call(source, property, value);\n        }; // Public: `JSON.parse`. See ES 5.1 section 15.12.2.\n\n\n        exports.parse = function (source, callback) {\n          var result, value;\n          Index = 0;\n          Source = \"\" + source;\n          result = get(lex()); // If a JSON string contains multiple tokens, it is invalid.\n\n          if (lex() != \"$\") {\n            abort();\n          } // Reset the parser state.\n\n\n          Index = Source = null;\n          return callback && getClass.call(callback) == functionClass ? walk((value = {}, value[\"\"] = result, value), \"\", callback) : result;\n        };\n      }\n    }\n\n    exports.runInContext = runInContext;\n    return exports;\n  }\n\n  if (freeExports && !isLoader) {\n    // Export for CommonJS environments.\n    runInContext(root, freeExports);\n  } else {\n    // Export for web browsers and JavaScript engines.\n    var nativeJSON = root.JSON,\n        previousJSON = root.JSON3,\n        isRestored = false;\n    var JSON3 = runInContext(root, root.JSON3 = {\n      // Public: Restores the original value of the global `JSON` object and\n      // returns a reference to the `JSON3` object.\n      \"noConflict\": function noConflict() {\n        if (!isRestored) {\n          isRestored = true;\n          root.JSON = nativeJSON;\n          root.JSON3 = previousJSON;\n          nativeJSON = previousJSON = null;\n        }\n\n        return JSON3;\n      }\n    });\n    root.JSON = {\n      \"parse\": JSON3.parse,\n      \"stringify\": JSON3.stringify\n    };\n  } // Export for asynchronous module loaders.\n\n\n  if (isLoader) {\n    define(function () {\n      return JSON3;\n    });\n  }\n}).call(this);","'use strict';\n\nvar has = Object.prototype.hasOwnProperty,\n    undef;\n/**\n * Decode a URI encoded string.\n *\n * @param {String} input The URI encoded string.\n * @returns {String|Null} The decoded string.\n * @api private\n */\n\nfunction decode(input) {\n  try {\n    return decodeURIComponent(input.replace(/\\+/g, ' '));\n  } catch (e) {\n    return null;\n  }\n}\n/**\n * Attempts to encode a given input.\n *\n * @param {String} input The string that needs to be encoded.\n * @returns {String|Null} The encoded string.\n * @api private\n */\n\n\nfunction encode(input) {\n  try {\n    return encodeURIComponent(input);\n  } catch (e) {\n    return null;\n  }\n}\n/**\n * Simple query string parser.\n *\n * @param {String} query The query string that needs to be parsed.\n * @returns {Object}\n * @api public\n */\n\n\nfunction querystring(query) {\n  var parser = /([^=?#&]+)=?([^&]*)/g,\n      result = {},\n      part;\n\n  while (part = parser.exec(query)) {\n    var key = decode(part[1]),\n        value = decode(part[2]); //\n    // Prevent overriding of existing properties. This ensures that build-in\n    // methods like `toString` or __proto__ are not overriden by malicious\n    // querystrings.\n    //\n    // In the case if failed decoding, we want to omit the key/value pairs\n    // from the result.\n    //\n\n    if (key === null || value === null || key in result) continue;\n    result[key] = value;\n  }\n\n  return result;\n}\n/**\n * Transform a query string to an object.\n *\n * @param {Object} obj Object that should be transformed.\n * @param {String} prefix Optional prefix.\n * @returns {String}\n * @api public\n */\n\n\nfunction querystringify(obj, prefix) {\n  prefix = prefix || '';\n  var pairs = [],\n      value,\n      key; //\n  // Optionally prefix with a '?' if needed\n  //\n\n  if ('string' !== typeof prefix) prefix = '?';\n\n  for (key in obj) {\n    if (has.call(obj, key)) {\n      value = obj[key]; //\n      // Edge cases where we actually want to encode the value to an empty\n      // string instead of the stringified value.\n      //\n\n      if (!value && (value === null || value === undef || isNaN(value))) {\n        value = '';\n      }\n\n      key = encode(key);\n      value = encode(value); //\n      // If we failed to encode the strings, we should bail out as we don't\n      // want to add invalid strings to the query.\n      //\n\n      if (key === null || value === null) continue;\n      pairs.push(key + '=' + value);\n    }\n  }\n\n  return pairs.length ? prefix + pairs.join('&') : '';\n} //\n// Expose the module.\n//\n\n\nexports.stringify = querystringify;\nexports.parse = querystring;","'use strict';\n/**\n * Check if we're required to add a port number.\n *\n * @see https://url.spec.whatwg.org/#default-port\n * @param {Number|String} port Port number we need to check\n * @param {String} protocol Protocol we need to check against.\n * @returns {Boolean} Is it a default port for the given protocol\n * @api private\n */\n\nmodule.exports = function required(port, protocol) {\n  protocol = protocol.split(':')[0];\n  port = +port;\n  if (!port) return false;\n\n  switch (protocol) {\n    case 'http':\n    case 'ws':\n      return port !== 80;\n\n    case 'https':\n    case 'wss':\n      return port !== 443;\n\n    case 'ftp':\n      return port !== 21;\n\n    case 'gopher':\n      return port !== 70;\n\n    case 'file':\n      return false;\n  }\n\n  return port !== 0;\n};","'use strict';\n\nvar transportList = require('./transport-list');\n\nmodule.exports = require('./main')(transportList); // TODO can't get rid of this until all servers do\n\nif ('_sockjs_onload' in global) {\n  setTimeout(global._sockjs_onload, 1);\n}","'use strict';\n\nvar inherits = require('inherits'),\n    Event = require('./event');\n\nfunction CloseEvent() {\n  Event.call(this);\n  this.initEvent('close', false, false);\n  this.wasClean = false;\n  this.code = 0;\n  this.reason = '';\n}\n\ninherits(CloseEvent, Event);\nmodule.exports = CloseEvent;","'use strict';\n\nvar inherits = require('inherits'),\n    EventTarget = require('./eventtarget');\n\nfunction EventEmitter() {\n  EventTarget.call(this);\n}\n\ninherits(EventEmitter, EventTarget);\n\nEventEmitter.prototype.removeAllListeners = function (type) {\n  if (type) {\n    delete this._listeners[type];\n  } else {\n    this._listeners = {};\n  }\n};\n\nEventEmitter.prototype.once = function (type, listener) {\n  var self = this,\n      fired = false;\n\n  function g() {\n    self.removeListener(type, g);\n\n    if (!fired) {\n      fired = true;\n      listener.apply(this, arguments);\n    }\n  }\n\n  this.on(type, g);\n};\n\nEventEmitter.prototype.emit = function () {\n  var type = arguments[0];\n  var listeners = this._listeners[type];\n\n  if (!listeners) {\n    return;\n  } // equivalent of Array.prototype.slice.call(arguments, 1);\n\n\n  var l = arguments.length;\n  var args = new Array(l - 1);\n\n  for (var ai = 1; ai < l; ai++) {\n    args[ai - 1] = arguments[ai];\n  }\n\n  for (var i = 0; i < listeners.length; i++) {\n    listeners[i].apply(this, args);\n  }\n};\n\nEventEmitter.prototype.on = EventEmitter.prototype.addListener = EventTarget.prototype.addEventListener;\nEventEmitter.prototype.removeListener = EventTarget.prototype.removeEventListener;\nmodule.exports.EventEmitter = EventEmitter;","'use strict';\n\nfunction Event(eventType) {\n  this.type = eventType;\n}\n\nEvent.prototype.initEvent = function (eventType, canBubble, cancelable) {\n  this.type = eventType;\n  this.bubbles = canBubble;\n  this.cancelable = cancelable;\n  this.timeStamp = +new Date();\n  return this;\n};\n\nEvent.prototype.stopPropagation = function () {};\n\nEvent.prototype.preventDefault = function () {};\n\nEvent.CAPTURING_PHASE = 1;\nEvent.AT_TARGET = 2;\nEvent.BUBBLING_PHASE = 3;\nmodule.exports = Event;","'use strict';\n/* Simplified implementation of DOM2 EventTarget.\n *   http://www.w3.org/TR/DOM-Level-2-Events/events.html#Events-EventTarget\n */\n\nfunction EventTarget() {\n  this._listeners = {};\n}\n\nEventTarget.prototype.addEventListener = function (eventType, listener) {\n  if (!(eventType in this._listeners)) {\n    this._listeners[eventType] = [];\n  }\n\n  var arr = this._listeners[eventType]; // #4\n\n  if (arr.indexOf(listener) === -1) {\n    // Make a copy so as not to interfere with a current dispatchEvent.\n    arr = arr.concat([listener]);\n  }\n\n  this._listeners[eventType] = arr;\n};\n\nEventTarget.prototype.removeEventListener = function (eventType, listener) {\n  var arr = this._listeners[eventType];\n\n  if (!arr) {\n    return;\n  }\n\n  var idx = arr.indexOf(listener);\n\n  if (idx !== -1) {\n    if (arr.length > 1) {\n      // Make a copy so as not to interfere with a current dispatchEvent.\n      this._listeners[eventType] = arr.slice(0, idx).concat(arr.slice(idx + 1));\n    } else {\n      delete this._listeners[eventType];\n    }\n\n    return;\n  }\n};\n\nEventTarget.prototype.dispatchEvent = function () {\n  var event = arguments[0];\n  var t = event.type; // equivalent of Array.prototype.slice.call(arguments, 0);\n\n  var args = arguments.length === 1 ? [event] : Array.apply(null, arguments); // TODO: This doesn't match the real behavior; per spec, onfoo get\n  // their place in line from the /first/ time they're set from\n  // non-null. Although WebKit bumps it to the end every time it's\n  // set.\n\n  if (this['on' + t]) {\n    this['on' + t].apply(this, args);\n  }\n\n  if (t in this._listeners) {\n    // Grab a reference to the listeners list. removeEventListener may alter the list.\n    var listeners = this._listeners[t];\n\n    for (var i = 0; i < listeners.length; i++) {\n      listeners[i].apply(this, args);\n    }\n  }\n};\n\nmodule.exports = EventTarget;","'use strict';\n\nvar inherits = require('inherits'),\n    Event = require('./event');\n\nfunction TransportMessageEvent(data) {\n  Event.call(this);\n  this.initEvent('message', false, false);\n  this.data = data;\n}\n\ninherits(TransportMessageEvent, Event);\nmodule.exports = TransportMessageEvent;","'use strict';\n\nvar JSON3 = require('json3'),\n    iframeUtils = require('./utils/iframe');\n\nfunction FacadeJS(transport) {\n  this._transport = transport;\n  transport.on('message', this._transportMessage.bind(this));\n  transport.on('close', this._transportClose.bind(this));\n}\n\nFacadeJS.prototype._transportClose = function (code, reason) {\n  iframeUtils.postMessage('c', JSON3.stringify([code, reason]));\n};\n\nFacadeJS.prototype._transportMessage = function (frame) {\n  iframeUtils.postMessage('t', frame);\n};\n\nFacadeJS.prototype._send = function (data) {\n  this._transport.send(data);\n};\n\nFacadeJS.prototype._close = function () {\n  this._transport.close();\n\n  this._transport.removeAllListeners();\n};\n\nmodule.exports = FacadeJS;","'use strict';\n\nvar urlUtils = require('./utils/url'),\n    eventUtils = require('./utils/event'),\n    JSON3 = require('json3'),\n    FacadeJS = require('./facade'),\n    InfoIframeReceiver = require('./info-iframe-receiver'),\n    iframeUtils = require('./utils/iframe'),\n    loc = require('./location');\n\nvar debug = function debug() {};\n\nif (process.env.NODE_ENV !== 'production') {\n  debug = require('debug')('sockjs-client:iframe-bootstrap');\n}\n\nmodule.exports = function (SockJS, availableTransports) {\n  var transportMap = {};\n  availableTransports.forEach(function (at) {\n    if (at.facadeTransport) {\n      transportMap[at.facadeTransport.transportName] = at.facadeTransport;\n    }\n  }); // hard-coded for the info iframe\n  // TODO see if we can make this more dynamic\n\n  transportMap[InfoIframeReceiver.transportName] = InfoIframeReceiver;\n  var parentOrigin;\n  /* eslint-disable camelcase */\n\n  SockJS.bootstrap_iframe = function () {\n    /* eslint-enable camelcase */\n    var facade;\n    iframeUtils.currentWindowId = loc.hash.slice(1);\n\n    var onMessage = function onMessage(e) {\n      if (e.source !== parent) {\n        return;\n      }\n\n      if (typeof parentOrigin === 'undefined') {\n        parentOrigin = e.origin;\n      }\n\n      if (e.origin !== parentOrigin) {\n        return;\n      }\n\n      var iframeMessage;\n\n      try {\n        iframeMessage = JSON3.parse(e.data);\n      } catch (ignored) {\n        debug('bad json', e.data);\n        return;\n      }\n\n      if (iframeMessage.windowId !== iframeUtils.currentWindowId) {\n        return;\n      }\n\n      switch (iframeMessage.type) {\n        case 's':\n          var p;\n\n          try {\n            p = JSON3.parse(iframeMessage.data);\n          } catch (ignored) {\n            debug('bad json', iframeMessage.data);\n            break;\n          }\n\n          var version = p[0];\n          var transport = p[1];\n          var transUrl = p[2];\n          var baseUrl = p[3];\n          debug(version, transport, transUrl, baseUrl); // change this to semver logic\n\n          if (version !== SockJS.version) {\n            throw new Error('Incompatible SockJS! Main site uses:' + ' \"' + version + '\", the iframe:' + ' \"' + SockJS.version + '\".');\n          }\n\n          if (!urlUtils.isOriginEqual(transUrl, loc.href) || !urlUtils.isOriginEqual(baseUrl, loc.href)) {\n            throw new Error('Can\\'t connect to different domain from within an ' + 'iframe. (' + loc.href + ', ' + transUrl + ', ' + baseUrl + ')');\n          }\n\n          facade = new FacadeJS(new transportMap[transport](transUrl, baseUrl));\n          break;\n\n        case 'm':\n          facade._send(iframeMessage.data);\n\n          break;\n\n        case 'c':\n          if (facade) {\n            facade._close();\n          }\n\n          facade = null;\n          break;\n      }\n    };\n\n    eventUtils.attachEvent('message', onMessage); // Start\n\n    iframeUtils.postMessage('s');\n  };\n};","'use strict';\n\nvar EventEmitter = require('events').EventEmitter,\n    inherits = require('inherits'),\n    JSON3 = require('json3'),\n    objectUtils = require('./utils/object');\n\nvar debug = function debug() {};\n\nif (process.env.NODE_ENV !== 'production') {\n  debug = require('debug')('sockjs-client:info-ajax');\n}\n\nfunction InfoAjax(url, AjaxObject) {\n  EventEmitter.call(this);\n  var self = this;\n  var t0 = +new Date();\n  this.xo = new AjaxObject('GET', url);\n  this.xo.once('finish', function (status, text) {\n    var info, rtt;\n\n    if (status === 200) {\n      rtt = +new Date() - t0;\n\n      if (text) {\n        try {\n          info = JSON3.parse(text);\n        } catch (e) {\n          debug('bad json', text);\n        }\n      }\n\n      if (!objectUtils.isObject(info)) {\n        info = {};\n      }\n    }\n\n    self.emit('finish', info, rtt);\n    self.removeAllListeners();\n  });\n}\n\ninherits(InfoAjax, EventEmitter);\n\nInfoAjax.prototype.close = function () {\n  this.removeAllListeners();\n  this.xo.close();\n};\n\nmodule.exports = InfoAjax;","'use strict';\n\nvar inherits = require('inherits'),\n    EventEmitter = require('events').EventEmitter,\n    JSON3 = require('json3'),\n    XHRLocalObject = require('./transport/sender/xhr-local'),\n    InfoAjax = require('./info-ajax');\n\nfunction InfoReceiverIframe(transUrl) {\n  var self = this;\n  EventEmitter.call(this);\n  this.ir = new InfoAjax(transUrl, XHRLocalObject);\n  this.ir.once('finish', function (info, rtt) {\n    self.ir = null;\n    self.emit('message', JSON3.stringify([info, rtt]));\n  });\n}\n\ninherits(InfoReceiverIframe, EventEmitter);\nInfoReceiverIframe.transportName = 'iframe-info-receiver';\n\nInfoReceiverIframe.prototype.close = function () {\n  if (this.ir) {\n    this.ir.close();\n    this.ir = null;\n  }\n\n  this.removeAllListeners();\n};\n\nmodule.exports = InfoReceiverIframe;","'use strict';\n\nvar EventEmitter = require('events').EventEmitter,\n    inherits = require('inherits'),\n    JSON3 = require('json3'),\n    utils = require('./utils/event'),\n    IframeTransport = require('./transport/iframe'),\n    InfoReceiverIframe = require('./info-iframe-receiver');\n\nvar debug = function debug() {};\n\nif (process.env.NODE_ENV !== 'production') {\n  debug = require('debug')('sockjs-client:info-iframe');\n}\n\nfunction InfoIframe(baseUrl, url) {\n  var self = this;\n  EventEmitter.call(this);\n\n  var go = function go() {\n    var ifr = self.ifr = new IframeTransport(InfoReceiverIframe.transportName, url, baseUrl);\n    ifr.once('message', function (msg) {\n      if (msg) {\n        var d;\n\n        try {\n          d = JSON3.parse(msg);\n        } catch (e) {\n          debug('bad json', msg);\n          self.emit('finish');\n          self.close();\n          return;\n        }\n\n        var info = d[0],\n            rtt = d[1];\n        self.emit('finish', info, rtt);\n      }\n\n      self.close();\n    });\n    ifr.once('close', function () {\n      self.emit('finish');\n      self.close();\n    });\n  }; // TODO this seems the same as the 'needBody' from transports\n\n\n  if (!global.document.body) {\n    utils.attachEvent('load', go);\n  } else {\n    go();\n  }\n}\n\ninherits(InfoIframe, EventEmitter);\n\nInfoIframe.enabled = function () {\n  return IframeTransport.enabled();\n};\n\nInfoIframe.prototype.close = function () {\n  if (this.ifr) {\n    this.ifr.close();\n  }\n\n  this.removeAllListeners();\n  this.ifr = null;\n};\n\nmodule.exports = InfoIframe;","'use strict';\n\nvar EventEmitter = require('events').EventEmitter,\n    inherits = require('inherits'),\n    urlUtils = require('./utils/url'),\n    XDR = require('./transport/sender/xdr'),\n    XHRCors = require('./transport/sender/xhr-cors'),\n    XHRLocal = require('./transport/sender/xhr-local'),\n    XHRFake = require('./transport/sender/xhr-fake'),\n    InfoIframe = require('./info-iframe'),\n    InfoAjax = require('./info-ajax');\n\nvar debug = function debug() {};\n\nif (process.env.NODE_ENV !== 'production') {\n  debug = require('debug')('sockjs-client:info-receiver');\n}\n\nfunction InfoReceiver(baseUrl, urlInfo) {\n  debug(baseUrl);\n  var self = this;\n  EventEmitter.call(this);\n  setTimeout(function () {\n    self.doXhr(baseUrl, urlInfo);\n  }, 0);\n}\n\ninherits(InfoReceiver, EventEmitter); // TODO this is currently ignoring the list of available transports and the whitelist\n\nInfoReceiver._getReceiver = function (baseUrl, url, urlInfo) {\n  // determine method of CORS support (if needed)\n  if (urlInfo.sameOrigin) {\n    return new InfoAjax(url, XHRLocal);\n  }\n\n  if (XHRCors.enabled) {\n    return new InfoAjax(url, XHRCors);\n  }\n\n  if (XDR.enabled && urlInfo.sameScheme) {\n    return new InfoAjax(url, XDR);\n  }\n\n  if (InfoIframe.enabled()) {\n    return new InfoIframe(baseUrl, url);\n  }\n\n  return new InfoAjax(url, XHRFake);\n};\n\nInfoReceiver.prototype.doXhr = function (baseUrl, urlInfo) {\n  var self = this,\n      url = urlUtils.addPath(baseUrl, '/info');\n  debug('doXhr', url);\n  this.xo = InfoReceiver._getReceiver(baseUrl, url, urlInfo);\n  this.timeoutRef = setTimeout(function () {\n    debug('timeout');\n\n    self._cleanup(false);\n\n    self.emit('finish');\n  }, InfoReceiver.timeout);\n  this.xo.once('finish', function (info, rtt) {\n    debug('finish', info, rtt);\n\n    self._cleanup(true);\n\n    self.emit('finish', info, rtt);\n  });\n};\n\nInfoReceiver.prototype._cleanup = function (wasClean) {\n  debug('_cleanup');\n  clearTimeout(this.timeoutRef);\n  this.timeoutRef = null;\n\n  if (!wasClean && this.xo) {\n    this.xo.close();\n  }\n\n  this.xo = null;\n};\n\nInfoReceiver.prototype.close = function () {\n  debug('close');\n  this.removeAllListeners();\n\n  this._cleanup(false);\n};\n\nInfoReceiver.timeout = 8000;\nmodule.exports = InfoReceiver;","'use strict';\n\nmodule.exports = global.location || {\n  origin: 'http://localhost:80',\n  protocol: 'http:',\n  host: 'localhost',\n  port: 80,\n  href: 'http://localhost/',\n  hash: ''\n};","'use strict';\n\nrequire('./shims');\n\nvar URL = require('url-parse'),\n    inherits = require('inherits'),\n    JSON3 = require('json3'),\n    random = require('./utils/random'),\n    escape = require('./utils/escape'),\n    urlUtils = require('./utils/url'),\n    eventUtils = require('./utils/event'),\n    transport = require('./utils/transport'),\n    objectUtils = require('./utils/object'),\n    browser = require('./utils/browser'),\n    log = require('./utils/log'),\n    Event = require('./event/event'),\n    EventTarget = require('./event/eventtarget'),\n    loc = require('./location'),\n    CloseEvent = require('./event/close'),\n    TransportMessageEvent = require('./event/trans-message'),\n    InfoReceiver = require('./info-receiver');\n\nvar debug = function debug() {};\n\nif (process.env.NODE_ENV !== 'production') {\n  debug = require('debug')('sockjs-client:main');\n}\n\nvar transports; // follow constructor steps defined at http://dev.w3.org/html5/websockets/#the-websocket-interface\n\nfunction SockJS(url, protocols, options) {\n  if (!(this instanceof SockJS)) {\n    return new SockJS(url, protocols, options);\n  }\n\n  if (arguments.length < 1) {\n    throw new TypeError(\"Failed to construct 'SockJS: 1 argument required, but only 0 present\");\n  }\n\n  EventTarget.call(this);\n  this.readyState = SockJS.CONNECTING;\n  this.extensions = '';\n  this.protocol = ''; // non-standard extension\n\n  options = options || {};\n\n  if (options.protocols_whitelist) {\n    log.warn(\"'protocols_whitelist' is DEPRECATED. Use 'transports' instead.\");\n  }\n\n  this._transportsWhitelist = options.transports;\n  this._transportOptions = options.transportOptions || {};\n  this._timeout = options.timeout || 0;\n  var sessionId = options.sessionId || 8;\n\n  if (typeof sessionId === 'function') {\n    this._generateSessionId = sessionId;\n  } else if (typeof sessionId === 'number') {\n    this._generateSessionId = function () {\n      return random.string(sessionId);\n    };\n  } else {\n    throw new TypeError('If sessionId is used in the options, it needs to be a number or a function.');\n  }\n\n  this._server = options.server || random.numberString(1000); // Step 1 of WS spec - parse and validate the url. Issue #8\n\n  var parsedUrl = new URL(url);\n\n  if (!parsedUrl.host || !parsedUrl.protocol) {\n    throw new SyntaxError(\"The URL '\" + url + \"' is invalid\");\n  } else if (parsedUrl.hash) {\n    throw new SyntaxError('The URL must not contain a fragment');\n  } else if (parsedUrl.protocol !== 'http:' && parsedUrl.protocol !== 'https:') {\n    throw new SyntaxError(\"The URL's scheme must be either 'http:' or 'https:'. '\" + parsedUrl.protocol + \"' is not allowed.\");\n  }\n\n  var secure = parsedUrl.protocol === 'https:'; // Step 2 - don't allow secure origin with an insecure protocol\n\n  if (loc.protocol === 'https:' && !secure) {\n    // exception is 127.0.0.0/8 and ::1 urls\n    if (!urlUtils.isLoopbackAddr(parsedUrl.hostname)) {\n      throw new Error('SecurityError: An insecure SockJS connection may not be initiated from a page loaded over HTTPS');\n    }\n  } // Step 3 - check port access - no need here\n  // Step 4 - parse protocols argument\n\n\n  if (!protocols) {\n    protocols = [];\n  } else if (!Array.isArray(protocols)) {\n    protocols = [protocols];\n  } // Step 5 - check protocols argument\n\n\n  var sortedProtocols = protocols.sort();\n  sortedProtocols.forEach(function (proto, i) {\n    if (!proto) {\n      throw new SyntaxError(\"The protocols entry '\" + proto + \"' is invalid.\");\n    }\n\n    if (i < sortedProtocols.length - 1 && proto === sortedProtocols[i + 1]) {\n      throw new SyntaxError(\"The protocols entry '\" + proto + \"' is duplicated.\");\n    }\n  }); // Step 6 - convert origin\n\n  var o = urlUtils.getOrigin(loc.href);\n  this._origin = o ? o.toLowerCase() : null; // remove the trailing slash\n\n  parsedUrl.set('pathname', parsedUrl.pathname.replace(/\\/+$/, '')); // store the sanitized url\n\n  this.url = parsedUrl.href;\n  debug('using url', this.url); // Step 7 - start connection in background\n  // obtain server info\n  // http://sockjs.github.io/sockjs-protocol/sockjs-protocol-0.3.3.html#section-26\n\n  this._urlInfo = {\n    nullOrigin: !browser.hasDomain(),\n    sameOrigin: urlUtils.isOriginEqual(this.url, loc.href),\n    sameScheme: urlUtils.isSchemeEqual(this.url, loc.href)\n  };\n  this._ir = new InfoReceiver(this.url, this._urlInfo);\n\n  this._ir.once('finish', this._receiveInfo.bind(this));\n}\n\ninherits(SockJS, EventTarget);\n\nfunction userSetCode(code) {\n  return code === 1000 || code >= 3000 && code <= 4999;\n}\n\nSockJS.prototype.close = function (code, reason) {\n  // Step 1\n  if (code && !userSetCode(code)) {\n    throw new Error('InvalidAccessError: Invalid code');\n  } // Step 2.4 states the max is 123 bytes, but we are just checking length\n\n\n  if (reason && reason.length > 123) {\n    throw new SyntaxError('reason argument has an invalid length');\n  } // Step 3.1\n\n\n  if (this.readyState === SockJS.CLOSING || this.readyState === SockJS.CLOSED) {\n    return;\n  } // TODO look at docs to determine how to set this\n\n\n  var wasClean = true;\n\n  this._close(code || 1000, reason || 'Normal closure', wasClean);\n};\n\nSockJS.prototype.send = function (data) {\n  // #13 - convert anything non-string to string\n  // TODO this currently turns objects into [object Object]\n  if (typeof data !== 'string') {\n    data = '' + data;\n  }\n\n  if (this.readyState === SockJS.CONNECTING) {\n    throw new Error('InvalidStateError: The connection has not been established yet');\n  }\n\n  if (this.readyState !== SockJS.OPEN) {\n    return;\n  }\n\n  this._transport.send(escape.quote(data));\n};\n\nSockJS.version = require('./version');\nSockJS.CONNECTING = 0;\nSockJS.OPEN = 1;\nSockJS.CLOSING = 2;\nSockJS.CLOSED = 3;\n\nSockJS.prototype._receiveInfo = function (info, rtt) {\n  debug('_receiveInfo', rtt);\n  this._ir = null;\n\n  if (!info) {\n    this._close(1002, 'Cannot connect to server');\n\n    return;\n  } // establish a round-trip timeout (RTO) based on the\n  // round-trip time (RTT)\n\n\n  this._rto = this.countRTO(rtt); // allow server to override url used for the actual transport\n\n  this._transUrl = info.base_url ? info.base_url : this.url;\n  info = objectUtils.extend(info, this._urlInfo);\n  debug('info', info); // determine list of desired and supported transports\n\n  var enabledTransports = transports.filterToEnabled(this._transportsWhitelist, info);\n  this._transports = enabledTransports.main;\n  debug(this._transports.length + ' enabled transports');\n\n  this._connect();\n};\n\nSockJS.prototype._connect = function () {\n  for (var Transport = this._transports.shift(); Transport; Transport = this._transports.shift()) {\n    debug('attempt', Transport.transportName);\n\n    if (Transport.needBody) {\n      if (!global.document.body || typeof global.document.readyState !== 'undefined' && global.document.readyState !== 'complete' && global.document.readyState !== 'interactive') {\n        debug('waiting for body');\n\n        this._transports.unshift(Transport);\n\n        eventUtils.attachEvent('load', this._connect.bind(this));\n        return;\n      }\n    } // calculate timeout based on RTO and round trips. Default to 5s\n\n\n    var timeoutMs = Math.max(this._timeout, this._rto * Transport.roundTrips || 5000);\n    this._transportTimeoutId = setTimeout(this._transportTimeout.bind(this), timeoutMs);\n    debug('using timeout', timeoutMs);\n    var transportUrl = urlUtils.addPath(this._transUrl, '/' + this._server + '/' + this._generateSessionId());\n    var options = this._transportOptions[Transport.transportName];\n    debug('transport url', transportUrl);\n    var transportObj = new Transport(transportUrl, this._transUrl, options);\n    transportObj.on('message', this._transportMessage.bind(this));\n    transportObj.once('close', this._transportClose.bind(this));\n    transportObj.transportName = Transport.transportName;\n    this._transport = transportObj;\n    return;\n  }\n\n  this._close(2000, 'All transports failed', false);\n};\n\nSockJS.prototype._transportTimeout = function () {\n  debug('_transportTimeout');\n\n  if (this.readyState === SockJS.CONNECTING) {\n    if (this._transport) {\n      this._transport.close();\n    }\n\n    this._transportClose(2007, 'Transport timed out');\n  }\n};\n\nSockJS.prototype._transportMessage = function (msg) {\n  debug('_transportMessage', msg);\n  var self = this,\n      type = msg.slice(0, 1),\n      content = msg.slice(1),\n      payload; // first check for messages that don't need a payload\n\n  switch (type) {\n    case 'o':\n      this._open();\n\n      return;\n\n    case 'h':\n      this.dispatchEvent(new Event('heartbeat'));\n      debug('heartbeat', this.transport);\n      return;\n  }\n\n  if (content) {\n    try {\n      payload = JSON3.parse(content);\n    } catch (e) {\n      debug('bad json', content);\n    }\n  }\n\n  if (typeof payload === 'undefined') {\n    debug('empty payload', content);\n    return;\n  }\n\n  switch (type) {\n    case 'a':\n      if (Array.isArray(payload)) {\n        payload.forEach(function (p) {\n          debug('message', self.transport, p);\n          self.dispatchEvent(new TransportMessageEvent(p));\n        });\n      }\n\n      break;\n\n    case 'm':\n      debug('message', this.transport, payload);\n      this.dispatchEvent(new TransportMessageEvent(payload));\n      break;\n\n    case 'c':\n      if (Array.isArray(payload) && payload.length === 2) {\n        this._close(payload[0], payload[1], true);\n      }\n\n      break;\n  }\n};\n\nSockJS.prototype._transportClose = function (code, reason) {\n  debug('_transportClose', this.transport, code, reason);\n\n  if (this._transport) {\n    this._transport.removeAllListeners();\n\n    this._transport = null;\n    this.transport = null;\n  }\n\n  if (!userSetCode(code) && code !== 2000 && this.readyState === SockJS.CONNECTING) {\n    this._connect();\n\n    return;\n  }\n\n  this._close(code, reason);\n};\n\nSockJS.prototype._open = function () {\n  debug('_open', this._transport && this._transport.transportName, this.readyState);\n\n  if (this.readyState === SockJS.CONNECTING) {\n    if (this._transportTimeoutId) {\n      clearTimeout(this._transportTimeoutId);\n      this._transportTimeoutId = null;\n    }\n\n    this.readyState = SockJS.OPEN;\n    this.transport = this._transport.transportName;\n    this.dispatchEvent(new Event('open'));\n    debug('connected', this.transport);\n  } else {\n    // The server might have been restarted, and lost track of our\n    // connection.\n    this._close(1006, 'Server lost session');\n  }\n};\n\nSockJS.prototype._close = function (code, reason, wasClean) {\n  debug('_close', this.transport, code, reason, wasClean, this.readyState);\n  var forceFail = false;\n\n  if (this._ir) {\n    forceFail = true;\n\n    this._ir.close();\n\n    this._ir = null;\n  }\n\n  if (this._transport) {\n    this._transport.close();\n\n    this._transport = null;\n    this.transport = null;\n  }\n\n  if (this.readyState === SockJS.CLOSED) {\n    throw new Error('InvalidStateError: SockJS has already been closed');\n  }\n\n  this.readyState = SockJS.CLOSING;\n  setTimeout(function () {\n    this.readyState = SockJS.CLOSED;\n\n    if (forceFail) {\n      this.dispatchEvent(new Event('error'));\n    }\n\n    var e = new CloseEvent('close');\n    e.wasClean = wasClean || false;\n    e.code = code || 1000;\n    e.reason = reason;\n    this.dispatchEvent(e);\n    this.onmessage = this.onclose = this.onerror = null;\n    debug('disconnected');\n  }.bind(this), 0);\n}; // See: http://www.erg.abdn.ac.uk/~gerrit/dccp/notes/ccid2/rto_estimator/\n// and RFC 2988.\n\n\nSockJS.prototype.countRTO = function (rtt) {\n  // In a local environment, when using IE8/9 and the `jsonp-polling`\n  // transport the time needed to establish a connection (the time that pass\n  // from the opening of the transport to the call of `_dispatchOpen`) is\n  // around 200msec (the lower bound used in the article above) and this\n  // causes spurious timeouts. For this reason we calculate a value slightly\n  // larger than that used in the article.\n  if (rtt > 100) {\n    return 4 * rtt; // rto > 400msec\n  }\n\n  return 300 + rtt; // 300msec < rto <= 400msec\n};\n\nmodule.exports = function (availableTransports) {\n  transports = transport(availableTransports);\n\n  require('./iframe-bootstrap')(SockJS, availableTransports);\n\n  return SockJS;\n};","/* eslint-disable */\n\n/* jscs: disable */\n'use strict'; // pulled specific shims from https://github.com/es-shims/es5-shim\n\nvar ArrayPrototype = Array.prototype;\nvar ObjectPrototype = Object.prototype;\nvar FunctionPrototype = Function.prototype;\nvar StringPrototype = String.prototype;\nvar array_slice = ArrayPrototype.slice;\nvar _toString = ObjectPrototype.toString;\n\nvar isFunction = function isFunction(val) {\n  return ObjectPrototype.toString.call(val) === '[object Function]';\n};\n\nvar isArray = function isArray(obj) {\n  return _toString.call(obj) === '[object Array]';\n};\n\nvar isString = function isString(obj) {\n  return _toString.call(obj) === '[object String]';\n};\n\nvar supportsDescriptors = Object.defineProperty && function () {\n  try {\n    Object.defineProperty({}, 'x', {});\n    return true;\n  } catch (e) {\n    /* this is ES3 */\n    return false;\n  }\n}(); // Define configurable, writable and non-enumerable props\n// if they don't exist.\n\n\nvar defineProperty;\n\nif (supportsDescriptors) {\n  defineProperty = function defineProperty(object, name, method, forceAssign) {\n    if (!forceAssign && name in object) {\n      return;\n    }\n\n    Object.defineProperty(object, name, {\n      configurable: true,\n      enumerable: false,\n      writable: true,\n      value: method\n    });\n  };\n} else {\n  defineProperty = function defineProperty(object, name, method, forceAssign) {\n    if (!forceAssign && name in object) {\n      return;\n    }\n\n    object[name] = method;\n  };\n}\n\nvar defineProperties = function defineProperties(object, map, forceAssign) {\n  for (var name in map) {\n    if (ObjectPrototype.hasOwnProperty.call(map, name)) {\n      defineProperty(object, name, map[name], forceAssign);\n    }\n  }\n};\n\nvar toObject = function toObject(o) {\n  if (o == null) {\n    // this matches both null and undefined\n    throw new TypeError(\"can't convert \" + o + ' to object');\n  }\n\n  return Object(o);\n}; //\n// Util\n// ======\n//\n// ES5 9.4\n// http://es5.github.com/#x9.4\n// http://jsperf.com/to-integer\n\n\nfunction toInteger(num) {\n  var n = +num;\n\n  if (n !== n) {\n    // isNaN\n    n = 0;\n  } else if (n !== 0 && n !== 1 / 0 && n !== -(1 / 0)) {\n    n = (n > 0 || -1) * Math.floor(Math.abs(n));\n  }\n\n  return n;\n}\n\nfunction ToUint32(x) {\n  return x >>> 0;\n} //\n// Function\n// ========\n//\n// ES-5 15.3.4.5\n// http://es5.github.com/#x15.3.4.5\n\n\nfunction Empty() {}\n\ndefineProperties(FunctionPrototype, {\n  bind: function bind(that) {\n    // .length is 1\n    // 1. Let Target be the this value.\n    var target = this; // 2. If IsCallable(Target) is false, throw a TypeError exception.\n\n    if (!isFunction(target)) {\n      throw new TypeError('Function.prototype.bind called on incompatible ' + target);\n    } // 3. Let A be a new (possibly empty) internal list of all of the\n    //   argument values provided after thisArg (arg1, arg2 etc), in order.\n    // XXX slicedArgs will stand in for \"A\" if used\n\n\n    var args = array_slice.call(arguments, 1); // for normal call\n    // 4. Let F be a new native ECMAScript object.\n    // 11. Set the [[Prototype]] internal property of F to the standard\n    //   built-in Function prototype object as specified in 15.3.3.1.\n    // 12. Set the [[Call]] internal property of F as described in\n    //   15.3.4.5.1.\n    // 13. Set the [[Construct]] internal property of F as described in\n    //   15.3.4.5.2.\n    // 14. Set the [[HasInstance]] internal property of F as described in\n    //   15.3.4.5.3.\n\n    var binder = function binder() {\n      if (this instanceof bound) {\n        // 15.3.4.5.2 [[Construct]]\n        // When the [[Construct]] internal method of a function object,\n        // F that was created using the bind function is called with a\n        // list of arguments ExtraArgs, the following steps are taken:\n        // 1. Let target be the value of F's [[TargetFunction]]\n        //   internal property.\n        // 2. If target has no [[Construct]] internal method, a\n        //   TypeError exception is thrown.\n        // 3. Let boundArgs be the value of F's [[BoundArgs]] internal\n        //   property.\n        // 4. Let args be a new list containing the same values as the\n        //   list boundArgs in the same order followed by the same\n        //   values as the list ExtraArgs in the same order.\n        // 5. Return the result of calling the [[Construct]] internal\n        //   method of target providing args as the arguments.\n        var result = target.apply(this, args.concat(array_slice.call(arguments)));\n\n        if (Object(result) === result) {\n          return result;\n        }\n\n        return this;\n      } else {\n        // 15.3.4.5.1 [[Call]]\n        // When the [[Call]] internal method of a function object, F,\n        // which was created using the bind function is called with a\n        // this value and a list of arguments ExtraArgs, the following\n        // steps are taken:\n        // 1. Let boundArgs be the value of F's [[BoundArgs]] internal\n        //   property.\n        // 2. Let boundThis be the value of F's [[BoundThis]] internal\n        //   property.\n        // 3. Let target be the value of F's [[TargetFunction]] internal\n        //   property.\n        // 4. Let args be a new list containing the same values as the\n        //   list boundArgs in the same order followed by the same\n        //   values as the list ExtraArgs in the same order.\n        // 5. Return the result of calling the [[Call]] internal method\n        //   of target providing boundThis as the this value and\n        //   providing args as the arguments.\n        // equiv: target.call(this, ...boundArgs, ...args)\n        return target.apply(that, args.concat(array_slice.call(arguments)));\n      }\n    }; // 15. If the [[Class]] internal property of Target is \"Function\", then\n    //     a. Let L be the length property of Target minus the length of A.\n    //     b. Set the length own property of F to either 0 or L, whichever is\n    //       larger.\n    // 16. Else set the length own property of F to 0.\n\n\n    var boundLength = Math.max(0, target.length - args.length); // 17. Set the attributes of the length own property of F to the values\n    //   specified in 15.3.5.1.\n\n    var boundArgs = [];\n\n    for (var i = 0; i < boundLength; i++) {\n      boundArgs.push('$' + i);\n    } // XXX Build a dynamic function with desired amount of arguments is the only\n    // way to set the length property of a function.\n    // In environments where Content Security Policies enabled (Chrome extensions,\n    // for ex.) all use of eval or Function costructor throws an exception.\n    // However in all of these environments Function.prototype.bind exists\n    // and so this code will never be executed.\n\n\n    var bound = Function('binder', 'return function (' + boundArgs.join(',') + '){ return binder.apply(this, arguments); }')(binder);\n\n    if (target.prototype) {\n      Empty.prototype = target.prototype;\n      bound.prototype = new Empty(); // Clean up dangling references.\n\n      Empty.prototype = null;\n    } // TODO\n    // 18. Set the [[Extensible]] internal property of F to true.\n    // TODO\n    // 19. Let thrower be the [[ThrowTypeError]] function Object (13.2.3).\n    // 20. Call the [[DefineOwnProperty]] internal method of F with\n    //   arguments \"caller\", PropertyDescriptor {[[Get]]: thrower, [[Set]]:\n    //   thrower, [[Enumerable]]: false, [[Configurable]]: false}, and\n    //   false.\n    // 21. Call the [[DefineOwnProperty]] internal method of F with\n    //   arguments \"arguments\", PropertyDescriptor {[[Get]]: thrower,\n    //   [[Set]]: thrower, [[Enumerable]]: false, [[Configurable]]: false},\n    //   and false.\n    // TODO\n    // NOTE Function objects created using Function.prototype.bind do not\n    // have a prototype property or the [[Code]], [[FormalParameters]], and\n    // [[Scope]] internal properties.\n    // XXX can't delete prototype in pure-js.\n    // 22. Return F.\n\n\n    return bound;\n  }\n}); //\n// Array\n// =====\n//\n// ES5 15.4.3.2\n// http://es5.github.com/#x15.4.3.2\n// https://developer.mozilla.org/en/JavaScript/Reference/Global_Objects/Array/isArray\n\ndefineProperties(Array, {\n  isArray: isArray\n});\nvar boxedString = Object('a');\nvar splitString = boxedString[0] !== 'a' || !(0 in boxedString);\n\nvar properlyBoxesContext = function properlyBoxed(method) {\n  // Check node 0.6.21 bug where third parameter is not boxed\n  var properlyBoxesNonStrict = true;\n  var properlyBoxesStrict = true;\n\n  if (method) {\n    method.call('foo', function (_, __, context) {\n      if (typeof context !== 'object') {\n        properlyBoxesNonStrict = false;\n      }\n    });\n    method.call([1], function () {\n      'use strict';\n\n      properlyBoxesStrict = typeof this === 'string';\n    }, 'x');\n  }\n\n  return !!method && properlyBoxesNonStrict && properlyBoxesStrict;\n};\n\ndefineProperties(ArrayPrototype, {\n  forEach: function forEach(fun\n  /*, thisp*/\n  ) {\n    var object = toObject(this),\n        self = splitString && isString(this) ? this.split('') : object,\n        thisp = arguments[1],\n        i = -1,\n        length = self.length >>> 0; // If no callback function or if callback is not a callable function\n\n    if (!isFunction(fun)) {\n      throw new TypeError(); // TODO message\n    }\n\n    while (++i < length) {\n      if (i in self) {\n        // Invoke the callback function with call, passing arguments:\n        // context, property value, property key, thisArg object\n        // context\n        fun.call(thisp, self[i], i, object);\n      }\n    }\n  }\n}, !properlyBoxesContext(ArrayPrototype.forEach)); // ES5 15.4.4.14\n// http://es5.github.com/#x15.4.4.14\n// https://developer.mozilla.org/en/JavaScript/Reference/Global_Objects/Array/indexOf\n\nvar hasFirefox2IndexOfBug = Array.prototype.indexOf && [0, 1].indexOf(1, 2) !== -1;\ndefineProperties(ArrayPrototype, {\n  indexOf: function indexOf(sought\n  /*, fromIndex */\n  ) {\n    var self = splitString && isString(this) ? this.split('') : toObject(this),\n        length = self.length >>> 0;\n\n    if (!length) {\n      return -1;\n    }\n\n    var i = 0;\n\n    if (arguments.length > 1) {\n      i = toInteger(arguments[1]);\n    } // handle negative indices\n\n\n    i = i >= 0 ? i : Math.max(0, length + i);\n\n    for (; i < length; i++) {\n      if (i in self && self[i] === sought) {\n        return i;\n      }\n    }\n\n    return -1;\n  }\n}, hasFirefox2IndexOfBug); //\n// String\n// ======\n//\n// ES5 15.5.4.14\n// http://es5.github.com/#x15.5.4.14\n// [bugfix, IE lt 9, firefox 4, Konqueror, Opera, obscure browsers]\n// Many browsers do not split properly with regular expressions or they\n// do not perform the split correctly under obscure conditions.\n// See http://blog.stevenlevithan.com/archives/cross-browser-split\n// I've tested in many browsers and this seems to cover the deviant ones:\n//    'ab'.split(/(?:ab)*/) should be [\"\", \"\"], not [\"\"]\n//    '.'.split(/(.?)(.?)/) should be [\"\", \".\", \"\", \"\"], not [\"\", \"\"]\n//    'tesst'.split(/(s)*/) should be [\"t\", undefined, \"e\", \"s\", \"t\"], not\n//       [undefined, \"t\", undefined, \"e\", ...]\n//    ''.split(/.?/) should be [], not [\"\"]\n//    '.'.split(/()()/) should be [\".\"], not [\"\", \"\", \".\"]\n\nvar string_split = StringPrototype.split;\n\nif ('ab'.split(/(?:ab)*/).length !== 2 || '.'.split(/(.?)(.?)/).length !== 4 || 'tesst'.split(/(s)*/)[1] === 't' || 'test'.split(/(?:)/, -1).length !== 4 || ''.split(/.?/).length || '.'.split(/()()/).length > 1) {\n  (function () {\n    var compliantExecNpcg = /()??/.exec('')[1] === void 0; // NPCG: nonparticipating capturing group\n\n    StringPrototype.split = function (separator, limit) {\n      var string = this;\n\n      if (separator === void 0 && limit === 0) {\n        return [];\n      } // If `separator` is not a regex, use native split\n\n\n      if (_toString.call(separator) !== '[object RegExp]') {\n        return string_split.call(this, separator, limit);\n      }\n\n      var output = [],\n          flags = (separator.ignoreCase ? 'i' : '') + (separator.multiline ? 'm' : '') + (separator.extended ? 'x' : '') + ( // Proposed for ES6\n      separator.sticky ? 'y' : ''),\n          // Firefox 3+\n      lastLastIndex = 0,\n          // Make `global` and avoid `lastIndex` issues by working with a copy\n      separator2,\n          match,\n          lastIndex,\n          lastLength;\n      separator = new RegExp(separator.source, flags + 'g');\n      string += ''; // Type-convert\n\n      if (!compliantExecNpcg) {\n        // Doesn't need flags gy, but they don't hurt\n        separator2 = new RegExp('^' + separator.source + '$(?!\\\\s)', flags);\n      }\n      /* Values for `limit`, per the spec:\n       * If undefined: 4294967295 // Math.pow(2, 32) - 1\n       * If 0, Infinity, or NaN: 0\n       * If positive number: limit = Math.floor(limit); if (limit > 4294967295) limit -= 4294967296;\n       * If negative number: 4294967296 - Math.floor(Math.abs(limit))\n       * If other: Type-convert, then use the above rules\n       */\n\n\n      limit = limit === void 0 ? -1 >>> 0 : // Math.pow(2, 32) - 1\n      ToUint32(limit);\n\n      while (match = separator.exec(string)) {\n        // `separator.lastIndex` is not reliable cross-browser\n        lastIndex = match.index + match[0].length;\n\n        if (lastIndex > lastLastIndex) {\n          output.push(string.slice(lastLastIndex, match.index)); // Fix browsers whose `exec` methods don't consistently return `undefined` for\n          // nonparticipating capturing groups\n\n          if (!compliantExecNpcg && match.length > 1) {\n            match[0].replace(separator2, function () {\n              for (var i = 1; i < arguments.length - 2; i++) {\n                if (arguments[i] === void 0) {\n                  match[i] = void 0;\n                }\n              }\n            });\n          }\n\n          if (match.length > 1 && match.index < string.length) {\n            ArrayPrototype.push.apply(output, match.slice(1));\n          }\n\n          lastLength = match[0].length;\n          lastLastIndex = lastIndex;\n\n          if (output.length >= limit) {\n            break;\n          }\n        }\n\n        if (separator.lastIndex === match.index) {\n          separator.lastIndex++; // Avoid an infinite loop\n        }\n      }\n\n      if (lastLastIndex === string.length) {\n        if (lastLength || !separator.test('')) {\n          output.push('');\n        }\n      } else {\n        output.push(string.slice(lastLastIndex));\n      }\n\n      return output.length > limit ? output.slice(0, limit) : output;\n    };\n  })(); // [bugfix, chrome]\n  // If separator is undefined, then the result array contains just one String,\n  // which is the this value (converted to a String). If limit is not undefined,\n  // then the output array is truncated so that it contains no more than limit\n  // elements.\n  // \"0\".split(undefined, 0) -> []\n\n} else if ('0'.split(void 0, 0).length) {\n  StringPrototype.split = function split(separator, limit) {\n    if (separator === void 0 && limit === 0) {\n      return [];\n    }\n\n    return string_split.call(this, separator, limit);\n  };\n} // ECMA-262, 3rd B.2.3\n// Not an ECMAScript standard, although ECMAScript 3rd Edition has a\n// non-normative section suggesting uniform semantics and it should be\n// normalized across all browsers\n// [bugfix, IE lt 9] IE < 9 substr() with negative value not working in IE\n\n\nvar string_substr = StringPrototype.substr;\nvar hasNegativeSubstrBug = ''.substr && '0b'.substr(-1) !== 'b';\ndefineProperties(StringPrototype, {\n  substr: function substr(start, length) {\n    return string_substr.call(this, start < 0 ? (start = this.length + start) < 0 ? 0 : start : start, length);\n  }\n}, hasNegativeSubstrBug);","'use strict';\n\nmodule.exports = [// streaming transports\nrequire('./transport/websocket'), require('./transport/xhr-streaming'), require('./transport/xdr-streaming'), require('./transport/eventsource'), require('./transport/lib/iframe-wrap')(require('./transport/eventsource')) // polling transports\n, require('./transport/htmlfile'), require('./transport/lib/iframe-wrap')(require('./transport/htmlfile')), require('./transport/xhr-polling'), require('./transport/xdr-polling'), require('./transport/lib/iframe-wrap')(require('./transport/xhr-polling')), require('./transport/jsonp-polling')];","'use strict';\n\nvar EventEmitter = require('events').EventEmitter,\n    inherits = require('inherits'),\n    utils = require('../../utils/event'),\n    urlUtils = require('../../utils/url'),\n    XHR = global.XMLHttpRequest;\n\nvar debug = function debug() {};\n\nif (process.env.NODE_ENV !== 'production') {\n  debug = require('debug')('sockjs-client:browser:xhr');\n}\n\nfunction AbstractXHRObject(method, url, payload, opts) {\n  debug(method, url);\n  var self = this;\n  EventEmitter.call(this);\n  setTimeout(function () {\n    self._start(method, url, payload, opts);\n  }, 0);\n}\n\ninherits(AbstractXHRObject, EventEmitter);\n\nAbstractXHRObject.prototype._start = function (method, url, payload, opts) {\n  var self = this;\n\n  try {\n    this.xhr = new XHR();\n  } catch (x) {// intentionally empty\n  }\n\n  if (!this.xhr) {\n    debug('no xhr');\n    this.emit('finish', 0, 'no xhr support');\n\n    this._cleanup();\n\n    return;\n  } // several browsers cache POSTs\n\n\n  url = urlUtils.addQuery(url, 't=' + +new Date()); // Explorer tends to keep connection open, even after the\n  // tab gets closed: http://bugs.jquery.com/ticket/5280\n\n  this.unloadRef = utils.unloadAdd(function () {\n    debug('unload cleanup');\n\n    self._cleanup(true);\n  });\n\n  try {\n    this.xhr.open(method, url, true);\n\n    if (this.timeout && 'timeout' in this.xhr) {\n      this.xhr.timeout = this.timeout;\n\n      this.xhr.ontimeout = function () {\n        debug('xhr timeout');\n        self.emit('finish', 0, '');\n\n        self._cleanup(false);\n      };\n    }\n  } catch (e) {\n    debug('exception', e); // IE raises an exception on wrong port.\n\n    this.emit('finish', 0, '');\n\n    this._cleanup(false);\n\n    return;\n  }\n\n  if ((!opts || !opts.noCredentials) && AbstractXHRObject.supportsCORS) {\n    debug('withCredentials'); // Mozilla docs says https://developer.mozilla.org/en/XMLHttpRequest :\n    // \"This never affects same-site requests.\"\n\n    this.xhr.withCredentials = true;\n  }\n\n  if (opts && opts.headers) {\n    for (var key in opts.headers) {\n      this.xhr.setRequestHeader(key, opts.headers[key]);\n    }\n  }\n\n  this.xhr.onreadystatechange = function () {\n    if (self.xhr) {\n      var x = self.xhr;\n      var text, status;\n      debug('readyState', x.readyState);\n\n      switch (x.readyState) {\n        case 3:\n          // IE doesn't like peeking into responseText or status\n          // on Microsoft.XMLHTTP and readystate=3\n          try {\n            status = x.status;\n            text = x.responseText;\n          } catch (e) {// intentionally empty\n          }\n\n          debug('status', status); // IE returns 1223 for 204: http://bugs.jquery.com/ticket/1450\n\n          if (status === 1223) {\n            status = 204;\n          } // IE does return readystate == 3 for 404 answers.\n\n\n          if (status === 200 && text && text.length > 0) {\n            debug('chunk');\n            self.emit('chunk', status, text);\n          }\n\n          break;\n\n        case 4:\n          status = x.status;\n          debug('status', status); // IE returns 1223 for 204: http://bugs.jquery.com/ticket/1450\n\n          if (status === 1223) {\n            status = 204;\n          } // IE returns this for a bad port\n          // http://msdn.microsoft.com/en-us/library/windows/desktop/aa383770(v=vs.85).aspx\n\n\n          if (status === 12005 || status === 12029) {\n            status = 0;\n          }\n\n          debug('finish', status, x.responseText);\n          self.emit('finish', status, x.responseText);\n\n          self._cleanup(false);\n\n          break;\n      }\n    }\n  };\n\n  try {\n    self.xhr.send(payload);\n  } catch (e) {\n    self.emit('finish', 0, '');\n\n    self._cleanup(false);\n  }\n};\n\nAbstractXHRObject.prototype._cleanup = function (abort) {\n  debug('cleanup');\n\n  if (!this.xhr) {\n    return;\n  }\n\n  this.removeAllListeners();\n  utils.unloadDel(this.unloadRef); // IE needs this field to be a function\n\n  this.xhr.onreadystatechange = function () {};\n\n  if (this.xhr.ontimeout) {\n    this.xhr.ontimeout = null;\n  }\n\n  if (abort) {\n    try {\n      this.xhr.abort();\n    } catch (x) {// intentionally empty\n    }\n  }\n\n  this.unloadRef = this.xhr = null;\n};\n\nAbstractXHRObject.prototype.close = function () {\n  debug('close');\n\n  this._cleanup(true);\n};\n\nAbstractXHRObject.enabled = !!XHR; // override XMLHttpRequest for IE6/7\n// obfuscate to avoid firewalls\n\nvar axo = ['Active'].concat('Object').join('X');\n\nif (!AbstractXHRObject.enabled && axo in global) {\n  debug('overriding xmlhttprequest');\n\n  XHR = function XHR() {\n    try {\n      return new global[axo]('Microsoft.XMLHTTP');\n    } catch (e) {\n      return null;\n    }\n  };\n\n  AbstractXHRObject.enabled = !!new XHR();\n}\n\nvar cors = false;\n\ntry {\n  cors = 'withCredentials' in new XHR();\n} catch (ignored) {// intentionally empty\n}\n\nAbstractXHRObject.supportsCORS = cors;\nmodule.exports = AbstractXHRObject;","module.exports = global.EventSource;","'use strict';\n\nvar Driver = global.WebSocket || global.MozWebSocket;\n\nif (Driver) {\n  module.exports = function WebSocketBrowserDriver(url) {\n    return new Driver(url);\n  };\n} else {\n  module.exports = undefined;\n}","'use strict';\n\nvar inherits = require('inherits'),\n    AjaxBasedTransport = require('./lib/ajax-based'),\n    EventSourceReceiver = require('./receiver/eventsource'),\n    XHRCorsObject = require('./sender/xhr-cors'),\n    EventSourceDriver = require('eventsource');\n\nfunction EventSourceTransport(transUrl) {\n  if (!EventSourceTransport.enabled()) {\n    throw new Error('Transport created when disabled');\n  }\n\n  AjaxBasedTransport.call(this, transUrl, '/eventsource', EventSourceReceiver, XHRCorsObject);\n}\n\ninherits(EventSourceTransport, AjaxBasedTransport);\n\nEventSourceTransport.enabled = function () {\n  return !!EventSourceDriver;\n};\n\nEventSourceTransport.transportName = 'eventsource';\nEventSourceTransport.roundTrips = 2;\nmodule.exports = EventSourceTransport;","'use strict';\n\nvar inherits = require('inherits'),\n    HtmlfileReceiver = require('./receiver/htmlfile'),\n    XHRLocalObject = require('./sender/xhr-local'),\n    AjaxBasedTransport = require('./lib/ajax-based');\n\nfunction HtmlFileTransport(transUrl) {\n  if (!HtmlfileReceiver.enabled) {\n    throw new Error('Transport created when disabled');\n  }\n\n  AjaxBasedTransport.call(this, transUrl, '/htmlfile', HtmlfileReceiver, XHRLocalObject);\n}\n\ninherits(HtmlFileTransport, AjaxBasedTransport);\n\nHtmlFileTransport.enabled = function (info) {\n  return HtmlfileReceiver.enabled && info.sameOrigin;\n};\n\nHtmlFileTransport.transportName = 'htmlfile';\nHtmlFileTransport.roundTrips = 2;\nmodule.exports = HtmlFileTransport;","'use strict'; // Few cool transports do work only for same-origin. In order to make\n// them work cross-domain we shall use iframe, served from the\n// remote domain. New browsers have capabilities to communicate with\n// cross domain iframe using postMessage(). In IE it was implemented\n// from IE 8+, but of course, IE got some details wrong:\n//    http://msdn.microsoft.com/en-us/library/cc197015(v=VS.85).aspx\n//    http://stevesouders.com/misc/test-postmessage.php\n\nvar inherits = require('inherits'),\n    JSON3 = require('json3'),\n    EventEmitter = require('events').EventEmitter,\n    version = require('../version'),\n    urlUtils = require('../utils/url'),\n    iframeUtils = require('../utils/iframe'),\n    eventUtils = require('../utils/event'),\n    random = require('../utils/random');\n\nvar debug = function debug() {};\n\nif (process.env.NODE_ENV !== 'production') {\n  debug = require('debug')('sockjs-client:transport:iframe');\n}\n\nfunction IframeTransport(transport, transUrl, baseUrl) {\n  if (!IframeTransport.enabled()) {\n    throw new Error('Transport created when disabled');\n  }\n\n  EventEmitter.call(this);\n  var self = this;\n  this.origin = urlUtils.getOrigin(baseUrl);\n  this.baseUrl = baseUrl;\n  this.transUrl = transUrl;\n  this.transport = transport;\n  this.windowId = random.string(8);\n  var iframeUrl = urlUtils.addPath(baseUrl, '/iframe.html') + '#' + this.windowId;\n  debug(transport, transUrl, iframeUrl);\n  this.iframeObj = iframeUtils.createIframe(iframeUrl, function (r) {\n    debug('err callback');\n    self.emit('close', 1006, 'Unable to load an iframe (' + r + ')');\n    self.close();\n  });\n  this.onmessageCallback = this._message.bind(this);\n  eventUtils.attachEvent('message', this.onmessageCallback);\n}\n\ninherits(IframeTransport, EventEmitter);\n\nIframeTransport.prototype.close = function () {\n  debug('close');\n  this.removeAllListeners();\n\n  if (this.iframeObj) {\n    eventUtils.detachEvent('message', this.onmessageCallback);\n\n    try {\n      // When the iframe is not loaded, IE raises an exception\n      // on 'contentWindow'.\n      this.postMessage('c');\n    } catch (x) {// intentionally empty\n    }\n\n    this.iframeObj.cleanup();\n    this.iframeObj = null;\n    this.onmessageCallback = this.iframeObj = null;\n  }\n};\n\nIframeTransport.prototype._message = function (e) {\n  debug('message', e.data);\n\n  if (!urlUtils.isOriginEqual(e.origin, this.origin)) {\n    debug('not same origin', e.origin, this.origin);\n    return;\n  }\n\n  var iframeMessage;\n\n  try {\n    iframeMessage = JSON3.parse(e.data);\n  } catch (ignored) {\n    debug('bad json', e.data);\n    return;\n  }\n\n  if (iframeMessage.windowId !== this.windowId) {\n    debug('mismatched window id', iframeMessage.windowId, this.windowId);\n    return;\n  }\n\n  switch (iframeMessage.type) {\n    case 's':\n      this.iframeObj.loaded(); // window global dependency\n\n      this.postMessage('s', JSON3.stringify([version, this.transport, this.transUrl, this.baseUrl]));\n      break;\n\n    case 't':\n      this.emit('message', iframeMessage.data);\n      break;\n\n    case 'c':\n      var cdata;\n\n      try {\n        cdata = JSON3.parse(iframeMessage.data);\n      } catch (ignored) {\n        debug('bad json', iframeMessage.data);\n        return;\n      }\n\n      this.emit('close', cdata[0], cdata[1]);\n      this.close();\n      break;\n  }\n};\n\nIframeTransport.prototype.postMessage = function (type, data) {\n  debug('postMessage', type, data);\n  this.iframeObj.post(JSON3.stringify({\n    windowId: this.windowId,\n    type: type,\n    data: data || ''\n  }), this.origin);\n};\n\nIframeTransport.prototype.send = function (message) {\n  debug('send', message);\n  this.postMessage('m', message);\n};\n\nIframeTransport.enabled = function () {\n  return iframeUtils.iframeEnabled;\n};\n\nIframeTransport.transportName = 'iframe';\nIframeTransport.roundTrips = 2;\nmodule.exports = IframeTransport;","'use strict'; // The simplest and most robust transport, using the well-know cross\n// domain hack - JSONP. This transport is quite inefficient - one\n// message could use up to one http request. But at least it works almost\n// everywhere.\n// Known limitations:\n//   o you will get a spinning cursor\n//   o for Konqueror a dumb timer is needed to detect errors\n\nvar inherits = require('inherits'),\n    SenderReceiver = require('./lib/sender-receiver'),\n    JsonpReceiver = require('./receiver/jsonp'),\n    jsonpSender = require('./sender/jsonp');\n\nfunction JsonPTransport(transUrl) {\n  if (!JsonPTransport.enabled()) {\n    throw new Error('Transport created when disabled');\n  }\n\n  SenderReceiver.call(this, transUrl, '/jsonp', jsonpSender, JsonpReceiver);\n}\n\ninherits(JsonPTransport, SenderReceiver);\n\nJsonPTransport.enabled = function () {\n  return !!global.document;\n};\n\nJsonPTransport.transportName = 'jsonp-polling';\nJsonPTransport.roundTrips = 1;\nJsonPTransport.needBody = true;\nmodule.exports = JsonPTransport;","'use strict';\n\nvar inherits = require('inherits'),\n    urlUtils = require('../../utils/url'),\n    SenderReceiver = require('./sender-receiver');\n\nvar debug = function debug() {};\n\nif (process.env.NODE_ENV !== 'production') {\n  debug = require('debug')('sockjs-client:ajax-based');\n}\n\nfunction createAjaxSender(AjaxObject) {\n  return function (url, payload, callback) {\n    debug('create ajax sender', url, payload);\n    var opt = {};\n\n    if (typeof payload === 'string') {\n      opt.headers = {\n        'Content-type': 'text/plain'\n      };\n    }\n\n    var ajaxUrl = urlUtils.addPath(url, '/xhr_send');\n    var xo = new AjaxObject('POST', ajaxUrl, payload, opt);\n    xo.once('finish', function (status) {\n      debug('finish', status);\n      xo = null;\n\n      if (status !== 200 && status !== 204) {\n        return callback(new Error('http status ' + status));\n      }\n\n      callback();\n    });\n    return function () {\n      debug('abort');\n      xo.close();\n      xo = null;\n      var err = new Error('Aborted');\n      err.code = 1000;\n      callback(err);\n    };\n  };\n}\n\nfunction AjaxBasedTransport(transUrl, urlSuffix, Receiver, AjaxObject) {\n  SenderReceiver.call(this, transUrl, urlSuffix, createAjaxSender(AjaxObject), Receiver, AjaxObject);\n}\n\ninherits(AjaxBasedTransport, SenderReceiver);\nmodule.exports = AjaxBasedTransport;","'use strict';\n\nvar inherits = require('inherits'),\n    EventEmitter = require('events').EventEmitter;\n\nvar debug = function debug() {};\n\nif (process.env.NODE_ENV !== 'production') {\n  debug = require('debug')('sockjs-client:buffered-sender');\n}\n\nfunction BufferedSender(url, sender) {\n  debug(url);\n  EventEmitter.call(this);\n  this.sendBuffer = [];\n  this.sender = sender;\n  this.url = url;\n}\n\ninherits(BufferedSender, EventEmitter);\n\nBufferedSender.prototype.send = function (message) {\n  debug('send', message);\n  this.sendBuffer.push(message);\n\n  if (!this.sendStop) {\n    this.sendSchedule();\n  }\n}; // For polling transports in a situation when in the message callback,\n// new message is being send. If the sending connection was started\n// before receiving one, it is possible to saturate the network and\n// timeout due to the lack of receiving socket. To avoid that we delay\n// sending messages by some small time, in order to let receiving\n// connection be started beforehand. This is only a halfmeasure and\n// does not fix the big problem, but it does make the tests go more\n// stable on slow networks.\n\n\nBufferedSender.prototype.sendScheduleWait = function () {\n  debug('sendScheduleWait');\n  var self = this;\n  var tref;\n\n  this.sendStop = function () {\n    debug('sendStop');\n    self.sendStop = null;\n    clearTimeout(tref);\n  };\n\n  tref = setTimeout(function () {\n    debug('timeout');\n    self.sendStop = null;\n    self.sendSchedule();\n  }, 25);\n};\n\nBufferedSender.prototype.sendSchedule = function () {\n  debug('sendSchedule', this.sendBuffer.length);\n  var self = this;\n\n  if (this.sendBuffer.length > 0) {\n    var payload = '[' + this.sendBuffer.join(',') + ']';\n    this.sendStop = this.sender(this.url, payload, function (err) {\n      self.sendStop = null;\n\n      if (err) {\n        debug('error', err);\n        self.emit('close', err.code || 1006, 'Sending error: ' + err);\n        self.close();\n      } else {\n        self.sendScheduleWait();\n      }\n    });\n    this.sendBuffer = [];\n  }\n};\n\nBufferedSender.prototype._cleanup = function () {\n  debug('_cleanup');\n  this.removeAllListeners();\n};\n\nBufferedSender.prototype.close = function () {\n  debug('close');\n\n  this._cleanup();\n\n  if (this.sendStop) {\n    this.sendStop();\n    this.sendStop = null;\n  }\n};\n\nmodule.exports = BufferedSender;","'use strict';\n\nvar inherits = require('inherits'),\n    IframeTransport = require('../iframe'),\n    objectUtils = require('../../utils/object');\n\nmodule.exports = function (transport) {\n  function IframeWrapTransport(transUrl, baseUrl) {\n    IframeTransport.call(this, transport.transportName, transUrl, baseUrl);\n  }\n\n  inherits(IframeWrapTransport, IframeTransport);\n\n  IframeWrapTransport.enabled = function (url, info) {\n    if (!global.document) {\n      return false;\n    }\n\n    var iframeInfo = objectUtils.extend({}, info);\n    iframeInfo.sameOrigin = true;\n    return transport.enabled(iframeInfo) && IframeTransport.enabled();\n  };\n\n  IframeWrapTransport.transportName = 'iframe-' + transport.transportName;\n  IframeWrapTransport.needBody = true;\n  IframeWrapTransport.roundTrips = IframeTransport.roundTrips + transport.roundTrips - 1; // html, javascript (2) + transport - no CORS (1)\n\n  IframeWrapTransport.facadeTransport = transport;\n  return IframeWrapTransport;\n};","'use strict';\n\nvar inherits = require('inherits'),\n    EventEmitter = require('events').EventEmitter;\n\nvar debug = function debug() {};\n\nif (process.env.NODE_ENV !== 'production') {\n  debug = require('debug')('sockjs-client:polling');\n}\n\nfunction Polling(Receiver, receiveUrl, AjaxObject) {\n  debug(receiveUrl);\n  EventEmitter.call(this);\n  this.Receiver = Receiver;\n  this.receiveUrl = receiveUrl;\n  this.AjaxObject = AjaxObject;\n\n  this._scheduleReceiver();\n}\n\ninherits(Polling, EventEmitter);\n\nPolling.prototype._scheduleReceiver = function () {\n  debug('_scheduleReceiver');\n  var self = this;\n  var poll = this.poll = new this.Receiver(this.receiveUrl, this.AjaxObject);\n  poll.on('message', function (msg) {\n    debug('message', msg);\n    self.emit('message', msg);\n  });\n  poll.once('close', function (code, reason) {\n    debug('close', code, reason, self.pollIsClosing);\n    self.poll = poll = null;\n\n    if (!self.pollIsClosing) {\n      if (reason === 'network') {\n        self._scheduleReceiver();\n      } else {\n        self.emit('close', code || 1006, reason);\n        self.removeAllListeners();\n      }\n    }\n  });\n};\n\nPolling.prototype.abort = function () {\n  debug('abort');\n  this.removeAllListeners();\n  this.pollIsClosing = true;\n\n  if (this.poll) {\n    this.poll.abort();\n  }\n};\n\nmodule.exports = Polling;","'use strict';\n\nvar inherits = require('inherits'),\n    urlUtils = require('../../utils/url'),\n    BufferedSender = require('./buffered-sender'),\n    Polling = require('./polling');\n\nvar debug = function debug() {};\n\nif (process.env.NODE_ENV !== 'production') {\n  debug = require('debug')('sockjs-client:sender-receiver');\n}\n\nfunction SenderReceiver(transUrl, urlSuffix, senderFunc, Receiver, AjaxObject) {\n  var pollUrl = urlUtils.addPath(transUrl, urlSuffix);\n  debug(pollUrl);\n  var self = this;\n  BufferedSender.call(this, transUrl, senderFunc);\n  this.poll = new Polling(Receiver, pollUrl, AjaxObject);\n  this.poll.on('message', function (msg) {\n    debug('poll message', msg);\n    self.emit('message', msg);\n  });\n  this.poll.once('close', function (code, reason) {\n    debug('poll close', code, reason);\n    self.poll = null;\n    self.emit('close', code, reason);\n    self.close();\n  });\n}\n\ninherits(SenderReceiver, BufferedSender);\n\nSenderReceiver.prototype.close = function () {\n  BufferedSender.prototype.close.call(this);\n  debug('close');\n  this.removeAllListeners();\n\n  if (this.poll) {\n    this.poll.abort();\n    this.poll = null;\n  }\n};\n\nmodule.exports = SenderReceiver;","'use strict';\n\nvar inherits = require('inherits'),\n    EventEmitter = require('events').EventEmitter,\n    EventSourceDriver = require('eventsource');\n\nvar debug = function debug() {};\n\nif (process.env.NODE_ENV !== 'production') {\n  debug = require('debug')('sockjs-client:receiver:eventsource');\n}\n\nfunction EventSourceReceiver(url) {\n  debug(url);\n  EventEmitter.call(this);\n  var self = this;\n  var es = this.es = new EventSourceDriver(url);\n\n  es.onmessage = function (e) {\n    debug('message', e.data);\n    self.emit('message', decodeURI(e.data));\n  };\n\n  es.onerror = function (e) {\n    debug('error', es.readyState, e); // ES on reconnection has readyState = 0 or 1.\n    // on network error it's CLOSED = 2\n\n    var reason = es.readyState !== 2 ? 'network' : 'permanent';\n\n    self._cleanup();\n\n    self._close(reason);\n  };\n}\n\ninherits(EventSourceReceiver, EventEmitter);\n\nEventSourceReceiver.prototype.abort = function () {\n  debug('abort');\n\n  this._cleanup();\n\n  this._close('user');\n};\n\nEventSourceReceiver.prototype._cleanup = function () {\n  debug('cleanup');\n  var es = this.es;\n\n  if (es) {\n    es.onmessage = es.onerror = null;\n    es.close();\n    this.es = null;\n  }\n};\n\nEventSourceReceiver.prototype._close = function (reason) {\n  debug('close', reason);\n  var self = this; // Safari and chrome < 15 crash if we close window before\n  // waiting for ES cleanup. See:\n  // https://code.google.com/p/chromium/issues/detail?id=89155\n\n  setTimeout(function () {\n    self.emit('close', null, reason);\n    self.removeAllListeners();\n  }, 200);\n};\n\nmodule.exports = EventSourceReceiver;","'use strict';\n\nvar inherits = require('inherits'),\n    iframeUtils = require('../../utils/iframe'),\n    urlUtils = require('../../utils/url'),\n    EventEmitter = require('events').EventEmitter,\n    random = require('../../utils/random');\n\nvar debug = function debug() {};\n\nif (process.env.NODE_ENV !== 'production') {\n  debug = require('debug')('sockjs-client:receiver:htmlfile');\n}\n\nfunction HtmlfileReceiver(url) {\n  debug(url);\n  EventEmitter.call(this);\n  var self = this;\n  iframeUtils.polluteGlobalNamespace();\n  this.id = 'a' + random.string(6);\n  url = urlUtils.addQuery(url, 'c=' + decodeURIComponent(iframeUtils.WPrefix + '.' + this.id));\n  debug('using htmlfile', HtmlfileReceiver.htmlfileEnabled);\n  var constructFunc = HtmlfileReceiver.htmlfileEnabled ? iframeUtils.createHtmlfile : iframeUtils.createIframe;\n  global[iframeUtils.WPrefix][this.id] = {\n    start: function start() {\n      debug('start');\n      self.iframeObj.loaded();\n    },\n    message: function message(data) {\n      debug('message', data);\n      self.emit('message', data);\n    },\n    stop: function stop() {\n      debug('stop');\n\n      self._cleanup();\n\n      self._close('network');\n    }\n  };\n  this.iframeObj = constructFunc(url, function () {\n    debug('callback');\n\n    self._cleanup();\n\n    self._close('permanent');\n  });\n}\n\ninherits(HtmlfileReceiver, EventEmitter);\n\nHtmlfileReceiver.prototype.abort = function () {\n  debug('abort');\n\n  this._cleanup();\n\n  this._close('user');\n};\n\nHtmlfileReceiver.prototype._cleanup = function () {\n  debug('_cleanup');\n\n  if (this.iframeObj) {\n    this.iframeObj.cleanup();\n    this.iframeObj = null;\n  }\n\n  delete global[iframeUtils.WPrefix][this.id];\n};\n\nHtmlfileReceiver.prototype._close = function (reason) {\n  debug('_close', reason);\n  this.emit('close', null, reason);\n  this.removeAllListeners();\n};\n\nHtmlfileReceiver.htmlfileEnabled = false; // obfuscate to avoid firewalls\n\nvar axo = ['Active'].concat('Object').join('X');\n\nif (axo in global) {\n  try {\n    HtmlfileReceiver.htmlfileEnabled = !!new global[axo]('htmlfile');\n  } catch (x) {// intentionally empty\n  }\n}\n\nHtmlfileReceiver.enabled = HtmlfileReceiver.htmlfileEnabled || iframeUtils.iframeEnabled;\nmodule.exports = HtmlfileReceiver;","'use strict';\n\nvar utils = require('../../utils/iframe'),\n    random = require('../../utils/random'),\n    browser = require('../../utils/browser'),\n    urlUtils = require('../../utils/url'),\n    inherits = require('inherits'),\n    EventEmitter = require('events').EventEmitter;\n\nvar debug = function debug() {};\n\nif (process.env.NODE_ENV !== 'production') {\n  debug = require('debug')('sockjs-client:receiver:jsonp');\n}\n\nfunction JsonpReceiver(url) {\n  debug(url);\n  var self = this;\n  EventEmitter.call(this);\n  utils.polluteGlobalNamespace();\n  this.id = 'a' + random.string(6);\n  var urlWithId = urlUtils.addQuery(url, 'c=' + encodeURIComponent(utils.WPrefix + '.' + this.id));\n  global[utils.WPrefix][this.id] = this._callback.bind(this);\n\n  this._createScript(urlWithId); // Fallback mostly for Konqueror - stupid timer, 35 seconds shall be plenty.\n\n\n  this.timeoutId = setTimeout(function () {\n    debug('timeout');\n\n    self._abort(new Error('JSONP script loaded abnormally (timeout)'));\n  }, JsonpReceiver.timeout);\n}\n\ninherits(JsonpReceiver, EventEmitter);\n\nJsonpReceiver.prototype.abort = function () {\n  debug('abort');\n\n  if (global[utils.WPrefix][this.id]) {\n    var err = new Error('JSONP user aborted read');\n    err.code = 1000;\n\n    this._abort(err);\n  }\n};\n\nJsonpReceiver.timeout = 35000;\nJsonpReceiver.scriptErrorTimeout = 1000;\n\nJsonpReceiver.prototype._callback = function (data) {\n  debug('_callback', data);\n\n  this._cleanup();\n\n  if (this.aborting) {\n    return;\n  }\n\n  if (data) {\n    debug('message', data);\n    this.emit('message', data);\n  }\n\n  this.emit('close', null, 'network');\n  this.removeAllListeners();\n};\n\nJsonpReceiver.prototype._abort = function (err) {\n  debug('_abort', err);\n\n  this._cleanup();\n\n  this.aborting = true;\n  this.emit('close', err.code, err.message);\n  this.removeAllListeners();\n};\n\nJsonpReceiver.prototype._cleanup = function () {\n  debug('_cleanup');\n  clearTimeout(this.timeoutId);\n\n  if (this.script2) {\n    this.script2.parentNode.removeChild(this.script2);\n    this.script2 = null;\n  }\n\n  if (this.script) {\n    var script = this.script; // Unfortunately, you can't really abort script loading of\n    // the script.\n\n    script.parentNode.removeChild(script);\n    script.onreadystatechange = script.onerror = script.onload = script.onclick = null;\n    this.script = null;\n  }\n\n  delete global[utils.WPrefix][this.id];\n};\n\nJsonpReceiver.prototype._scriptError = function () {\n  debug('_scriptError');\n  var self = this;\n\n  if (this.errorTimer) {\n    return;\n  }\n\n  this.errorTimer = setTimeout(function () {\n    if (!self.loadedOkay) {\n      self._abort(new Error('JSONP script loaded abnormally (onerror)'));\n    }\n  }, JsonpReceiver.scriptErrorTimeout);\n};\n\nJsonpReceiver.prototype._createScript = function (url) {\n  debug('_createScript', url);\n  var self = this;\n  var script = this.script = global.document.createElement('script');\n  var script2; // Opera synchronous load trick.\n\n  script.id = 'a' + random.string(8);\n  script.src = url;\n  script.type = 'text/javascript';\n  script.charset = 'UTF-8';\n  script.onerror = this._scriptError.bind(this);\n\n  script.onload = function () {\n    debug('onload');\n\n    self._abort(new Error('JSONP script loaded abnormally (onload)'));\n  }; // IE9 fires 'error' event after onreadystatechange or before, in random order.\n  // Use loadedOkay to determine if actually errored\n\n\n  script.onreadystatechange = function () {\n    debug('onreadystatechange', script.readyState);\n\n    if (/loaded|closed/.test(script.readyState)) {\n      if (script && script.htmlFor && script.onclick) {\n        self.loadedOkay = true;\n\n        try {\n          // In IE, actually execute the script.\n          script.onclick();\n        } catch (x) {// intentionally empty\n        }\n      }\n\n      if (script) {\n        self._abort(new Error('JSONP script loaded abnormally (onreadystatechange)'));\n      }\n    }\n  }; // IE: event/htmlFor/onclick trick.\n  // One can't rely on proper order for onreadystatechange. In order to\n  // make sure, set a 'htmlFor' and 'event' properties, so that\n  // script code will be installed as 'onclick' handler for the\n  // script object. Later, onreadystatechange, manually execute this\n  // code. FF and Chrome doesn't work with 'event' and 'htmlFor'\n  // set. For reference see:\n  //   http://jaubourg.net/2010/07/loading-script-as-onclick-handler-of.html\n  // Also, read on that about script ordering:\n  //   http://wiki.whatwg.org/wiki/Dynamic_Script_Execution_Order\n\n\n  if (typeof script.async === 'undefined' && global.document.attachEvent) {\n    // According to mozilla docs, in recent browsers script.async defaults\n    // to 'true', so we may use it to detect a good browser:\n    // https://developer.mozilla.org/en/HTML/Element/script\n    if (!browser.isOpera()) {\n      // Naively assume we're in IE\n      try {\n        script.htmlFor = script.id;\n        script.event = 'onclick';\n      } catch (x) {// intentionally empty\n      }\n\n      script.async = true;\n    } else {\n      // Opera, second sync script hack\n      script2 = this.script2 = global.document.createElement('script');\n      script2.text = \"try{var a = document.getElementById('\" + script.id + \"'); if(a)a.onerror();}catch(x){};\";\n      script.async = script2.async = false;\n    }\n  }\n\n  if (typeof script.async !== 'undefined') {\n    script.async = true;\n  }\n\n  var head = global.document.getElementsByTagName('head')[0];\n  head.insertBefore(script, head.firstChild);\n\n  if (script2) {\n    head.insertBefore(script2, head.firstChild);\n  }\n};\n\nmodule.exports = JsonpReceiver;","'use strict';\n\nvar inherits = require('inherits'),\n    EventEmitter = require('events').EventEmitter;\n\nvar debug = function debug() {};\n\nif (process.env.NODE_ENV !== 'production') {\n  debug = require('debug')('sockjs-client:receiver:xhr');\n}\n\nfunction XhrReceiver(url, AjaxObject) {\n  debug(url);\n  EventEmitter.call(this);\n  var self = this;\n  this.bufferPosition = 0;\n  this.xo = new AjaxObject('POST', url, null);\n  this.xo.on('chunk', this._chunkHandler.bind(this));\n  this.xo.once('finish', function (status, text) {\n    debug('finish', status, text);\n\n    self._chunkHandler(status, text);\n\n    self.xo = null;\n    var reason = status === 200 ? 'network' : 'permanent';\n    debug('close', reason);\n    self.emit('close', null, reason);\n\n    self._cleanup();\n  });\n}\n\ninherits(XhrReceiver, EventEmitter);\n\nXhrReceiver.prototype._chunkHandler = function (status, text) {\n  debug('_chunkHandler', status);\n\n  if (status !== 200 || !text) {\n    return;\n  }\n\n  for (var idx = -1;; this.bufferPosition += idx + 1) {\n    var buf = text.slice(this.bufferPosition);\n    idx = buf.indexOf('\\n');\n\n    if (idx === -1) {\n      break;\n    }\n\n    var msg = buf.slice(0, idx);\n\n    if (msg) {\n      debug('message', msg);\n      this.emit('message', msg);\n    }\n  }\n};\n\nXhrReceiver.prototype._cleanup = function () {\n  debug('_cleanup');\n  this.removeAllListeners();\n};\n\nXhrReceiver.prototype.abort = function () {\n  debug('abort');\n\n  if (this.xo) {\n    this.xo.close();\n    debug('close');\n    this.emit('close', null, 'user');\n    this.xo = null;\n  }\n\n  this._cleanup();\n};\n\nmodule.exports = XhrReceiver;","'use strict';\n\nvar random = require('../../utils/random'),\n    urlUtils = require('../../utils/url');\n\nvar debug = function debug() {};\n\nif (process.env.NODE_ENV !== 'production') {\n  debug = require('debug')('sockjs-client:sender:jsonp');\n}\n\nvar form, area;\n\nfunction createIframe(id) {\n  debug('createIframe', id);\n\n  try {\n    // ie6 dynamic iframes with target=\"\" support (thanks Chris Lambacher)\n    return global.document.createElement('<iframe name=\"' + id + '\">');\n  } catch (x) {\n    var iframe = global.document.createElement('iframe');\n    iframe.name = id;\n    return iframe;\n  }\n}\n\nfunction createForm() {\n  debug('createForm');\n  form = global.document.createElement('form');\n  form.style.display = 'none';\n  form.style.position = 'absolute';\n  form.method = 'POST';\n  form.enctype = 'application/x-www-form-urlencoded';\n  form.acceptCharset = 'UTF-8';\n  area = global.document.createElement('textarea');\n  area.name = 'd';\n  form.appendChild(area);\n  global.document.body.appendChild(form);\n}\n\nmodule.exports = function (url, payload, callback) {\n  debug(url, payload);\n\n  if (!form) {\n    createForm();\n  }\n\n  var id = 'a' + random.string(8);\n  form.target = id;\n  form.action = urlUtils.addQuery(urlUtils.addPath(url, '/jsonp_send'), 'i=' + id);\n  var iframe = createIframe(id);\n  iframe.id = id;\n  iframe.style.display = 'none';\n  form.appendChild(iframe);\n\n  try {\n    area.value = payload;\n  } catch (e) {// seriously broken browsers get here\n  }\n\n  form.submit();\n\n  var completed = function completed(err) {\n    debug('completed', id, err);\n\n    if (!iframe.onerror) {\n      return;\n    }\n\n    iframe.onreadystatechange = iframe.onerror = iframe.onload = null; // Opera mini doesn't like if we GC iframe\n    // immediately, thus this timeout.\n\n    setTimeout(function () {\n      debug('cleaning up', id);\n      iframe.parentNode.removeChild(iframe);\n      iframe = null;\n    }, 500);\n    area.value = ''; // It is not possible to detect if the iframe succeeded or\n    // failed to submit our form.\n\n    callback(err);\n  };\n\n  iframe.onerror = function () {\n    debug('onerror', id);\n    completed();\n  };\n\n  iframe.onload = function () {\n    debug('onload', id);\n    completed();\n  };\n\n  iframe.onreadystatechange = function (e) {\n    debug('onreadystatechange', id, iframe.readyState, e);\n\n    if (iframe.readyState === 'complete') {\n      completed();\n    }\n  };\n\n  return function () {\n    debug('aborted', id);\n    completed(new Error('Aborted'));\n  };\n};","'use strict';\n\nvar EventEmitter = require('events').EventEmitter,\n    inherits = require('inherits'),\n    eventUtils = require('../../utils/event'),\n    browser = require('../../utils/browser'),\n    urlUtils = require('../../utils/url');\n\nvar debug = function debug() {};\n\nif (process.env.NODE_ENV !== 'production') {\n  debug = require('debug')('sockjs-client:sender:xdr');\n} // References:\n//   http://ajaxian.com/archives/100-line-ajax-wrapper\n//   http://msdn.microsoft.com/en-us/library/cc288060(v=VS.85).aspx\n\n\nfunction XDRObject(method, url, payload) {\n  debug(method, url);\n  var self = this;\n  EventEmitter.call(this);\n  setTimeout(function () {\n    self._start(method, url, payload);\n  }, 0);\n}\n\ninherits(XDRObject, EventEmitter);\n\nXDRObject.prototype._start = function (method, url, payload) {\n  debug('_start');\n  var self = this;\n  var xdr = new global.XDomainRequest(); // IE caches even POSTs\n\n  url = urlUtils.addQuery(url, 't=' + +new Date());\n\n  xdr.onerror = function () {\n    debug('onerror');\n\n    self._error();\n  };\n\n  xdr.ontimeout = function () {\n    debug('ontimeout');\n\n    self._error();\n  };\n\n  xdr.onprogress = function () {\n    debug('progress', xdr.responseText);\n    self.emit('chunk', 200, xdr.responseText);\n  };\n\n  xdr.onload = function () {\n    debug('load');\n    self.emit('finish', 200, xdr.responseText);\n\n    self._cleanup(false);\n  };\n\n  this.xdr = xdr;\n  this.unloadRef = eventUtils.unloadAdd(function () {\n    self._cleanup(true);\n  });\n\n  try {\n    // Fails with AccessDenied if port number is bogus\n    this.xdr.open(method, url);\n\n    if (this.timeout) {\n      this.xdr.timeout = this.timeout;\n    }\n\n    this.xdr.send(payload);\n  } catch (x) {\n    this._error();\n  }\n};\n\nXDRObject.prototype._error = function () {\n  this.emit('finish', 0, '');\n\n  this._cleanup(false);\n};\n\nXDRObject.prototype._cleanup = function (abort) {\n  debug('cleanup', abort);\n\n  if (!this.xdr) {\n    return;\n  }\n\n  this.removeAllListeners();\n  eventUtils.unloadDel(this.unloadRef);\n  this.xdr.ontimeout = this.xdr.onerror = this.xdr.onprogress = this.xdr.onload = null;\n\n  if (abort) {\n    try {\n      this.xdr.abort();\n    } catch (x) {// intentionally empty\n    }\n  }\n\n  this.unloadRef = this.xdr = null;\n};\n\nXDRObject.prototype.close = function () {\n  debug('close');\n\n  this._cleanup(true);\n}; // IE 8/9 if the request target uses the same scheme - #79\n\n\nXDRObject.enabled = !!(global.XDomainRequest && browser.hasDomain());\nmodule.exports = XDRObject;","'use strict';\n\nvar inherits = require('inherits'),\n    XhrDriver = require('../driver/xhr');\n\nfunction XHRCorsObject(method, url, payload, opts) {\n  XhrDriver.call(this, method, url, payload, opts);\n}\n\ninherits(XHRCorsObject, XhrDriver);\nXHRCorsObject.enabled = XhrDriver.enabled && XhrDriver.supportsCORS;\nmodule.exports = XHRCorsObject;","'use strict';\n\nvar EventEmitter = require('events').EventEmitter,\n    inherits = require('inherits');\n\nfunction XHRFake()\n/* method, url, payload, opts */\n{\n  var self = this;\n  EventEmitter.call(this);\n  this.to = setTimeout(function () {\n    self.emit('finish', 200, '{}');\n  }, XHRFake.timeout);\n}\n\ninherits(XHRFake, EventEmitter);\n\nXHRFake.prototype.close = function () {\n  clearTimeout(this.to);\n};\n\nXHRFake.timeout = 2000;\nmodule.exports = XHRFake;","'use strict';\n\nvar inherits = require('inherits'),\n    XhrDriver = require('../driver/xhr');\n\nfunction XHRLocalObject(method, url, payload\n/*, opts */\n) {\n  XhrDriver.call(this, method, url, payload, {\n    noCredentials: true\n  });\n}\n\ninherits(XHRLocalObject, XhrDriver);\nXHRLocalObject.enabled = XhrDriver.enabled;\nmodule.exports = XHRLocalObject;","'use strict';\n\nvar utils = require('../utils/event'),\n    urlUtils = require('../utils/url'),\n    inherits = require('inherits'),\n    EventEmitter = require('events').EventEmitter,\n    WebsocketDriver = require('./driver/websocket');\n\nvar debug = function debug() {};\n\nif (process.env.NODE_ENV !== 'production') {\n  debug = require('debug')('sockjs-client:websocket');\n}\n\nfunction WebSocketTransport(transUrl, ignore, options) {\n  if (!WebSocketTransport.enabled()) {\n    throw new Error('Transport created when disabled');\n  }\n\n  EventEmitter.call(this);\n  debug('constructor', transUrl);\n  var self = this;\n  var url = urlUtils.addPath(transUrl, '/websocket');\n\n  if (url.slice(0, 5) === 'https') {\n    url = 'wss' + url.slice(5);\n  } else {\n    url = 'ws' + url.slice(4);\n  }\n\n  this.url = url;\n  this.ws = new WebsocketDriver(this.url, [], options);\n\n  this.ws.onmessage = function (e) {\n    debug('message event', e.data);\n    self.emit('message', e.data);\n  }; // Firefox has an interesting bug. If a websocket connection is\n  // created after onunload, it stays alive even when user\n  // navigates away from the page. In such situation let's lie -\n  // let's not open the ws connection at all. See:\n  // https://github.com/sockjs/sockjs-client/issues/28\n  // https://bugzilla.mozilla.org/show_bug.cgi?id=696085\n\n\n  this.unloadRef = utils.unloadAdd(function () {\n    debug('unload');\n    self.ws.close();\n  });\n\n  this.ws.onclose = function (e) {\n    debug('close event', e.code, e.reason);\n    self.emit('close', e.code, e.reason);\n\n    self._cleanup();\n  };\n\n  this.ws.onerror = function (e) {\n    debug('error event', e);\n    self.emit('close', 1006, 'WebSocket connection broken');\n\n    self._cleanup();\n  };\n}\n\ninherits(WebSocketTransport, EventEmitter);\n\nWebSocketTransport.prototype.send = function (data) {\n  var msg = '[' + data + ']';\n  debug('send', msg);\n  this.ws.send(msg);\n};\n\nWebSocketTransport.prototype.close = function () {\n  debug('close');\n  var ws = this.ws;\n\n  this._cleanup();\n\n  if (ws) {\n    ws.close();\n  }\n};\n\nWebSocketTransport.prototype._cleanup = function () {\n  debug('_cleanup');\n  var ws = this.ws;\n\n  if (ws) {\n    ws.onmessage = ws.onclose = ws.onerror = null;\n  }\n\n  utils.unloadDel(this.unloadRef);\n  this.unloadRef = this.ws = null;\n  this.removeAllListeners();\n};\n\nWebSocketTransport.enabled = function () {\n  debug('enabled');\n  return !!WebsocketDriver;\n};\n\nWebSocketTransport.transportName = 'websocket'; // In theory, ws should require 1 round trip. But in chrome, this is\n// not very stable over SSL. Most likely a ws connection requires a\n// separate SSL connection, in which case 2 round trips are an\n// absolute minumum.\n\nWebSocketTransport.roundTrips = 2;\nmodule.exports = WebSocketTransport;","'use strict';\n\nvar inherits = require('inherits'),\n    AjaxBasedTransport = require('./lib/ajax-based'),\n    XdrStreamingTransport = require('./xdr-streaming'),\n    XhrReceiver = require('./receiver/xhr'),\n    XDRObject = require('./sender/xdr');\n\nfunction XdrPollingTransport(transUrl) {\n  if (!XDRObject.enabled) {\n    throw new Error('Transport created when disabled');\n  }\n\n  AjaxBasedTransport.call(this, transUrl, '/xhr', XhrReceiver, XDRObject);\n}\n\ninherits(XdrPollingTransport, AjaxBasedTransport);\nXdrPollingTransport.enabled = XdrStreamingTransport.enabled;\nXdrPollingTransport.transportName = 'xdr-polling';\nXdrPollingTransport.roundTrips = 2; // preflight, ajax\n\nmodule.exports = XdrPollingTransport;","'use strict';\n\nvar inherits = require('inherits'),\n    AjaxBasedTransport = require('./lib/ajax-based'),\n    XhrReceiver = require('./receiver/xhr'),\n    XDRObject = require('./sender/xdr'); // According to:\n//   http://stackoverflow.com/questions/1641507/detect-browser-support-for-cross-domain-xmlhttprequests\n//   http://hacks.mozilla.org/2009/07/cross-site-xmlhttprequest-with-cors/\n\n\nfunction XdrStreamingTransport(transUrl) {\n  if (!XDRObject.enabled) {\n    throw new Error('Transport created when disabled');\n  }\n\n  AjaxBasedTransport.call(this, transUrl, '/xhr_streaming', XhrReceiver, XDRObject);\n}\n\ninherits(XdrStreamingTransport, AjaxBasedTransport);\n\nXdrStreamingTransport.enabled = function (info) {\n  if (info.cookie_needed || info.nullOrigin) {\n    return false;\n  }\n\n  return XDRObject.enabled && info.sameScheme;\n};\n\nXdrStreamingTransport.transportName = 'xdr-streaming';\nXdrStreamingTransport.roundTrips = 2; // preflight, ajax\n\nmodule.exports = XdrStreamingTransport;","'use strict';\n\nvar inherits = require('inherits'),\n    AjaxBasedTransport = require('./lib/ajax-based'),\n    XhrReceiver = require('./receiver/xhr'),\n    XHRCorsObject = require('./sender/xhr-cors'),\n    XHRLocalObject = require('./sender/xhr-local');\n\nfunction XhrPollingTransport(transUrl) {\n  if (!XHRLocalObject.enabled && !XHRCorsObject.enabled) {\n    throw new Error('Transport created when disabled');\n  }\n\n  AjaxBasedTransport.call(this, transUrl, '/xhr', XhrReceiver, XHRCorsObject);\n}\n\ninherits(XhrPollingTransport, AjaxBasedTransport);\n\nXhrPollingTransport.enabled = function (info) {\n  if (info.nullOrigin) {\n    return false;\n  }\n\n  if (XHRLocalObject.enabled && info.sameOrigin) {\n    return true;\n  }\n\n  return XHRCorsObject.enabled;\n};\n\nXhrPollingTransport.transportName = 'xhr-polling';\nXhrPollingTransport.roundTrips = 2; // preflight, ajax\n\nmodule.exports = XhrPollingTransport;","'use strict';\n\nvar inherits = require('inherits'),\n    AjaxBasedTransport = require('./lib/ajax-based'),\n    XhrReceiver = require('./receiver/xhr'),\n    XHRCorsObject = require('./sender/xhr-cors'),\n    XHRLocalObject = require('./sender/xhr-local'),\n    browser = require('../utils/browser');\n\nfunction XhrStreamingTransport(transUrl) {\n  if (!XHRLocalObject.enabled && !XHRCorsObject.enabled) {\n    throw new Error('Transport created when disabled');\n  }\n\n  AjaxBasedTransport.call(this, transUrl, '/xhr_streaming', XhrReceiver, XHRCorsObject);\n}\n\ninherits(XhrStreamingTransport, AjaxBasedTransport);\n\nXhrStreamingTransport.enabled = function (info) {\n  if (info.nullOrigin) {\n    return false;\n  } // Opera doesn't support xhr-streaming #60\n  // But it might be able to #92\n\n\n  if (browser.isOpera()) {\n    return false;\n  }\n\n  return XHRCorsObject.enabled;\n};\n\nXhrStreamingTransport.transportName = 'xhr-streaming';\nXhrStreamingTransport.roundTrips = 2; // preflight, ajax\n// Safari gets confused when a streaming ajax request is started\n// before onload. This causes the load indicator to spin indefinetely.\n// Only require body when used in a browser\n\nXhrStreamingTransport.needBody = !!global.document;\nmodule.exports = XhrStreamingTransport;","'use strict';\n\nif (global.crypto && global.crypto.getRandomValues) {\n  module.exports.randomBytes = function (length) {\n    var bytes = new Uint8Array(length);\n    global.crypto.getRandomValues(bytes);\n    return bytes;\n  };\n} else {\n  module.exports.randomBytes = function (length) {\n    var bytes = new Array(length);\n\n    for (var i = 0; i < length; i++) {\n      bytes[i] = Math.floor(Math.random() * 256);\n    }\n\n    return bytes;\n  };\n}","'use strict';\n\nmodule.exports = {\n  isOpera: function isOpera() {\n    return global.navigator && /opera/i.test(global.navigator.userAgent);\n  },\n  isKonqueror: function isKonqueror() {\n    return global.navigator && /konqueror/i.test(global.navigator.userAgent);\n  } // #187 wrap document.domain in try/catch because of WP8 from file:///\n  ,\n  hasDomain: function hasDomain() {\n    // non-browser client always has a domain\n    if (!global.document) {\n      return true;\n    }\n\n    try {\n      return !!global.document.domain;\n    } catch (e) {\n      return false;\n    }\n  }\n};","'use strict';\n\nvar JSON3 = require('json3'); // Some extra characters that Chrome gets wrong, and substitutes with\n// something else on the wire.\n// eslint-disable-next-line no-control-regex, no-misleading-character-class\n\n\nvar extraEscapable = /[\\x00-\\x1f\\ud800-\\udfff\\ufffe\\uffff\\u0300-\\u0333\\u033d-\\u0346\\u034a-\\u034c\\u0350-\\u0352\\u0357-\\u0358\\u035c-\\u0362\\u0374\\u037e\\u0387\\u0591-\\u05af\\u05c4\\u0610-\\u0617\\u0653-\\u0654\\u0657-\\u065b\\u065d-\\u065e\\u06df-\\u06e2\\u06eb-\\u06ec\\u0730\\u0732-\\u0733\\u0735-\\u0736\\u073a\\u073d\\u073f-\\u0741\\u0743\\u0745\\u0747\\u07eb-\\u07f1\\u0951\\u0958-\\u095f\\u09dc-\\u09dd\\u09df\\u0a33\\u0a36\\u0a59-\\u0a5b\\u0a5e\\u0b5c-\\u0b5d\\u0e38-\\u0e39\\u0f43\\u0f4d\\u0f52\\u0f57\\u0f5c\\u0f69\\u0f72-\\u0f76\\u0f78\\u0f80-\\u0f83\\u0f93\\u0f9d\\u0fa2\\u0fa7\\u0fac\\u0fb9\\u1939-\\u193a\\u1a17\\u1b6b\\u1cda-\\u1cdb\\u1dc0-\\u1dcf\\u1dfc\\u1dfe\\u1f71\\u1f73\\u1f75\\u1f77\\u1f79\\u1f7b\\u1f7d\\u1fbb\\u1fbe\\u1fc9\\u1fcb\\u1fd3\\u1fdb\\u1fe3\\u1feb\\u1fee-\\u1fef\\u1ff9\\u1ffb\\u1ffd\\u2000-\\u2001\\u20d0-\\u20d1\\u20d4-\\u20d7\\u20e7-\\u20e9\\u2126\\u212a-\\u212b\\u2329-\\u232a\\u2adc\\u302b-\\u302c\\uaab2-\\uaab3\\uf900-\\ufa0d\\ufa10\\ufa12\\ufa15-\\ufa1e\\ufa20\\ufa22\\ufa25-\\ufa26\\ufa2a-\\ufa2d\\ufa30-\\ufa6d\\ufa70-\\ufad9\\ufb1d\\ufb1f\\ufb2a-\\ufb36\\ufb38-\\ufb3c\\ufb3e\\ufb40-\\ufb41\\ufb43-\\ufb44\\ufb46-\\ufb4e\\ufff0-\\uffff]/g,\n    extraLookup; // This may be quite slow, so let's delay until user actually uses bad\n// characters.\n\nvar unrollLookup = function unrollLookup(escapable) {\n  var i;\n  var unrolled = {};\n  var c = [];\n\n  for (i = 0; i < 65536; i++) {\n    c.push(String.fromCharCode(i));\n  }\n\n  escapable.lastIndex = 0;\n  c.join('').replace(escapable, function (a) {\n    unrolled[a] = \"\\\\u\" + ('0000' + a.charCodeAt(0).toString(16)).slice(-4);\n    return '';\n  });\n  escapable.lastIndex = 0;\n  return unrolled;\n}; // Quote string, also taking care of unicode characters that browsers\n// often break. Especially, take care of unicode surrogates:\n// http://en.wikipedia.org/wiki/Mapping_of_Unicode_characters#Surrogates\n\n\nmodule.exports = {\n  quote: function quote(string) {\n    var quoted = JSON3.stringify(string); // In most cases this should be very fast and good enough.\n\n    extraEscapable.lastIndex = 0;\n\n    if (!extraEscapable.test(quoted)) {\n      return quoted;\n    }\n\n    if (!extraLookup) {\n      extraLookup = unrollLookup(extraEscapable);\n    }\n\n    return quoted.replace(extraEscapable, function (a) {\n      return extraLookup[a];\n    });\n  }\n};","'use strict';\n\nvar random = require('./random');\n\nvar onUnload = {},\n    afterUnload = false // detect google chrome packaged apps because they don't allow the 'unload' event\n,\n    isChromePackagedApp = global.chrome && global.chrome.app && global.chrome.app.runtime;\nmodule.exports = {\n  attachEvent: function attachEvent(event, listener) {\n    if (typeof global.addEventListener !== 'undefined') {\n      global.addEventListener(event, listener, false);\n    } else if (global.document && global.attachEvent) {\n      // IE quirks.\n      // According to: http://stevesouders.com/misc/test-postmessage.php\n      // the message gets delivered only to 'document', not 'window'.\n      global.document.attachEvent('on' + event, listener); // I get 'window' for ie8.\n\n      global.attachEvent('on' + event, listener);\n    }\n  },\n  detachEvent: function detachEvent(event, listener) {\n    if (typeof global.addEventListener !== 'undefined') {\n      global.removeEventListener(event, listener, false);\n    } else if (global.document && global.detachEvent) {\n      global.document.detachEvent('on' + event, listener);\n      global.detachEvent('on' + event, listener);\n    }\n  },\n  unloadAdd: function unloadAdd(listener) {\n    if (isChromePackagedApp) {\n      return null;\n    }\n\n    var ref = random.string(8);\n    onUnload[ref] = listener;\n\n    if (afterUnload) {\n      setTimeout(this.triggerUnloadCallbacks, 0);\n    }\n\n    return ref;\n  },\n  unloadDel: function unloadDel(ref) {\n    if (ref in onUnload) {\n      delete onUnload[ref];\n    }\n  },\n  triggerUnloadCallbacks: function triggerUnloadCallbacks() {\n    for (var ref in onUnload) {\n      onUnload[ref]();\n      delete onUnload[ref];\n    }\n  }\n};\n\nvar unloadTriggered = function unloadTriggered() {\n  if (afterUnload) {\n    return;\n  }\n\n  afterUnload = true;\n  module.exports.triggerUnloadCallbacks();\n}; // 'unload' alone is not reliable in opera within an iframe, but we\n// can't use `beforeunload` as IE fires it on javascript: links.\n\n\nif (!isChromePackagedApp) {\n  module.exports.attachEvent('unload', unloadTriggered);\n}","'use strict';\n\nvar eventUtils = require('./event'),\n    JSON3 = require('json3'),\n    browser = require('./browser');\n\nvar debug = function debug() {};\n\nif (process.env.NODE_ENV !== 'production') {\n  debug = require('debug')('sockjs-client:utils:iframe');\n}\n\nmodule.exports = {\n  WPrefix: '_jp',\n  currentWindowId: null,\n  polluteGlobalNamespace: function polluteGlobalNamespace() {\n    if (!(module.exports.WPrefix in global)) {\n      global[module.exports.WPrefix] = {};\n    }\n  },\n  postMessage: function postMessage(type, data) {\n    if (global.parent !== global) {\n      global.parent.postMessage(JSON3.stringify({\n        windowId: module.exports.currentWindowId,\n        type: type,\n        data: data || ''\n      }), '*');\n    } else {\n      debug('Cannot postMessage, no parent window.', type, data);\n    }\n  },\n  createIframe: function createIframe(iframeUrl, errorCallback) {\n    var iframe = global.document.createElement('iframe');\n    var tref, unloadRef;\n\n    var unattach = function unattach() {\n      debug('unattach');\n      clearTimeout(tref); // Explorer had problems with that.\n\n      try {\n        iframe.onload = null;\n      } catch (x) {// intentionally empty\n      }\n\n      iframe.onerror = null;\n    };\n\n    var cleanup = function cleanup() {\n      debug('cleanup');\n\n      if (iframe) {\n        unattach(); // This timeout makes chrome fire onbeforeunload event\n        // within iframe. Without the timeout it goes straight to\n        // onunload.\n\n        setTimeout(function () {\n          if (iframe) {\n            iframe.parentNode.removeChild(iframe);\n          }\n\n          iframe = null;\n        }, 0);\n        eventUtils.unloadDel(unloadRef);\n      }\n    };\n\n    var onerror = function onerror(err) {\n      debug('onerror', err);\n\n      if (iframe) {\n        cleanup();\n        errorCallback(err);\n      }\n    };\n\n    var post = function post(msg, origin) {\n      debug('post', msg, origin);\n      setTimeout(function () {\n        try {\n          // When the iframe is not loaded, IE raises an exception\n          // on 'contentWindow'.\n          if (iframe && iframe.contentWindow) {\n            iframe.contentWindow.postMessage(msg, origin);\n          }\n        } catch (x) {// intentionally empty\n        }\n      }, 0);\n    };\n\n    iframe.src = iframeUrl;\n    iframe.style.display = 'none';\n    iframe.style.position = 'absolute';\n\n    iframe.onerror = function () {\n      onerror('onerror');\n    };\n\n    iframe.onload = function () {\n      debug('onload'); // `onload` is triggered before scripts on the iframe are\n      // executed. Give it few seconds to actually load stuff.\n\n      clearTimeout(tref);\n      tref = setTimeout(function () {\n        onerror('onload timeout');\n      }, 2000);\n    };\n\n    global.document.body.appendChild(iframe);\n    tref = setTimeout(function () {\n      onerror('timeout');\n    }, 15000);\n    unloadRef = eventUtils.unloadAdd(cleanup);\n    return {\n      post: post,\n      cleanup: cleanup,\n      loaded: unattach\n    };\n  }\n  /* eslint no-undef: \"off\", new-cap: \"off\" */\n  ,\n  createHtmlfile: function createHtmlfile(iframeUrl, errorCallback) {\n    var axo = ['Active'].concat('Object').join('X');\n    var doc = new global[axo]('htmlfile');\n    var tref, unloadRef;\n    var iframe;\n\n    var unattach = function unattach() {\n      clearTimeout(tref);\n      iframe.onerror = null;\n    };\n\n    var cleanup = function cleanup() {\n      if (doc) {\n        unattach();\n        eventUtils.unloadDel(unloadRef);\n        iframe.parentNode.removeChild(iframe);\n        iframe = doc = null;\n        CollectGarbage();\n      }\n    };\n\n    var onerror = function onerror(r) {\n      debug('onerror', r);\n\n      if (doc) {\n        cleanup();\n        errorCallback(r);\n      }\n    };\n\n    var post = function post(msg, origin) {\n      try {\n        // When the iframe is not loaded, IE raises an exception\n        // on 'contentWindow'.\n        setTimeout(function () {\n          if (iframe && iframe.contentWindow) {\n            iframe.contentWindow.postMessage(msg, origin);\n          }\n        }, 0);\n      } catch (x) {// intentionally empty\n      }\n    };\n\n    doc.open();\n    doc.write('<html><s' + 'cript>' + 'document.domain=\"' + global.document.domain + '\";' + '</s' + 'cript></html>');\n    doc.close();\n    doc.parentWindow[module.exports.WPrefix] = global[module.exports.WPrefix];\n    var c = doc.createElement('div');\n    doc.body.appendChild(c);\n    iframe = doc.createElement('iframe');\n    c.appendChild(iframe);\n    iframe.src = iframeUrl;\n\n    iframe.onerror = function () {\n      onerror('onerror');\n    };\n\n    tref = setTimeout(function () {\n      onerror('timeout');\n    }, 15000);\n    unloadRef = eventUtils.unloadAdd(cleanup);\n    return {\n      post: post,\n      cleanup: cleanup,\n      loaded: unattach\n    };\n  }\n};\nmodule.exports.iframeEnabled = false;\n\nif (global.document) {\n  // postMessage misbehaves in konqueror 4.6.5 - the messages are delivered with\n  // huge delay, or not at all.\n  module.exports.iframeEnabled = (typeof global.postMessage === 'function' || typeof global.postMessage === 'object') && !browser.isKonqueror();\n}","'use strict';\n\nvar logObject = {};\n['log', 'debug', 'warn'].forEach(function (level) {\n  var levelExists;\n\n  try {\n    levelExists = global.console && global.console[level] && global.console[level].apply;\n  } catch (e) {// do nothing\n  }\n\n  logObject[level] = levelExists ? function () {\n    return global.console[level].apply(global.console, arguments);\n  } : level === 'log' ? function () {} : logObject.log;\n});\nmodule.exports = logObject;","'use strict';\n\nmodule.exports = {\n  isObject: function isObject(obj) {\n    var type = typeof obj;\n    return type === 'function' || type === 'object' && !!obj;\n  },\n  extend: function extend(obj) {\n    if (!this.isObject(obj)) {\n      return obj;\n    }\n\n    var source, prop;\n\n    for (var i = 1, length = arguments.length; i < length; i++) {\n      source = arguments[i];\n\n      for (prop in source) {\n        if (Object.prototype.hasOwnProperty.call(source, prop)) {\n          obj[prop] = source[prop];\n        }\n      }\n    }\n\n    return obj;\n  }\n};","'use strict';\n\nvar crypto = require('crypto'); // This string has length 32, a power of 2, so the modulus doesn't introduce a\n// bias.\n\n\nvar _randomStringChars = 'abcdefghijklmnopqrstuvwxyz012345';\nmodule.exports = {\n  string: function string(length) {\n    var max = _randomStringChars.length;\n    var bytes = crypto.randomBytes(length);\n    var ret = [];\n\n    for (var i = 0; i < length; i++) {\n      ret.push(_randomStringChars.substr(bytes[i] % max, 1));\n    }\n\n    return ret.join('');\n  },\n  number: function number(max) {\n    return Math.floor(Math.random() * max);\n  },\n  numberString: function numberString(max) {\n    var t = ('' + (max - 1)).length;\n    var p = new Array(t + 1).join('0');\n    return (p + this.number(max)).slice(-t);\n  }\n};","'use strict';\n\nvar debug = function debug() {};\n\nif (process.env.NODE_ENV !== 'production') {\n  debug = require('debug')('sockjs-client:utils:transport');\n}\n\nmodule.exports = function (availableTransports) {\n  return {\n    filterToEnabled: function filterToEnabled(transportsWhitelist, info) {\n      var transports = {\n        main: [],\n        facade: []\n      };\n\n      if (!transportsWhitelist) {\n        transportsWhitelist = [];\n      } else if (typeof transportsWhitelist === 'string') {\n        transportsWhitelist = [transportsWhitelist];\n      }\n\n      availableTransports.forEach(function (trans) {\n        if (!trans) {\n          return;\n        }\n\n        if (trans.transportName === 'websocket' && info.websocket === false) {\n          debug('disabled from server', 'websocket');\n          return;\n        }\n\n        if (transportsWhitelist.length && transportsWhitelist.indexOf(trans.transportName) === -1) {\n          debug('not in whitelist', trans.transportName);\n          return;\n        }\n\n        if (trans.enabled(info)) {\n          debug('enabled', trans.transportName);\n          transports.main.push(trans);\n\n          if (trans.facadeTransport) {\n            transports.facade.push(trans.facadeTransport);\n          }\n        } else {\n          debug('disabled', trans.transportName);\n        }\n      });\n      return transports;\n    }\n  };\n};","'use strict';\n\nvar URL = require('url-parse');\n\nvar debug = function debug() {};\n\nif (process.env.NODE_ENV !== 'production') {\n  debug = require('debug')('sockjs-client:utils:url');\n}\n\nmodule.exports = {\n  getOrigin: function getOrigin(url) {\n    if (!url) {\n      return null;\n    }\n\n    var p = new URL(url);\n\n    if (p.protocol === 'file:') {\n      return null;\n    }\n\n    var port = p.port;\n\n    if (!port) {\n      port = p.protocol === 'https:' ? '443' : '80';\n    }\n\n    return p.protocol + '//' + p.hostname + ':' + port;\n  },\n  isOriginEqual: function isOriginEqual(a, b) {\n    var res = this.getOrigin(a) === this.getOrigin(b);\n    debug('same', a, b, res);\n    return res;\n  },\n  isSchemeEqual: function isSchemeEqual(a, b) {\n    return a.split(':')[0] === b.split(':')[0];\n  },\n  addPath: function addPath(url, path) {\n    var qs = url.split('?');\n    return qs[0] + path + (qs[1] ? '?' + qs[1] : '');\n  },\n  addQuery: function addQuery(url, q) {\n    return url + (url.indexOf('?') === -1 ? '?' + q : '&' + q);\n  },\n  isLoopbackAddr: function isLoopbackAddr(addr) {\n    return /^127\\.([0-9]{1,3})\\.([0-9]{1,3})\\.([0-9]{1,3})$/i.test(addr) || /^\\[::1\\]$/.test(addr);\n  }\n};","module.exports = '1.5.0';","/* global window */\nimport ponyfill from './ponyfill.js';\nvar root;\n\nif (typeof self !== 'undefined') {\n  root = self;\n} else if (typeof window !== 'undefined') {\n  root = window;\n} else if (typeof global !== 'undefined') {\n  root = global;\n} else if (typeof module !== 'undefined') {\n  root = module;\n} else {\n  root = Function('return this')();\n}\n\nvar result = ponyfill(root);\nexport default result;","export default function symbolObservablePonyfill(root) {\n  var result;\n  var Symbol = root.Symbol;\n\n  if (typeof Symbol === 'function') {\n    if (Symbol.observable) {\n      result = Symbol.observable;\n    } else {\n      result = Symbol('observable');\n      Symbol.observable = result;\n    }\n  } else {\n    result = '@@observable';\n  }\n\n  return result;\n}\n;","'use strict';\n\nrequire(\"core-js/modules/es.string.trim-start.js\");\n\nvar required = require('requires-port'),\n    qs = require('querystringify'),\n    slashes = /^[A-Za-z][A-Za-z0-9+-.]*:[\\\\/]+/,\n    protocolre = /^([a-z][a-z0-9.+-]*:)?([\\\\/]{1,})?([\\S\\s]*)/i,\n    whitespace = \"[\\\\x09\\\\x0A\\\\x0B\\\\x0C\\\\x0D\\\\x20\\\\xA0\\\\u1680\\\\u180E\\\\u2000\\\\u2001\\\\u2002\\\\u2003\\\\u2004\\\\u2005\\\\u2006\\\\u2007\\\\u2008\\\\u2009\\\\u200A\\\\u202F\\\\u205F\\\\u3000\\\\u2028\\\\u2029\\\\uFEFF]\",\n    left = new RegExp('^' + whitespace + '+');\n/**\n * Trim a given string.\n *\n * @param {String} str String to trim.\n * @public\n */\n\n\nfunction trimLeft(str) {\n  return (str ? str : '').toString().replace(left, '');\n}\n/**\n * These are the parse rules for the URL parser, it informs the parser\n * about:\n *\n * 0. The char it Needs to parse, if it's a string it should be done using\n *    indexOf, RegExp using exec and NaN means set as current value.\n * 1. The property we should set when parsing this value.\n * 2. Indication if it's backwards or forward parsing, when set as number it's\n *    the value of extra chars that should be split off.\n * 3. Inherit from location if non existing in the parser.\n * 4. `toLowerCase` the resulting value.\n */\n\n\nvar rules = [['#', 'hash'], // Extract from the back.\n['?', 'query'], // Extract from the back.\nfunction sanitize(address) {\n  // Sanitize what is left of the address\n  return address.replace('\\\\', '/');\n}, ['/', 'pathname'], // Extract from the back.\n['@', 'auth', 1], // Extract from the front.\n[NaN, 'host', undefined, 1, 1], // Set left over value.\n[/:(\\d+)$/, 'port', undefined, 1], // RegExp the back.\n[NaN, 'hostname', undefined, 1, 1] // Set left over.\n];\n/**\n * These properties should not be copied or inherited from. This is only needed\n * for all non blob URL's as a blob URL does not include a hash, only the\n * origin.\n *\n * @type {Object}\n * @private\n */\n\nvar ignore = {\n  hash: 1,\n  query: 1\n};\n/**\n * The location object differs when your code is loaded through a normal page,\n * Worker or through a worker using a blob. And with the blobble begins the\n * trouble as the location object will contain the URL of the blob, not the\n * location of the page where our code is loaded in. The actual origin is\n * encoded in the `pathname` so we can thankfully generate a good \"default\"\n * location from it so we can generate proper relative URL's again.\n *\n * @param {Object|String} loc Optional default location object.\n * @returns {Object} lolcation object.\n * @public\n */\n\nfunction lolcation(loc) {\n  var globalVar;\n  if (typeof window !== 'undefined') globalVar = window;else if (typeof global !== 'undefined') globalVar = global;else if (typeof self !== 'undefined') globalVar = self;else globalVar = {};\n  var location = globalVar.location || {};\n  loc = loc || location;\n  var finaldestination = {},\n      type = typeof loc,\n      key;\n\n  if ('blob:' === loc.protocol) {\n    finaldestination = new Url(unescape(loc.pathname), {});\n  } else if ('string' === type) {\n    finaldestination = new Url(loc, {});\n\n    for (key in ignore) {\n      delete finaldestination[key];\n    }\n  } else if ('object' === type) {\n    for (key in loc) {\n      if (key in ignore) continue;\n      finaldestination[key] = loc[key];\n    }\n\n    if (finaldestination.slashes === undefined) {\n      finaldestination.slashes = slashes.test(loc.href);\n    }\n  }\n\n  return finaldestination;\n}\n/**\n * @typedef ProtocolExtract\n * @type Object\n * @property {String} protocol Protocol matched in the URL, in lowercase.\n * @property {Boolean} slashes `true` if protocol is followed by \"//\", else `false`.\n * @property {String} rest Rest of the URL that is not part of the protocol.\n */\n\n/**\n * Extract protocol information from a URL with/without double slash (\"//\").\n *\n * @param {String} address URL we want to extract from.\n * @return {ProtocolExtract} Extracted information.\n * @private\n */\n\n\nfunction extractProtocol(address) {\n  address = trimLeft(address);\n  var match = protocolre.exec(address),\n      protocol = match[1] ? match[1].toLowerCase() : '',\n      slashes = !!(match[2] && match[2].length >= 2),\n      rest = match[2] && match[2].length === 1 ? '/' + match[3] : match[3];\n  return {\n    protocol: protocol,\n    slashes: slashes,\n    rest: rest\n  };\n}\n/**\n * Resolve a relative URL pathname against a base URL pathname.\n *\n * @param {String} relative Pathname of the relative URL.\n * @param {String} base Pathname of the base URL.\n * @return {String} Resolved pathname.\n * @private\n */\n\n\nfunction resolve(relative, base) {\n  if (relative === '') return base;\n  var path = (base || '/').split('/').slice(0, -1).concat(relative.split('/')),\n      i = path.length,\n      last = path[i - 1],\n      unshift = false,\n      up = 0;\n\n  while (i--) {\n    if (path[i] === '.') {\n      path.splice(i, 1);\n    } else if (path[i] === '..') {\n      path.splice(i, 1);\n      up++;\n    } else if (up) {\n      if (i === 0) unshift = true;\n      path.splice(i, 1);\n      up--;\n    }\n  }\n\n  if (unshift) path.unshift('');\n  if (last === '.' || last === '..') path.push('');\n  return path.join('/');\n}\n/**\n * The actual URL instance. Instead of returning an object we've opted-in to\n * create an actual constructor as it's much more memory efficient and\n * faster and it pleases my OCD.\n *\n * It is worth noting that we should not use `URL` as class name to prevent\n * clashes with the global URL instance that got introduced in browsers.\n *\n * @constructor\n * @param {String} address URL we want to parse.\n * @param {Object|String} [location] Location defaults for relative paths.\n * @param {Boolean|Function} [parser] Parser for the query string.\n * @private\n */\n\n\nfunction Url(address, location, parser) {\n  address = trimLeft(address);\n\n  if (!(this instanceof Url)) {\n    return new Url(address, location, parser);\n  }\n\n  var relative,\n      extracted,\n      parse,\n      instruction,\n      index,\n      key,\n      instructions = rules.slice(),\n      type = typeof location,\n      url = this,\n      i = 0; //\n  // The following if statements allows this module two have compatibility with\n  // 2 different API:\n  //\n  // 1. Node.js's `url.parse` api which accepts a URL, boolean as arguments\n  //    where the boolean indicates that the query string should also be parsed.\n  //\n  // 2. The `URL` interface of the browser which accepts a URL, object as\n  //    arguments. The supplied object will be used as default values / fall-back\n  //    for relative paths.\n  //\n\n  if ('object' !== type && 'string' !== type) {\n    parser = location;\n    location = null;\n  }\n\n  if (parser && 'function' !== typeof parser) parser = qs.parse;\n  location = lolcation(location); //\n  // Extract protocol information before running the instructions.\n  //\n\n  extracted = extractProtocol(address || '');\n  relative = !extracted.protocol && !extracted.slashes;\n  url.slashes = extracted.slashes || relative && location.slashes;\n  url.protocol = extracted.protocol || location.protocol || '';\n  address = extracted.rest; //\n  // When the authority component is absent the URL starts with a path\n  // component.\n  //\n\n  if (!extracted.slashes) instructions[3] = [/(.*)/, 'pathname'];\n\n  for (; i < instructions.length; i++) {\n    instruction = instructions[i];\n\n    if (typeof instruction === 'function') {\n      address = instruction(address);\n      continue;\n    }\n\n    parse = instruction[0];\n    key = instruction[1];\n\n    if (parse !== parse) {\n      url[key] = address;\n    } else if ('string' === typeof parse) {\n      if (~(index = address.indexOf(parse))) {\n        if ('number' === typeof instruction[2]) {\n          url[key] = address.slice(0, index);\n          address = address.slice(index + instruction[2]);\n        } else {\n          url[key] = address.slice(index);\n          address = address.slice(0, index);\n        }\n      }\n    } else if (index = parse.exec(address)) {\n      url[key] = index[1];\n      address = address.slice(0, index.index);\n    }\n\n    url[key] = url[key] || (relative && instruction[3] ? location[key] || '' : ''); //\n    // Hostname, host and protocol should be lowercased so they can be used to\n    // create a proper `origin`.\n    //\n\n    if (instruction[4]) url[key] = url[key].toLowerCase();\n  } //\n  // Also parse the supplied query string in to an object. If we're supplied\n  // with a custom parser as function use that instead of the default build-in\n  // parser.\n  //\n\n\n  if (parser) url.query = parser(url.query); //\n  // If the URL is relative, resolve the pathname against the base URL.\n  //\n\n  if (relative && location.slashes && url.pathname.charAt(0) !== '/' && (url.pathname !== '' || location.pathname !== '')) {\n    url.pathname = resolve(url.pathname, location.pathname);\n  } //\n  // Default to a / for pathname if none exists. This normalizes the URL\n  // to always have a /\n  //\n\n\n  if (url.pathname.charAt(0) !== '/' && url.hostname) {\n    url.pathname = '/' + url.pathname;\n  } //\n  // We should not add port numbers if they are already the default port number\n  // for a given protocol. As the host also contains the port number we're going\n  // override it with the hostname which contains no port number.\n  //\n\n\n  if (!required(url.port, url.protocol)) {\n    url.host = url.hostname;\n    url.port = '';\n  } //\n  // Parse down the `auth` for the username and password.\n  //\n\n\n  url.username = url.password = '';\n\n  if (url.auth) {\n    instruction = url.auth.split(':');\n    url.username = instruction[0] || '';\n    url.password = instruction[1] || '';\n  }\n\n  url.origin = url.protocol && url.host && url.protocol !== 'file:' ? url.protocol + '//' + url.host : 'null'; //\n  // The href is just the compiled result.\n  //\n\n  url.href = url.toString();\n}\n/**\n * This is convenience method for changing properties in the URL instance to\n * insure that they all propagate correctly.\n *\n * @param {String} part          Property we need to adjust.\n * @param {Mixed} value          The newly assigned value.\n * @param {Boolean|Function} fn  When setting the query, it will be the function\n *                               used to parse the query.\n *                               When setting the protocol, double slash will be\n *                               removed from the final url if it is true.\n * @returns {URL} URL instance for chaining.\n * @public\n */\n\n\nfunction set(part, value, fn) {\n  var url = this;\n\n  switch (part) {\n    case 'query':\n      if ('string' === typeof value && value.length) {\n        value = (fn || qs.parse)(value);\n      }\n\n      url[part] = value;\n      break;\n\n    case 'port':\n      url[part] = value;\n\n      if (!required(value, url.protocol)) {\n        url.host = url.hostname;\n        url[part] = '';\n      } else if (value) {\n        url.host = url.hostname + ':' + value;\n      }\n\n      break;\n\n    case 'hostname':\n      url[part] = value;\n      if (url.port) value += ':' + url.port;\n      url.host = value;\n      break;\n\n    case 'host':\n      url[part] = value;\n\n      if (/:\\d+$/.test(value)) {\n        value = value.split(':');\n        url.port = value.pop();\n        url.hostname = value.join(':');\n      } else {\n        url.hostname = value;\n        url.port = '';\n      }\n\n      break;\n\n    case 'protocol':\n      url.protocol = value.toLowerCase();\n      url.slashes = !fn;\n      break;\n\n    case 'pathname':\n    case 'hash':\n      if (value) {\n        var char = part === 'pathname' ? '/' : '#';\n        url[part] = value.charAt(0) !== char ? char + value : value;\n      } else {\n        url[part] = value;\n      }\n\n      break;\n\n    default:\n      url[part] = value;\n  }\n\n  for (var i = 0; i < rules.length; i++) {\n    var ins = rules[i];\n    if (ins[4]) url[ins[1]] = url[ins[1]].toLowerCase();\n  }\n\n  url.origin = url.protocol && url.host && url.protocol !== 'file:' ? url.protocol + '//' + url.host : 'null';\n  url.href = url.toString();\n  return url;\n}\n/**\n * Transform the properties back in to a valid and full URL string.\n *\n * @param {Function} stringify Optional query stringify function.\n * @returns {String} Compiled version of the URL.\n * @public\n */\n\n\nfunction toString(stringify) {\n  if (!stringify || 'function' !== typeof stringify) stringify = qs.stringify;\n  var query,\n      url = this,\n      protocol = url.protocol;\n  if (protocol && protocol.charAt(protocol.length - 1) !== ':') protocol += ':';\n  var result = protocol + (url.slashes ? '//' : '');\n\n  if (url.username) {\n    result += url.username;\n    if (url.password) result += ':' + url.password;\n    result += '@';\n  }\n\n  result += url.host + url.pathname;\n  query = 'object' === typeof url.query ? stringify(url.query) : url.query;\n  if (query) result += '?' !== query.charAt(0) ? '?' + query : query;\n  if (url.hash) result += url.hash;\n  return result;\n}\n\nUrl.prototype = {\n  set: set,\n  toString: toString\n}; //\n// Expose the URL parser and some additional properties that might be useful for\n// others or testing.\n//\n\nUrl.extractProtocol = extractProtocol;\nUrl.location = lolcation;\nUrl.trimLeft = trimLeft;\nUrl.qs = qs;\nmodule.exports = Url;","var fails = require('../internals/fails');\nvar whitespaces = require('../internals/whitespaces');\n\nvar non = '\\u200B\\u0085\\u180E';\n\n// check that a method works with the correct list\n// of whitespaces and has a correct name\nmodule.exports = function (METHOD_NAME) {\n  return fails(function () {\n    return !!whitespaces[METHOD_NAME]() || non[METHOD_NAME]() != non || whitespaces[METHOD_NAME].name !== METHOD_NAME;\n  });\n};\n","var requireObjectCoercible = require('../internals/require-object-coercible');\nvar whitespaces = require('../internals/whitespaces');\n\nvar whitespace = '[' + whitespaces + ']';\nvar ltrim = RegExp('^' + whitespace + whitespace + '*');\nvar rtrim = RegExp(whitespace + whitespace + '*$');\n\n// `String.prototype.{ trim, trimStart, trimEnd, trimLeft, trimRight }` methods implementation\nvar createMethod = function (TYPE) {\n  return function ($this) {\n    var string = String(requireObjectCoercible($this));\n    if (TYPE & 1) string = string.replace(ltrim, '');\n    if (TYPE & 2) string = string.replace(rtrim, '');\n    return string;\n  };\n};\n\nmodule.exports = {\n  // `String.prototype.{ trimLeft, trimStart }` methods\n  // https://tc39.es/ecma262/#sec-string.prototype.trimstart\n  start: createMethod(1),\n  // `String.prototype.{ trimRight, trimEnd }` methods\n  // https://tc39.es/ecma262/#sec-string.prototype.trimend\n  end: createMethod(2),\n  // `String.prototype.trim` method\n  // https://tc39.es/ecma262/#sec-string.prototype.trim\n  trim: createMethod(3)\n};\n","// a string of all valid unicode whitespaces\nmodule.exports = '\\u0009\\u000A\\u000B\\u000C\\u000D\\u0020\\u00A0\\u1680\\u2000\\u2001\\u2002' +\n  '\\u2003\\u2004\\u2005\\u2006\\u2007\\u2008\\u2009\\u200A\\u202F\\u205F\\u3000\\u2028\\u2029\\uFEFF';\n","'use strict';\nvar $ = require('../internals/export');\nvar $trimStart = require('../internals/string-trim').start;\nvar forcedStringTrimMethod = require('../internals/string-trim-forced');\n\nvar FORCED = forcedStringTrimMethod('trimStart');\n\nvar trimStart = FORCED ? function trimStart() {\n  return $trimStart(this);\n} : ''.trimStart;\n\n// `String.prototype.{ trimStart, trimLeft }` methods\n// https://tc39.es/ecma262/#sec-string.prototype.trimstart\n// https://tc39.es/ecma262/#String.prototype.trimleft\n$({ target: 'String', proto: true, forced: FORCED }, {\n  trimStart: trimStart,\n  trimLeft: trimStart\n});\n"],"sourceRoot":""}